2025-04-14 22:10:44,749 - flask.app - INFO - Received file upload request
2025-04-14 22:10:44,781 - flask.app - INFO - Processing file: sec-example-lease.pdf
2025-04-14 22:11:12,335 - flask.app - INFO - File sec-example-lease.pdf successfully uploaded and processed
2025-04-14 22:13:16,255 - flask.app - INFO - Received file upload request
2025-04-14 22:13:16,275 - flask.app - INFO - Processing file: sec-example-lease.pdf
2025-04-14 22:13:45,119 - flask.app - INFO - File sec-example-lease.pdf successfully uploaded and processed
2025-04-14 22:13:45,150 - flask.app - INFO - Received lease extraction request
2025-04-14 22:14:03,606 - flask.app - ERROR - Error during lease extraction: 'list' object has no attribute 'result'
2025-04-14 22:23:42,235 - flask.app - INFO - Received file upload request
2025-04-14 22:23:42,246 - flask.app - INFO - Processing file: sec-example-lease.pdf
2025-04-14 22:24:19,102 - flask.app - INFO - File sec-example-lease.pdf successfully uploaded and processed
2025-04-14 22:24:19,127 - flask.app - INFO - Received lease extraction request
2025-04-14 22:24:32,501 - flask.app - ERROR - Error during lease extraction: 'list' object has no attribute 'result'
2025-04-14 22:26:42,115 - flask.app - INFO - Received file upload request
2025-04-14 22:26:42,134 - flask.app - INFO - Processing file: sec-example-lease.pdf
2025-04-14 22:27:36,085 - flask.app - INFO - File sec-example-lease.pdf successfully uploaded and processed
2025-04-14 22:27:36,107 - flask.app - INFO - Received lease extraction request
2025-04-14 22:27:51,746 - flask.app - INFO - Received file upload request
2025-04-14 22:27:51,756 - flask.app - INFO - Processing file: sec-example-lease.pdf
2025-04-14 22:28:35,822 - flask.app - INFO - File sec-example-lease.pdf successfully uploaded and processed
2025-04-14 22:28:35,842 - flask.app - INFO - Received lease extraction request
2025-04-14 22:28:35,843 - flask.app - ERROR - Error during lease extraction: Workflow.__init__() got an unexpected keyword argument 'document_path'
2025-04-14 22:30:20,991 - flask.app - INFO - Received lease extraction request
2025-04-14 22:30:20,993 - flask.app - ERROR - Error during lease extraction: 415 Unsupported Media Type: Did not attempt to load JSON data because the request Content-Type was not 'application/json'.
2025-04-14 22:33:49,975 - flask.app - INFO - Received lease extraction request
2025-04-14 22:34:04,735 - flask.app - ERROR - Error during lease extraction: 'list' object has no attribute 'result'
2025-04-14 22:38:02,139 - flask.app - INFO - Received file upload request
2025-04-14 22:38:02,154 - flask.app - INFO - Processing file: sec-example-lease.pdf
2025-04-14 22:38:34,165 - flask.app - INFO - Received file upload request
2025-04-14 22:38:34,176 - flask.app - INFO - Processing file: sec-example-lease.pdf
2025-04-14 22:39:38,343 - flask.app - INFO - Received file upload request
2025-04-14 22:39:38,354 - flask.app - INFO - Processing file: sec-example-lease.pdf
2025-04-14 22:40:53,135 - flask.app - INFO - File sec-example-lease.pdf successfully uploaded and processed
2025-04-14 22:40:53,135 - flask.app - INFO - File sec-example-lease.pdf successfully uploaded and processed
2025-04-14 22:42:52,925 - flask.app - INFO - Received file upload request
2025-04-14 22:42:52,941 - flask.app - INFO - Processing file: sec-example-lease.pdf
2025-04-14 22:43:14,216 - flask.app - INFO - File sec-example-lease.pdf successfully uploaded and processed
2025-04-14 22:54:45,743 - flask.app - INFO - Received file upload request
2025-04-14 22:54:45,751 - flask.app - INFO - Processing file: sec-example-lease.pdf
2025-04-14 22:55:07,375 - flask.app - INFO - File sec-example-lease.pdf successfully uploaded and processed
2025-04-14 22:55:07,397 - flask.app - INFO - Received lease extraction request
2025-04-14 22:55:21,394 - flask.app - INFO - Lease extraction completed successfully
2025-04-14 22:55:21,395 - flask.app - ERROR - Error during lease extraction: Object of type LeaseExtraction is not JSON serializable
2025-04-14 22:58:41,972 - flask.app - INFO - Received file upload request
2025-04-14 22:58:41,981 - flask.app - INFO - Processing file: sec-example-lease.pdf
2025-04-14 23:00:19,351 - flask.app - INFO - File sec-example-lease.pdf successfully uploaded and processed
2025-04-14 23:00:19,414 - flask.app - INFO - Received lease extraction request
2025-04-14 23:00:38,699 - flask.app - INFO - Lease extraction completed successfully
2025-04-18 10:04:58,458 - flask.app - INFO - Received extraction agent update request
2025-04-18 10:04:58,461 - flask.app - ERROR - Error updating extraction agent: 'LlamaCloudIndex' object has no attribute 'update_extraction_agent'
2025-04-18 10:05:28,677 - flask.app - INFO - Received extraction agent update request
2025-04-18 10:05:28,679 - flask.app - ERROR - Error updating extraction agent: 'LlamaCloudIndex' object has no attribute 'update_extraction_agent'
2025-04-18 10:11:43,026 - flask.app - INFO - Received file upload request
2025-04-18 10:11:43,049 - flask.app - INFO - Processing file: sec-example-lease-condensed.pdf
2025-04-18 10:11:43,054 - flask.app - INFO - File sec-example-lease-condensed.pdf successfully uploaded
2025-04-18 10:12:46,386 - flask.app - INFO - Received lease extraction request
2025-04-18 10:12:46,992 - flask.app - ERROR - Error during lease extraction: status_code: 404, body: {'detail': 'Extraction agent atlas-lease-extractor not found or user does not have access.'}
2025-04-18 10:20:27,146 - flask.app - INFO - Received extraction agent update request
2025-04-18 10:20:27,177 - flask.app - ERROR - Error updating extraction agent: 'LlamaCloudIndex' object has no attribute 'update_extraction_agent'
2025-04-18 10:22:32,798 - flask.app - INFO - Received extraction agent update request
2025-04-18 10:22:32,800 - flask.app - ERROR - Error updating extraction agent: 'LlamaCloudIndex' object has no attribute 'update_extraction_agent'
2025-04-18 10:35:22,437 - flask.app - INFO - Received update extraction agent request
2025-04-18 10:35:22,809 - flask.app - INFO - Successfully connected to agent: 3471b248-2281-4741-91c4-8e0f15328782
2025-04-18 10:37:23,297 - flask.app - INFO - Received update extraction agent request
2025-04-18 10:37:25,439 - flask.app - ERROR - Error updating extraction agent: 'ExtractionAgent' object has no attribute 'update'
2025-04-18 10:43:02,130 - flask.app - INFO - Received update extraction agent request
2025-04-18 10:43:02,550 - flask.app - ERROR - Error updating extraction agent: 'AsyncLlamaCloud' object has no attribute 'put'
2025-04-18 10:50:24,990 - flask.app - INFO - Received update extraction agent request
2025-04-18 10:50:25,354 - flask.app - ERROR - Error updating extraction agent: 'AsyncLlamaCloud' object has no attribute 'aput'
2025-04-18 10:54:23,557 - flask.app - INFO - Received update extraction agent request
2025-04-18 10:54:23,917 - flask.app - ERROR - Error updating extraction agent: 'LlamaCloudManager' object has no attribute 'update_agent'
2025-05-09 18:05:42,686 - flask.app - INFO - Received file upload request
2025-05-09 18:05:42,709 - flask.app - INFO - Processing file: 2019-2022_Lease_Agreement_TETCO_Signed.pdf
2025-05-09 18:05:42,714 - flask.app - INFO - File 2019-2022_Lease_Agreement_TETCO_Signed.pdf successfully uploaded
2025-05-09 18:05:48,728 - flask.app - INFO - Received lease extraction request
2025-05-09 18:05:50,530 - flask.app - ERROR - Extraction failed: error: Error processing document: Error extracting document: Error getting agent: status_code: 404, body: {'detail': 'Extraction agent atlas-lease-extractor not found or user does not have access.'}
2025-05-09 18:07:32,764 - flask.app - INFO - Received lease extraction request
2025-05-09 18:07:33,656 - flask.app - ERROR - Extraction failed: error: Error processing document: Error extracting document: Error getting agent: status_code: 404, body: {'detail': 'Extraction agent atlas-lease-extractor not found or user does not have access.'}
2025-05-10 10:33:05,985 - flask.app - INFO - Received file upload request
2025-05-10 10:33:06,007 - flask.app - INFO - Processing file: Sample_Office_Lease.pdf
2025-05-10 10:33:06,008 - flask.app - INFO - File Sample_Office_Lease.pdf successfully uploaded
2025-05-10 10:33:08,964 - flask.app - INFO - Received lease extraction request
2025-05-10 10:33:10,062 - flask.app - ERROR - Extraction failed: error: Error processing document: Error extracting document: Error getting agent: status_code: 404, body: {'detail': 'Extraction agent atlas-lease-extractor not found or user does not have access.'}
2025-05-10 11:31:56,821 - flask.app - INFO - Received file upload request
2025-05-10 11:31:56,843 - flask.app - INFO - Processing file: 2019-2022-Lease-Agreement-TETCO-Signed-condensed.pdf
2025-05-10 11:31:56,844 - flask.app - INFO - File 2019-2022-Lease-Agreement-TETCO-Signed-condensed.pdf successfully uploaded
2025-05-10 11:32:41,818 - flask.app - INFO - Received file upload request
2025-05-10 11:32:41,825 - flask.app - INFO - Processing file: 2019-2022-Lease-Agreement-TETCO-Signed-condensed.pdf
2025-05-10 11:32:41,828 - flask.app - INFO - File 2019-2022-Lease-Agreement-TETCO-Signed-condensed.pdf successfully uploaded
2025-05-10 11:35:37,867 - flask.app - INFO - Received file upload request
2025-05-10 11:35:37,902 - flask.app - INFO - Processing file: 2019-2022-Lease-Agreement-TETCO-Signed-condensed.pdf
2025-05-10 11:35:37,903 - flask.app - INFO - File 2019-2022-Lease-Agreement-TETCO-Signed-condensed.pdf successfully uploaded
2025-05-10 11:45:26,821 - flask.app - INFO - Received lease summary extraction request
2025-05-10 11:45:44,698 - flask.app - INFO - Lease summary extraction completed successfully
2025-05-10 11:45:44,700 - flask.app - ERROR - Error during lease summary extraction: Object of type ExtractRun is not JSON serializable
2025-05-10 11:50:48,689 - flask.app - INFO - Received lease summary extraction request
2025-05-10 11:51:12,377 - flask.app - INFO - Type of summary_result: <class 'llama_cloud.types.extract_run.ExtractRun'>
2025-05-10 11:51:12,379 - flask.app - INFO - dir(summary_result): ['Config', '__abstractmethods__', '__annotations__', '__class__', '__class_vars__', '__config__', '__custom_root_type__', '__delattr__', '__dict__', '__dir__', '__doc__', '__eq__', '__exclude_fields__', '__fields__', '__fields_set__', '__firstlineno__', '__format__', '__ge__', '__get_validators__', '__getattribute__', '__getstate__', '__gt__', '__hash__', '__include_fields__', '__init__', '__init_subclass__', '__iter__', '__json_encoder__', '__le__', '__lt__', '__module__', '__ne__', '__new__', '__post_root_validators__', '__pre_root_validators__', '__pretty__', '__private_attributes__', '__reduce__', '__reduce_ex__', '__repr__', '__repr_args__', '__repr_name__', '__repr_str__', '__rich_repr__', '__schema_cache__', '__setattr__', '__setstate__', '__signature__', '__sizeof__', '__slots__', '__static_attributes__', '__str__', '__subclasshook__', '__try_update_forward_refs__', '__validators__', '_abc_impl', '_calculate_keys', '_copy_and_set_values', '_decompose_class', '_enforce_dict_if_root', '_get_value', '_init_private_attributes', '_iter', 'config', 'construct', 'copy', 'created_at', 'data', 'data_schema', 'dict', 'error', 'extraction_agent_id', 'extraction_metadata', 'file', 'from_orm', 'from_ui', 'id', 'job_id', 'json', 'parse_file', 'parse_obj', 'parse_raw', 'schema', 'schema_json', 'status', 'update_forward_refs', 'updated_at', 'validate']
2025-05-10 11:51:12,380 - flask.app - INFO - str(summary_result): id='986296f8-43fa-4b12-be1e-1a68e419ca90' created_at=datetime.datetime(2025, 5, 10, 16, 50, 49, 901227, tzinfo=datetime.timezone.utc) updated_at=datetime.datetime(2025, 5, 10, 16, 51, 11, 80424, tzinfo=datetime.timezone.utc) extraction_agent_id='3471b248-2281-4741-91c4-8e0f15328782' data_schema={'additionalProperties': False, 'properties': {'property_address': {'description': 'Complete street address of the leased property including street number, city, state and zip code', 'type': 'string'}, 'leased_sqft': {'description': 'Actual square footage being leased by the tenant', 'type': 'string'}, 'lease_type': {'description': "Type of lease e.g., 'Triple Net (NNN)', 'Full Service Gross', 'Modified Gross'", 'type': 'string'}, 'lease_expiration_date': {'description': 'Date when the lease agreement terminates (format: YYYY-MM-DD)', 'type': 'string'}, 'base_rent': {'description': 'Base rent amount, including monthly and annual values', 'type': 'string'}, 'security_deposit': {'description': 'Amount of security deposit required from tenant', 'type': 'string'}, 'landlord': {'description': 'Full legal name of the landlord/lessor who owns the property', 'type': 'string'}, 'tenant': {'description': 'Full legal name of the tenant/lessee who is renting the property', 'type': 'string'}, 'property_manager': {'description': 'Property manager responsible for managing the property and interacting with the tenant', 'type': 'string'}}, 'required': ['property_address', 'leased_sqft', 'lease_type', 'lease_expiration_date', 'base_rent', 'security_deposit', 'landlord', 'tenant', 'property_manager'], 'type': 'object'} config=ExtractConfig(extraction_target=<ExtractTarget.PER_DOC: 'PER_DOC'>, extraction_mode=<ExtractMode.FAST: 'FAST'>, system_prompt='You are a senior Commercial Real Estate Analyst and you help commercial real estate professionals abstract (i.e., extract) critical data from pdf documents into structured data that will be used for critical analaysis, deal-making, and financial reporting for financial reporting and compliance.') file=File(id='34e3649a-ff6d-4525-9503-053005bc79dc', created_at=datetime.datetime(2025, 5, 10, 0, 46, 36, 690143, tzinfo=datetime.timezone.utc), updated_at=datetime.datetime(2025, 5, 10, 16, 50, 49, 558533, tzinfo=datetime.timezone.utc), name='___2019-2022-Lease-Agreement-TETCO-[Signed]-condensed.pdf', external_file_id='___2019-2022-Lease-Agreement-TETCO-[Signed]-condensed.pdf', file_size=662128, file_type='pdf', project_id='09e98391-87ce-4d6f-8ea1-d44fba2d66a3', last_modified_at=datetime.datetime(2025, 5, 10, 16, 50, 49, tzinfo=datetime.timezone.utc), resource_info={'file_size': 662128, 'last_modified_at': '2025-05-10T16:50:49'}, permission_info=None, data_source_id=None) status=<ExtractState.SUCCESS: 'SUCCESS'> error=None job_id='7583770f-d9e0-4f7c-ad82-dd6b8b4131e5' data={'property_address': '1100 NE Loop 410, Suite 550, San Antonio, TX 78209', 'leased_sqft': '2394', 'lease_type': 'Full Service Gross', 'lease_expiration_date': '2022-12-31', 'base_rent': 'Monthly Rent: $54,668.25, Annual Minimum: $556,259.00', 'security_deposit': '$9,336.50', 'landlord': 'TETCO CENTER LP', 'tenant': 'SANDERFORD & CARROLL PC', 'property_manager': 'Reata Property Management'} extraction_metadata={'field_metadata': {}, 'usage': {'num_pages_extracted': 10, 'num_document_tokens': 8117, 'num_output_tokens': 113}} from_ui=False
2025-05-10 11:51:12,380 - flask.app - INFO - summary_result.__dict__: {'id': '986296f8-43fa-4b12-be1e-1a68e419ca90', 'created_at': datetime.datetime(2025, 5, 10, 16, 50, 49, 901227, tzinfo=datetime.timezone.utc), 'updated_at': datetime.datetime(2025, 5, 10, 16, 51, 11, 80424, tzinfo=datetime.timezone.utc), 'extraction_agent_id': '3471b248-2281-4741-91c4-8e0f15328782', 'data_schema': {'additionalProperties': False, 'properties': {'property_address': {'description': 'Complete street address of the leased property including street number, city, state and zip code', 'type': 'string'}, 'leased_sqft': {'description': 'Actual square footage being leased by the tenant', 'type': 'string'}, 'lease_type': {'description': "Type of lease e.g., 'Triple Net (NNN)', 'Full Service Gross', 'Modified Gross'", 'type': 'string'}, 'lease_expiration_date': {'description': 'Date when the lease agreement terminates (format: YYYY-MM-DD)', 'type': 'string'}, 'base_rent': {'description': 'Base rent amount, including monthly and annual values', 'type': 'string'}, 'security_deposit': {'description': 'Amount of security deposit required from tenant', 'type': 'string'}, 'landlord': {'description': 'Full legal name of the landlord/lessor who owns the property', 'type': 'string'}, 'tenant': {'description': 'Full legal name of the tenant/lessee who is renting the property', 'type': 'string'}, 'property_manager': {'description': 'Property manager responsible for managing the property and interacting with the tenant', 'type': 'string'}}, 'required': ['property_address', 'leased_sqft', 'lease_type', 'lease_expiration_date', 'base_rent', 'security_deposit', 'landlord', 'tenant', 'property_manager'], 'type': 'object'}, 'config': ExtractConfig(extraction_target=<ExtractTarget.PER_DOC: 'PER_DOC'>, extraction_mode=<ExtractMode.FAST: 'FAST'>, system_prompt='You are a senior Commercial Real Estate Analyst and you help commercial real estate professionals abstract (i.e., extract) critical data from pdf documents into structured data that will be used for critical analaysis, deal-making, and financial reporting for financial reporting and compliance.'), 'file': File(id='34e3649a-ff6d-4525-9503-053005bc79dc', created_at=datetime.datetime(2025, 5, 10, 0, 46, 36, 690143, tzinfo=datetime.timezone.utc), updated_at=datetime.datetime(2025, 5, 10, 16, 50, 49, 558533, tzinfo=datetime.timezone.utc), name='___2019-2022-Lease-Agreement-TETCO-[Signed]-condensed.pdf', external_file_id='___2019-2022-Lease-Agreement-TETCO-[Signed]-condensed.pdf', file_size=662128, file_type='pdf', project_id='09e98391-87ce-4d6f-8ea1-d44fba2d66a3', last_modified_at=datetime.datetime(2025, 5, 10, 16, 50, 49, tzinfo=datetime.timezone.utc), resource_info={'file_size': 662128, 'last_modified_at': '2025-05-10T16:50:49'}, permission_info=None, data_source_id=None), 'status': <ExtractState.SUCCESS: 'SUCCESS'>, 'error': None, 'job_id': '7583770f-d9e0-4f7c-ad82-dd6b8b4131e5', 'data': {'property_address': '1100 NE Loop 410, Suite 550, San Antonio, TX 78209', 'leased_sqft': '2394', 'lease_type': 'Full Service Gross', 'lease_expiration_date': '2022-12-31', 'base_rent': 'Monthly Rent: $54,668.25, Annual Minimum: $556,259.00', 'security_deposit': '$9,336.50', 'landlord': 'TETCO CENTER LP', 'tenant': 'SANDERFORD & CARROLL PC', 'property_manager': 'Reata Property Management'}, 'extraction_metadata': {'field_metadata': {}, 'usage': {'num_pages_extracted': 10, 'num_document_tokens': 8117, 'num_output_tokens': 113}}, 'from_ui': False}
2025-05-10 11:51:12,380 - flask.app - INFO - Lease summary extraction completed successfully
2025-05-10 11:51:12,381 - flask.app - ERROR - Error during lease summary extraction: Object of type ExtractRun is not JSON serializable
2025-05-10 11:52:59,526 - flask.app - INFO - Received lease summary extraction request
2025-05-10 11:54:47,506 - flask.app - INFO - Received file upload request
2025-05-10 11:54:47,513 - flask.app - INFO - Processing file: 2019-2022-Lease-Agreement-TETCO-Signed-condensed.pdf
2025-05-10 11:54:47,514 - flask.app - INFO - File 2019-2022-Lease-Agreement-TETCO-Signed-condensed.pdf successfully uploaded
2025-05-10 11:54:47,524 - flask.app - INFO - Received lease summary extraction request
2025-05-10 11:54:47,525 - flask.app - ERROR - Error during lease summary extraction: 415 Unsupported Media Type: Did not attempt to load JSON data because the request Content-Type was not 'application/json'.
2025-05-10 12:12:42,084 - flask.app - INFO - Received indexing request
2025-05-10 12:15:16,705 - flask.app - INFO - Received lease summary extraction request
2025-05-10 12:15:16,697 - flask.app - INFO - Received indexing request
2025-05-10 12:15:16,747 - flask.app - ERROR - Error during lease summary extraction: 415 Unsupported Media Type: Did not attempt to load JSON data because the request Content-Type was not 'application/json'.
2025-05-10 12:24:59,999 - flask.app - INFO - Received indexing request
2025-05-10 12:38:39,161 - flask.app - INFO - Received file upload request
2025-05-10 12:38:39,180 - flask.app - INFO - Received lease summary extraction request
2025-05-10 12:38:39,180 - flask.app - ERROR - Error during lease summary extraction: 415 Unsupported Media Type: Did not attempt to load JSON data because the request Content-Type was not 'application/json'.
2025-05-10 12:38:39,203 - flask.app - INFO - Received indexing request
2025-05-10 12:39:43,781 - flask.app - ERROR - Failed to index file with Llama Cloud
2025-05-10 12:46:15,316 - flask.app - INFO - Received file upload request
2025-05-10 12:46:15,341 - flask.app - INFO - Received lease summary extraction request
2025-05-10 12:46:15,342 - flask.app - ERROR - No file part in request
2025-05-10 12:46:15,350 - flask.app - INFO - Received indexing request
2025-05-10 12:47:30,514 - flask.app - ERROR - Failed to index file with Llama Cloud
2025-05-10 12:48:07,288 - flask.app - INFO - Received file upload request
2025-05-10 12:48:07,307 - flask.app - INFO - Received lease summary extraction request
2025-05-10 12:48:07,840 - flask.app - ERROR - Llama Cloud error: {"detail":"Invalid authentication token"}
2025-05-10 12:48:07,850 - flask.app - INFO - Received indexing request
2025-05-10 12:49:13,075 - flask.app - ERROR - Failed to index file with Llama Cloud
2025-05-10 12:52:29,903 - flask.app - INFO - Received file upload request
2025-05-10 12:52:29,930 - flask.app - INFO - Received lease summary extraction request
2025-05-10 12:52:29,933 - flask.app - ERROR - Llama Cloud API token not set in environment variables
2025-05-10 12:52:29,947 - flask.app - INFO - Received indexing request
2025-05-10 12:53:38,355 - flask.app - INFO - Received file upload request
2025-05-10 12:53:38,376 - flask.app - INFO - Received lease summary extraction request
2025-05-10 12:53:38,382 - flask.app - ERROR - Llama Cloud API token not set in environment variables
2025-05-10 12:53:38,392 - flask.app - INFO - Received indexing request
2025-05-10 12:55:00,938 - flask.app - ERROR - Failed to index file with Llama Cloud
2025-05-10 12:56:45,336 - flask.app - INFO - Received file upload request
2025-05-10 12:56:45,352 - flask.app - INFO - Received lease summary extraction request
2025-05-10 12:56:45,365 - flask.app - INFO - Received indexing request
2025-05-10 12:57:58,983 - flask.app - ERROR - Failed to index file with Llama Cloud
2025-05-10 12:58:45,956 - flask.app - INFO - Received file upload request
2025-05-10 12:58:45,979 - flask.app - INFO - Received lease summary extraction request
2025-05-10 12:59:06,821 - flask.app - INFO - Received indexing request
2025-05-10 13:00:21,013 - flask.app - ERROR - Failed to index file with Llama Cloud
2025-05-10 13:32:23,574 - flask.app - INFO - Received lease extraction request
2025-05-10 13:32:23,577 - flask.app - ERROR - File not found: /Users/betojuareziii/Applications/atlas-lease-extractor/temp_uploads/2019-2022-Lease-Agreement-TETCO-Signed-condensed.pdf
2025-05-10 13:50:41,572 - flask.app - INFO - Received file upload request
2025-05-10 13:50:41,593 - flask.app - INFO - Received lease summary extraction request
2025-05-10 13:52:56,190 - flask.app - INFO - Received file upload request
2025-05-10 13:52:56,213 - flask.app - INFO - Received lease summary extraction request
2025-05-10 13:53:22,262 - flask.app - INFO - Received indexing request
2025-05-10 13:54:18,239 - flask.app - ERROR - Failed to index file with Llama Cloud
2025-05-10 13:56:54,456 - flask.app - INFO - Received file upload request
2025-05-10 13:56:54,468 - flask.app - INFO - Received lease summary extraction request
2025-05-10 13:57:05,759 - flask.app - INFO - Received indexing request
2025-05-10 14:01:37,594 - flask.app - INFO - Received file upload request
2025-05-10 14:01:37,624 - flask.app - INFO - Received lease summary extraction request
2025-05-10 14:02:01,090 - flask.app - ERROR - Failed to index file with Llama Cloud
2025-05-10 14:02:01,154 - flask.app - INFO - Received indexing request
2025-05-10 14:04:12,147 - flask.app - ERROR - Failed to index file with Llama Cloud
2025-05-10 14:10:53,192 - flask.app - INFO - Received file upload request
2025-05-10 14:10:53,215 - flask.app - INFO - Received lease summary extraction request
2025-05-10 14:11:16,377 - flask.app - INFO - Received indexing request
2025-05-10 14:11:44,962 - flask.app - ERROR - Failed to index file with Llama Cloud
2025-05-10 14:17:33,774 - flask.app - INFO - Received file upload request
2025-05-10 14:17:33,797 - flask.app - INFO - Received lease summary extraction request
2025-05-10 14:18:26,671 - flask.app - INFO - Received indexing request
2025-05-10 14:20:01,645 - flask.app - ERROR - Failed to index file with Llama Cloud
2025-05-13 10:16:47,964 - flask.app - INFO - Received file upload request
2025-05-13 10:16:47,985 - flask.app - INFO - Received lease summary extraction request
2025-05-13 10:19:11,164 - flask.app - INFO - Received file upload request
2025-05-13 10:19:11,188 - flask.app - INFO - Received lease summary extraction request
2025-05-13 10:33:53,637 - flask.app - INFO - Received file upload request
2025-05-13 10:33:53,655 - flask.app - INFO - Received lease summary extraction request
2025-05-13 10:42:31,589 - flask.app - INFO - Received file upload request
2025-05-13 10:42:31,618 - flask.app - INFO - Received lease summary extraction request
2025-05-13 10:49:54,122 - flask.app - INFO - Received file upload request
2025-05-13 10:49:54,171 - flask.app - INFO - Received lease summary extraction request
2025-05-13 14:12:30,234 - flask.app - INFO - Received file upload request
2025-05-13 14:12:30,287 - flask.app - INFO - Received lease summary extraction request
2025-05-13 14:29:15,450 - flask.app - INFO - Received file upload request
2025-05-13 14:29:15,496 - flask.app - INFO - Received lease summary extraction request
2025-05-13 15:27:55,231 - flask.app - INFO - Received file upload request
2025-05-13 15:27:55,261 - flask.app - INFO - Received lease summary extraction request
2025-05-14 10:18:16,028 - flask.app - INFO - Received update extraction agent request
2025-05-14 10:18:16,307 - flask.app - ERROR - Error updating extraction agent: Object of type ExtractConfig is not JSON serializable
2025-05-14 10:19:50,330 - flask.app - INFO - Received update extraction agent request
2025-05-14 10:19:50,336 - flask.app - ERROR - Error updating extraction agent: Object of type ExtractConfig is not JSON serializable
2025-05-14 10:20:20,748 - flask.app - INFO - Received update extraction agent request
2025-05-14 10:20:21,868 - flask.app - ERROR - Error updating extraction agent: 'dict' object has no attribute 'id'
2025-05-14 10:22:39,599 - flask.app - INFO - Received update extraction agent request
2025-05-14 10:22:40,070 - flask.app - ERROR - Error updating extraction agent: 'dict' object has no attribute 'id'
2025-05-14 10:26:24,392 - flask.app - INFO - Received update extraction agent request
2025-05-14 10:26:24,401 - flask.app - ERROR - Error updating extraction agent: name 'AGENT_NAME' is not defined
2025-05-14 10:30:03,122 - flask.app - INFO - Received update extraction agent request
2025-05-14 10:30:03,427 - flask.app - ERROR - Error updating extraction agent: name 'AGENT_ID' is not defined
2025-05-14 10:31:42,131 - flask.app - INFO - Received update extraction agent request
2025-05-14 10:31:43,039 - flask.app - INFO - Successfully updated agent configuration: 3471b248-2281-4741-91c4-8e0f15328782
2025-05-14 10:40:55,622 - flask.app - INFO - Received lease summary extraction request
2025-05-14 10:40:55,630 - flask.app - ERROR - No valid file path provided in request
2025-05-14 10:41:38,401 - flask.app - INFO - Received lease summary extraction request
2025-05-14 10:41:38,402 - flask.app - ERROR - No valid file path provided in request
2025-05-14 10:43:54,413 - flask.app - INFO - Received lease summary extraction request
2025-05-14 10:51:07,245 - flask.app - INFO - Received update extraction agent request
2025-05-14 10:51:07,251 - flask.app - ERROR - Error updating extraction agent: name 'get_extraction_config' is not defined
2025-05-14 10:52:33,403 - flask.app - INFO - Received update extraction agent request
2025-05-14 10:52:33,403 - flask.app - ERROR - Error updating extraction agent: name 'get_extraction_config' is not defined
2025-05-14 10:52:43,772 - flask.app - INFO - Received update extraction agent request
2025-05-14 10:52:43,773 - flask.app - ERROR - Error updating extraction agent: name 'get_extraction_config' is not defined
2025-05-14 10:55:33,985 - flask.app - INFO - Received update extraction agent request
2025-05-14 10:55:33,990 - flask.app - ERROR - Error updating extraction agent: name 'get_extraction_config' is not defined
2025-05-14 10:58:45,862 - flask.app - INFO - Received update extraction agent request
2025-05-14 10:58:45,862 - flask.app - ERROR - Error updating extraction agent: name 'get_extraction_config' is not defined
2025-05-14 11:04:52,230 - flask.app - INFO - Received update extraction agent request
2025-05-14 11:04:53,005 - flask.app - INFO - Successfully updated agent configuration: 3471b248-2281-4741-91c4-8e0f15328782
2025-05-14 11:05:17,929 - flask.app - INFO - Received lease summary extraction request
2025-05-14 11:23:20,182 - flask.app - INFO - Received lease summary extraction request
2025-05-14 11:23:20,183 - flask.app - ERROR - No file part in request
2025-05-14 11:24:24,729 - flask.app - INFO - Received lease summary extraction request
2025-05-14 11:26:50,724 - flask.app - INFO - Received file upload request
2025-05-14 11:26:50,751 - flask.app - INFO - Received lease summary extraction request
2025-05-14 11:26:50,751 - flask.app - ERROR - No file part in request
2025-05-14 11:27:09,225 - flask.app - INFO - Received file upload request
2025-05-14 11:27:09,249 - flask.app - INFO - Received lease summary extraction request
2025-05-14 11:27:09,249 - flask.app - ERROR - No file part in request
2025-05-14 11:27:34,810 - flask.app - INFO - Received file upload request
2025-05-14 11:27:34,822 - flask.app - INFO - Received lease summary extraction request
2025-05-14 11:27:34,823 - flask.app - ERROR - No file part in request
2025-05-14 11:29:50,916 - flask.app - INFO - Received file upload request
2025-05-14 11:29:50,933 - flask.app - INFO - Received lease summary extraction request
2025-05-14 11:29:50,933 - flask.app - ERROR - No file part in request
2025-05-14 11:31:50,882 - flask.app - INFO - Received file upload request
2025-05-14 11:31:50,897 - flask.app - INFO - Received lease summary extraction request
2025-05-14 11:31:50,898 - flask.app - ERROR - No file part in request
2025-05-14 11:32:17,914 - flask.app - INFO - Received file upload request
2025-05-14 11:32:17,959 - flask.app - INFO - Received lease summary extraction request
2025-05-14 12:05:21,651 - flask.app - INFO - Received lease summary extraction request
2025-05-14 12:05:22,022 - flask.app - ERROR - Error during lease summary extraction: ExtractionAgent.extract() got an unexpected keyword argument 'config'
2025-05-14 12:06:33,912 - flask.app - INFO - Received file upload request
2025-05-14 12:06:33,982 - flask.app - INFO - Received lease summary extraction request
2025-05-14 12:06:34,919 - flask.app - ERROR - Error during lease summary extraction: ExtractionAgent.extract() got an unexpected keyword argument 'config'
2025-05-14 12:07:09,739 - flask.app - INFO - Received file upload request
2025-05-14 12:07:09,768 - flask.app - INFO - Received lease summary extraction request
2025-05-14 12:07:10,144 - flask.app - ERROR - Error during lease summary extraction: ExtractionAgent.extract() got an unexpected keyword argument 'config'
2025-05-14 20:54:03,991 - flask.app - INFO - Received update extraction agent request
2025-05-14 20:54:14,734 - flask.app - INFO - Successfully updated agent configuration: 3471b248-2281-4741-91c4-8e0f15328782
2025-05-15 14:42:59,484 - flask.app - INFO - Received file upload request
2025-05-15 14:43:00,046 - flask.app - INFO - Received lease summary extraction request
2025-05-15 14:47:14,385 - flask.app - INFO - Received update extraction agent request
2025-05-15 14:50:48,658 - flask.app - INFO - Received file upload request
2025-05-15 14:50:48,674 - flask.app - INFO - Received lease summary extraction request
2025-05-15 14:53:06,440 - flask.app - INFO - Received file upload request
2025-05-15 14:53:06,676 - flask.app - INFO - Received lease summary extraction request
2025-05-15 14:55:38,895 - flask.app - INFO - Received file upload request
2025-05-15 14:55:38,919 - flask.app - INFO - Received lease summary extraction request
2025-05-15 15:07:27,792 - flask.app - INFO - Received update extraction agent request
2025-05-15 15:12:19,496 - flask.app - INFO - Received file upload request
2025-05-15 15:12:19,649 - flask.app - INFO - Received lease summary extraction request
2025-05-15 15:22:23,928 - flask.app - INFO - Received file upload request
2025-05-15 15:22:23,953 - flask.app - INFO - Received lease summary extraction request
2025-05-15 15:31:19,952 - flask.app - INFO - Received file upload request
2025-05-15 15:31:19,979 - flask.app - INFO - Received lease summary extraction request
2025-05-15 15:36:56,108 - flask.app - INFO - Received update extraction agent request
2025-05-15 15:38:22,539 - flask.app - INFO - Received file upload request
2025-05-15 15:38:22,564 - flask.app - INFO - Received lease summary extraction request
2025-05-15 15:47:37,018 - flask.app - INFO - Received file upload request
2025-05-15 15:47:37,121 - flask.app - INFO - Received lease summary extraction request
2025-05-15 15:47:57,246 - flask.app - ERROR - Error during lease summary extraction: 'ExtractRun' object has no attribute 'get'
2025-05-15 15:50:37,065 - flask.app - INFO - Received lease summary extraction request
2025-05-15 15:50:37,067 - flask.app - ERROR - No file part in request
2025-05-15 15:56:01,235 - flask.app - INFO - Received file upload request
2025-05-15 15:56:01,431 - flask.app - INFO - Received lease summary extraction request
2025-05-15 16:01:08,549 - flask.app - INFO - Received file upload request
2025-05-15 16:01:08,576 - flask.app - INFO - Received lease summary extraction request
2025-05-15 16:48:38,701 - flask.app - INFO - Received file upload request
2025-05-15 16:48:38,728 - flask.app - INFO - Received lease summary extraction request
2025-05-15 19:58:04,700 - flask.app - INFO - Received file upload request
2025-05-15 19:58:11,073 - flask.app - INFO - Received lease summary extraction request
2025-05-17 10:38:41,265 - flask.app - INFO - Received file upload request
2025-05-17 10:38:46,499 - flask.app - INFO - Received lease summary extraction request
2025-05-19 11:18:55,015 - flask.app - INFO - Received lease summary extraction request
2025-05-19 11:28:06,781 - flask.app - INFO - Received file upload request
2025-05-19 11:28:06,821 - flask.app - INFO - Received lease summary extraction request
2025-05-19 12:02:12,467 - flask.app - INFO - Received file upload request
2025-05-19 12:02:12,484 - flask.app - INFO - Received lease summary extraction request
2025-05-19 12:12:42,485 - flask.app - INFO - Received file upload request
2025-05-19 12:12:42,535 - flask.app - INFO - Received lease summary extraction request
2025-05-19 12:42:59,174 - flask.app - INFO - Received file upload request
2025-05-19 12:42:59,218 - flask.app - INFO - Received lease summary extraction request
2025-05-19 14:45:10,161 - flask.app - INFO - Received file upload request
2025-05-19 14:45:10,196 - flask.app - INFO - Received lease summary extraction request
2025-05-19 14:45:40,162 - flask.app - INFO - Received file upload request
2025-05-19 14:45:40,173 - flask.app - INFO - Received lease summary extraction request
2025-05-19 19:08:32,733 - flask.app - INFO - Received file upload request
2025-05-19 19:08:32,756 - flask.app - INFO - Received lease summary extraction request
2025-05-19 19:08:47,081 - flask.app - INFO - Received file upload request
2025-05-19 19:08:50,218 - flask.app - INFO - Received lease summary extraction request
2025-05-19 19:14:25,132 - flask.app - INFO - Received file upload request
2025-05-19 19:14:25,156 - flask.app - INFO - Received lease summary extraction request
2025-05-19 19:26:39,019 - flask.app - INFO - Received file upload request
2025-05-19 19:26:39,048 - flask.app - INFO - Received lease summary extraction request
2025-05-19 19:31:49,451 - flask.app - INFO - Received file upload request
2025-05-19 19:31:49,475 - flask.app - INFO - Received lease summary extraction request
2025-05-19 19:56:08,750 - flask.app - INFO - Received file upload request
2025-05-19 19:56:08,780 - flask.app - INFO - Received lease summary extraction request
2025-05-19 21:00:01,152 - flask.app - INFO - Received update extraction agent request
2025-05-19 21:00:01,602 - flask.app - ERROR - Error updating lease summary agent schema: Failed to update agent: 422 {"detail":[{"type":"missing","loc":["body","config"],"msg":"Field required","input":{"data_schema":{"$defs":{"Duration":{"properties":{"years":{"default":0,"title":"Years","type":"integer"},"months":{"default":0,"title":"Months","type":"integer"},"days":{"default":0,"title":"Days","type":"integer"}},"title":"Duration","type":"object"},"ExpenseRecoveryType":{"enum":["Net","Stop Amount","Gross"],"title":"ExpenseRecoveryType","type":"string"},"FinancialTerms":{"properties":{"base_rent":{"description":"The base rent amount (expressed in USD paid monthly) when the lease commences","example":3500.0,"title":"Base Rent","type":"number"},"security_deposit":{"anyOf":[{"type":"number"},{"type":"null"}],"default":null,"description":"Amount of security deposit required from tenant","example":7000.0,"title":"Security Deposit"},"rent_escalations":{"anyOf":[{"$ref":"#/$defs/RentEscalationSchema"},{"type":"null"}],"default":null,"description":"Structured schedule of rent escalations or increases during the lease term. If no escalations are mentioned, set to None."},"expense_recovery_type":{"$ref":"#/$defs/ExpenseRecoveryType","description":"The method by which operating expenses are recovered from the tenant. Must be one of: 'Net', 'Stop Amount', or 'Gross'."},"renewal_options":{"anyOf":[{"type":"string"},{"type":"null"}],"default":null,"description":"Summary of any renewal options available to the tenant","example":"2 x 5-year options","title":"Renewal Options"},"free_rent_months":{"anyOf":[{"type":"integer"},{"type":"null"}],"default":null,"description":"Number of months of free rent provided to the tenant at the beginning of the lease term, if any. If not specified in the lease, set to None.","example":3,"title":"Free Rent Months"}},"required":["base_rent","expense_recovery_type"],"title":"FinancialTerms","type":"object"},"LeaseDates":{"properties":{"lease_commencement_date":{"description":"Date when the rental period commences (format: YYYY-MM-DD)","example":"2024-01-01","format":"date","title":"Lease Commencement Date","type":"string"},"lease_expiration_date":{"description":"Date when the lease agreement terminates (format: YYYY-MM-DD)","example":"2029-12-31","format":"date","title":"Lease Expiration Date","type":"string"},"lease_term":{"description":"The duration of the lease in years","example":"5 years","title":"Lease Term","type":"string"}},"required":["lease_commencement_date","lease_expiration_date","lease_term"],"title":"LeaseDates","type":"object"},"PropertyInfo":{"properties":{"property_address":{"description":"Complete street address of the leased property including street number, city, state and zip code","example":"123 Main St, Springfield, IL 62704","title":"Property Address","type":"string"},"landlord_name":{"description":"Full legal name of the landlord or building owner who is leasing the property. This party is usually separate from the property management company.","example":"HoldCo, LLC","title":"Landlord Name","type":"string"}},"required":["property_address","landlord_name"],"title":"PropertyInfo","type":"object"},"RentEscalationSchema":{"properties":{"rent_schedule":{"items":{"$ref":"#/$defs/RentScheduleEntry"},"title":"Rent Schedule","type":"array"}},"required":["rent_schedule"],"title":"RentEscalationSchema","type":"object"},"RentScheduleEntry":{"properties":{"start_date":{"format":"date","title":"Start Date","type":"string"},"duration":{"$ref":"#/$defs/Duration"},"rent_type":{"description":"e.g. Base, Minimum, Annual Fixed, Initial","title":"Rent Type","type":"string"},"units":{"description":"e.g. $/SF/Year, $ per rentable SF","title":"Units","type":"string"},"amount":{"title":"Amount","type":"number"},"review_type":{"anyOf":[{"type":"string"},{"type":"null"}],"default":null,"description":"e.g. CPI, Market Review, etc.","title":"Review Type"},"uplift":{"anyOf":[{"$ref":"#/$defs/Uplift"},{"type":"null"}],"default":null},"adjust_expense_stops":{"anyOf":[{"type":"boolean"},{"type":"null"}],"default":false,"title":"Adjust Expense Stops"},"stop_year":{"anyOf":[{"type":"integer"},{"type":"null"}],"default":null,"title":"Stop Year"}},"required":["start_date","duration","rent_type","units","amount"],"title":"RentScheduleEntry","type":"object"},"TenantInfo":{"properties":{"tenant":{"description":"Full legal name of the tenant/lessee who is renting the property","example":"Acme Corp.","title":"Tenant","type":"string"},"suite_number":{"description":"Suite or unit number of the property being leased within a larger building. Print 'N/A' if the lease appears to rent the entire building.","example":"Suite 200","title":"Suite Number","type":"string"},"leased_sqft":{"anyOf":[{"type":"number"},{"type":"null"}],"default":null,"description":"Actual square footage being leased by the tenant","example":2000.0,"title":"Leased Sqft"}},"required":["tenant","suite_number"],"title":"TenantInfo","type":"object"},"Uplift":{"properties":{"min":{"anyOf":[{"type":"number"},{"type":"null"}],"default":null,"title":"Min"},"amount":{"anyOf":[{"type":"number"},{"type":"null"}],"default":null,"title":"Amount"},"max":{"anyOf":[{"type":"number"},{"type":"null"}],"default":null,"title":"Max"}},"title":"Uplift","type":"object"}},"properties":{"property_info":{"$ref":"#/$defs/PropertyInfo"},"tenant_info":{"$ref":"#/$defs/TenantInfo"},"lease_dates":{"$ref":"#/$defs/LeaseDates"},"financial_terms":{"$ref":"#/$defs/FinancialTerms"}},"required":["property_info","tenant_info","lease_dates","financial_terms"],"title":"LeaseSummary","type":"object"}}}]}
2025-05-19 21:02:39,306 - flask.app - INFO - Received update extraction agent request
2025-05-19 21:02:39,765 - flask.app - ERROR - Error updating lease summary agent schema: Failed to update agent: 422 {"detail":[{"type":"missing","loc":["body","config"],"msg":"Field required","input":{"data_schema":{"$defs":{"Duration":{"properties":{"years":{"default":0,"title":"Years","type":"integer"},"months":{"default":0,"title":"Months","type":"integer"},"days":{"default":0,"title":"Days","type":"integer"}},"title":"Duration","type":"object"},"ExpenseRecoveryType":{"enum":["Net","Stop Amount","Gross"],"title":"ExpenseRecoveryType","type":"string"},"FinancialTerms":{"properties":{"base_rent":{"description":"The base rent amount (expressed in USD paid monthly) when the lease commences","example":3500.0,"title":"Base Rent","type":"number"},"security_deposit":{"anyOf":[{"type":"number"},{"type":"null"}],"default":null,"description":"Amount of security deposit required from tenant","example":7000.0,"title":"Security Deposit"},"rent_escalations":{"anyOf":[{"$ref":"#/$defs/RentEscalationSchema"},{"type":"null"}],"default":null,"description":"Structured schedule of rent escalations or increases during the lease term. If no escalations are mentioned, set to None."},"expense_recovery_type":{"$ref":"#/$defs/ExpenseRecoveryType","description":"The method by which operating expenses are recovered from the tenant. Must be one of: 'Net', 'Stop Amount', or 'Gross'."},"renewal_options":{"anyOf":[{"type":"string"},{"type":"null"}],"default":null,"description":"Summary of any renewal options available to the tenant","example":"2 x 5-year options","title":"Renewal Options"},"free_rent_months":{"anyOf":[{"type":"integer"},{"type":"null"}],"default":null,"description":"Number of months of free rent provided to the tenant at the beginning of the lease term, if any. If not specified in the lease, set to None.","example":3,"title":"Free Rent Months"}},"required":["base_rent","expense_recovery_type"],"title":"FinancialTerms","type":"object"},"LeaseDates":{"properties":{"lease_commencement_date":{"description":"Date when the rental period commences (format: YYYY-MM-DD)","example":"2024-01-01","format":"date","title":"Lease Commencement Date","type":"string"},"lease_expiration_date":{"description":"Date when the lease agreement terminates (format: YYYY-MM-DD)","example":"2029-12-31","format":"date","title":"Lease Expiration Date","type":"string"},"lease_term":{"description":"The duration of the lease in years","example":"5 years","title":"Lease Term","type":"string"}},"required":["lease_commencement_date","lease_expiration_date","lease_term"],"title":"LeaseDates","type":"object"},"PropertyInfo":{"properties":{"property_address":{"description":"Complete street address of the leased property including street number, city, state and zip code","example":"123 Main St, Springfield, IL 62704","title":"Property Address","type":"string"},"landlord_name":{"description":"Full legal name of the landlord or building owner who is leasing the property. This party is usually separate from the property management company.","example":"HoldCo, LLC","title":"Landlord Name","type":"string"}},"required":["property_address","landlord_name"],"title":"PropertyInfo","type":"object"},"RentEscalationSchema":{"properties":{"rent_schedule":{"items":{"$ref":"#/$defs/RentScheduleEntry"},"title":"Rent Schedule","type":"array"}},"required":["rent_schedule"],"title":"RentEscalationSchema","type":"object"},"RentScheduleEntry":{"properties":{"start_date":{"format":"date","title":"Start Date","type":"string"},"duration":{"$ref":"#/$defs/Duration"},"rent_type":{"description":"e.g. Base, Minimum, Annual Fixed, Initial","title":"Rent Type","type":"string"},"units":{"description":"e.g. $/SF/Year, $ per rentable SF","title":"Units","type":"string"},"amount":{"title":"Amount","type":"number"},"review_type":{"anyOf":[{"type":"string"},{"type":"null"}],"default":null,"description":"e.g. CPI, Market Review, etc.","title":"Review Type"},"uplift":{"anyOf":[{"$ref":"#/$defs/Uplift"},{"type":"null"}],"default":null},"adjust_expense_stops":{"anyOf":[{"type":"boolean"},{"type":"null"}],"default":false,"title":"Adjust Expense Stops"},"stop_year":{"anyOf":[{"type":"integer"},{"type":"null"}],"default":null,"title":"Stop Year"}},"required":["start_date","duration","rent_type","units","amount"],"title":"RentScheduleEntry","type":"object"},"TenantInfo":{"properties":{"tenant":{"description":"Full legal name of the tenant/lessee who is renting the property","example":"Acme Corp.","title":"Tenant","type":"string"},"suite_number":{"description":"Suite or unit number of the property being leased within a larger building. Print 'N/A' if the lease appears to rent the entire building.","example":"Suite 200","title":"Suite Number","type":"string"},"leased_sqft":{"anyOf":[{"type":"number"},{"type":"null"}],"default":null,"description":"Actual square footage being leased by the tenant","example":2000.0,"title":"Leased Sqft"}},"required":["tenant","suite_number"],"title":"TenantInfo","type":"object"},"Uplift":{"properties":{"min":{"anyOf":[{"type":"number"},{"type":"null"}],"default":null,"title":"Min"},"amount":{"anyOf":[{"type":"number"},{"type":"null"}],"default":null,"title":"Amount"},"max":{"anyOf":[{"type":"number"},{"type":"null"}],"default":null,"title":"Max"}},"title":"Uplift","type":"object"}},"properties":{"property_info":{"$ref":"#/$defs/PropertyInfo"},"tenant_info":{"$ref":"#/$defs/TenantInfo"},"lease_dates":{"$ref":"#/$defs/LeaseDates"},"financial_terms":{"$ref":"#/$defs/FinancialTerms"}},"required":["property_info","tenant_info","lease_dates","financial_terms"],"title":"LeaseSummary","type":"object"}}}]}
2025-05-19 21:02:52,718 - flask.app - INFO - Received update extraction agent request
2025-05-19 21:02:53,134 - flask.app - ERROR - Error updating lease summary agent schema: Failed to update agent: 422 {"detail":[{"type":"missing","loc":["body","data_schema"],"msg":"Field required","input":{"config":{"data_schema":{"$defs":{"Duration":{"properties":{"years":{"default":0,"title":"Years","type":"integer"},"months":{"default":0,"title":"Months","type":"integer"},"days":{"default":0,"title":"Days","type":"integer"}},"title":"Duration","type":"object"},"ExpenseRecoveryType":{"enum":["Net","Stop Amount","Gross"],"title":"ExpenseRecoveryType","type":"string"},"FinancialTerms":{"properties":{"base_rent":{"description":"The base rent amount (expressed in USD paid monthly) when the lease commences","example":3500.0,"title":"Base Rent","type":"number"},"security_deposit":{"anyOf":[{"type":"number"},{"type":"null"}],"default":null,"description":"Amount of security deposit required from tenant","example":7000.0,"title":"Security Deposit"},"rent_escalations":{"anyOf":[{"$ref":"#/$defs/RentEscalationSchema"},{"type":"null"}],"default":null,"description":"Structured schedule of rent escalations or increases during the lease term. If no escalations are mentioned, set to None."},"expense_recovery_type":{"$ref":"#/$defs/ExpenseRecoveryType","description":"The method by which operating expenses are recovered from the tenant. Must be one of: 'Net', 'Stop Amount', or 'Gross'."},"renewal_options":{"anyOf":[{"type":"string"},{"type":"null"}],"default":null,"description":"Summary of any renewal options available to the tenant","example":"2 x 5-year options","title":"Renewal Options"},"free_rent_months":{"anyOf":[{"type":"integer"},{"type":"null"}],"default":null,"description":"Number of months of free rent provided to the tenant at the beginning of the lease term, if any. If not specified in the lease, set to None.","example":3,"title":"Free Rent Months"}},"required":["base_rent","expense_recovery_type"],"title":"FinancialTerms","type":"object"},"LeaseDates":{"properties":{"lease_commencement_date":{"description":"Date when the rental period commences (format: YYYY-MM-DD)","example":"2024-01-01","format":"date","title":"Lease Commencement Date","type":"string"},"lease_expiration_date":{"description":"Date when the lease agreement terminates (format: YYYY-MM-DD)","example":"2029-12-31","format":"date","title":"Lease Expiration Date","type":"string"},"lease_term":{"description":"The duration of the lease in years","example":"5 years","title":"Lease Term","type":"string"}},"required":["lease_commencement_date","lease_expiration_date","lease_term"],"title":"LeaseDates","type":"object"},"PropertyInfo":{"properties":{"property_address":{"description":"Complete street address of the leased property including street number, city, state and zip code","example":"123 Main St, Springfield, IL 62704","title":"Property Address","type":"string"},"landlord_name":{"description":"Full legal name of the landlord or building owner who is leasing the property. This party is usually separate from the property management company.","example":"HoldCo, LLC","title":"Landlord Name","type":"string"}},"required":["property_address","landlord_name"],"title":"PropertyInfo","type":"object"},"RentEscalationSchema":{"properties":{"rent_schedule":{"items":{"$ref":"#/$defs/RentScheduleEntry"},"title":"Rent Schedule","type":"array"}},"required":["rent_schedule"],"title":"RentEscalationSchema","type":"object"},"RentScheduleEntry":{"properties":{"start_date":{"format":"date","title":"Start Date","type":"string"},"duration":{"$ref":"#/$defs/Duration"},"rent_type":{"description":"e.g. Base, Minimum, Annual Fixed, Initial","title":"Rent Type","type":"string"},"units":{"description":"e.g. $/SF/Year, $ per rentable SF","title":"Units","type":"string"},"amount":{"title":"Amount","type":"number"},"review_type":{"anyOf":[{"type":"string"},{"type":"null"}],"default":null,"description":"e.g. CPI, Market Review, etc.","title":"Review Type"},"uplift":{"anyOf":[{"$ref":"#/$defs/Uplift"},{"type":"null"}],"default":null},"adjust_expense_stops":{"anyOf":[{"type":"boolean"},{"type":"null"}],"default":false,"title":"Adjust Expense Stops"},"stop_year":{"anyOf":[{"type":"integer"},{"type":"null"}],"default":null,"title":"Stop Year"}},"required":["start_date","duration","rent_type","units","amount"],"title":"RentScheduleEntry","type":"object"},"TenantInfo":{"properties":{"tenant":{"description":"Full legal name of the tenant/lessee who is renting the property","example":"Acme Corp.","title":"Tenant","type":"string"},"suite_number":{"description":"Suite or unit number of the property being leased within a larger building. Print 'N/A' if the lease appears to rent the entire building.","example":"Suite 200","title":"Suite Number","type":"string"},"leased_sqft":{"anyOf":[{"type":"number"},{"type":"null"}],"default":null,"description":"Actual square footage being leased by the tenant","example":2000.0,"title":"Leased Sqft"}},"required":["tenant","suite_number"],"title":"TenantInfo","type":"object"},"Uplift":{"properties":{"min":{"anyOf":[{"type":"number"},{"type":"null"}],"default":null,"title":"Min"},"amount":{"anyOf":[{"type":"number"},{"type":"null"}],"default":null,"title":"Amount"},"max":{"anyOf":[{"type":"number"},{"type":"null"}],"default":null,"title":"Max"}},"title":"Uplift","type":"object"}},"properties":{"property_info":{"$ref":"#/$defs/PropertyInfo"},"tenant_info":{"$ref":"#/$defs/TenantInfo"},"lease_dates":{"$ref":"#/$defs/LeaseDates"},"financial_terms":{"$ref":"#/$defs/FinancialTerms"}},"required":["property_info","tenant_info","lease_dates","financial_terms"],"title":"LeaseSummary","type":"object"}}}}]}
2025-05-19 21:06:24,782 - flask.app - INFO - Received update extraction agent request
2025-05-19 21:06:25,185 - flask.app - ERROR - Error updating lease summary agent schema: Failed to update agent: 422 {"detail":[{"type":"missing","loc":["body","config"],"msg":"Field required","input":{"data_schema":{"$defs":{"Duration":{"properties":{"years":{"default":0,"title":"Years","type":"integer"},"months":{"default":0,"title":"Months","type":"integer"},"days":{"default":0,"title":"Days","type":"integer"}},"title":"Duration","type":"object"},"ExpenseRecoveryType":{"enum":["Net","Stop Amount","Gross"],"title":"ExpenseRecoveryType","type":"string"},"FinancialTerms":{"properties":{"base_rent":{"description":"The base rent amount (expressed in USD paid monthly) when the lease commences","example":3500.0,"title":"Base Rent","type":"number"},"security_deposit":{"anyOf":[{"type":"number"},{"type":"null"}],"default":null,"description":"Amount of security deposit required from tenant","example":7000.0,"title":"Security Deposit"},"rent_escalations":{"anyOf":[{"$ref":"#/$defs/RentEscalationSchema"},{"type":"null"}],"default":null,"description":"Structured schedule of rent escalations or increases during the lease term. If no escalations are mentioned, set to None."},"expense_recovery_type":{"$ref":"#/$defs/ExpenseRecoveryType","description":"The method by which operating expenses are recovered from the tenant. Must be one of: 'Net', 'Stop Amount', or 'Gross'."},"renewal_options":{"anyOf":[{"type":"string"},{"type":"null"}],"default":null,"description":"Summary of any renewal options available to the tenant","example":"2 x 5-year options","title":"Renewal Options"},"free_rent_months":{"anyOf":[{"type":"integer"},{"type":"null"}],"default":null,"description":"Number of months of free rent provided to the tenant at the beginning of the lease term, if any. If not specified in the lease, set to None.","example":3,"title":"Free Rent Months"}},"required":["base_rent","expense_recovery_type"],"title":"FinancialTerms","type":"object"},"LeaseDates":{"properties":{"lease_commencement_date":{"description":"Date when the rental period commences (format: YYYY-MM-DD)","example":"2024-01-01","format":"date","title":"Lease Commencement Date","type":"string"},"lease_expiration_date":{"description":"Date when the lease agreement terminates (format: YYYY-MM-DD)","example":"2029-12-31","format":"date","title":"Lease Expiration Date","type":"string"},"lease_term":{"description":"The duration of the lease in years","example":"5 years","title":"Lease Term","type":"string"}},"required":["lease_commencement_date","lease_expiration_date","lease_term"],"title":"LeaseDates","type":"object"},"PropertyInfo":{"properties":{"property_address":{"description":"Complete street address of the leased property including street number, city, state and zip code","example":"123 Main St, Springfield, IL 62704","title":"Property Address","type":"string"},"landlord_name":{"description":"Full legal name of the landlord or building owner who is leasing the property. This party is usually separate from the property management company.","example":"HoldCo, LLC","title":"Landlord Name","type":"string"}},"required":["property_address","landlord_name"],"title":"PropertyInfo","type":"object"},"RentEscalationSchema":{"properties":{"rent_schedule":{"items":{"$ref":"#/$defs/RentScheduleEntry"},"title":"Rent Schedule","type":"array"}},"required":["rent_schedule"],"title":"RentEscalationSchema","type":"object"},"RentScheduleEntry":{"properties":{"start_date":{"format":"date","title":"Start Date","type":"string"},"duration":{"$ref":"#/$defs/Duration"},"rent_type":{"description":"e.g. Base, Minimum, Annual Fixed, Initial","title":"Rent Type","type":"string"},"units":{"description":"e.g. $/SF/Year, $ per rentable SF","title":"Units","type":"string"},"amount":{"title":"Amount","type":"number"},"review_type":{"anyOf":[{"type":"string"},{"type":"null"}],"default":null,"description":"e.g. CPI, Market Review, etc.","title":"Review Type"},"uplift":{"anyOf":[{"$ref":"#/$defs/Uplift"},{"type":"null"}],"default":null},"adjust_expense_stops":{"anyOf":[{"type":"boolean"},{"type":"null"}],"default":false,"title":"Adjust Expense Stops"},"stop_year":{"anyOf":[{"type":"integer"},{"type":"null"}],"default":null,"title":"Stop Year"}},"required":["start_date","duration","rent_type","units","amount"],"title":"RentScheduleEntry","type":"object"},"TenantInfo":{"properties":{"tenant":{"description":"Full legal name of the tenant/lessee who is renting the property","example":"Acme Corp.","title":"Tenant","type":"string"},"suite_number":{"description":"Suite or unit number of the property being leased within a larger building. Print 'N/A' if the lease appears to rent the entire building.","example":"Suite 200","title":"Suite Number","type":"string"},"leased_sqft":{"anyOf":[{"type":"number"},{"type":"null"}],"default":null,"description":"Actual square footage being leased by the tenant","example":2000.0,"title":"Leased Sqft"}},"required":["tenant","suite_number"],"title":"TenantInfo","type":"object"},"Uplift":{"properties":{"min":{"anyOf":[{"type":"number"},{"type":"null"}],"default":null,"title":"Min"},"amount":{"anyOf":[{"type":"number"},{"type":"null"}],"default":null,"title":"Amount"},"max":{"anyOf":[{"type":"number"},{"type":"null"}],"default":null,"title":"Max"}},"title":"Uplift","type":"object"}},"properties":{"property_info":{"$ref":"#/$defs/PropertyInfo"},"tenant_info":{"$ref":"#/$defs/TenantInfo"},"lease_dates":{"$ref":"#/$defs/LeaseDates"},"financial_terms":{"$ref":"#/$defs/FinancialTerms"}},"required":["property_info","tenant_info","lease_dates","financial_terms"],"title":"LeaseSummary","type":"object"}}}]}
2025-05-19 21:07:19,857 - flask.app - INFO - Received update extraction agent request
2025-05-19 21:07:20,274 - flask.app - ERROR - Error updating lease summary agent schema: Failed to update agent: 422 {"detail":[{"type":"missing","loc":["body","config"],"msg":"Field required","input":{"data_schema":{"$defs":{"Duration":{"properties":{"years":{"default":0,"title":"Years","type":"integer"},"months":{"default":0,"title":"Months","type":"integer"},"days":{"default":0,"title":"Days","type":"integer"}},"title":"Duration","type":"object"},"ExpenseRecoveryType":{"enum":["Net","Stop Amount","Gross"],"title":"ExpenseRecoveryType","type":"string"},"FinancialTerms":{"properties":{"base_rent":{"description":"The base rent amount (expressed in USD paid monthly) when the lease commences","example":3500.0,"title":"Base Rent","type":"number"},"security_deposit":{"anyOf":[{"type":"number"},{"type":"null"}],"default":null,"description":"Amount of security deposit required from tenant","example":7000.0,"title":"Security Deposit"},"rent_escalations":{"anyOf":[{"$ref":"#/$defs/RentEscalationSchema"},{"type":"null"}],"default":null,"description":"Structured schedule of rent escalations or increases during the lease term. If no escalations are mentioned, set to None."},"expense_recovery_type":{"$ref":"#/$defs/ExpenseRecoveryType","description":"The method by which operating expenses are recovered from the tenant. Must be one of: 'Net', 'Stop Amount', or 'Gross'."},"renewal_options":{"anyOf":[{"type":"string"},{"type":"null"}],"default":null,"description":"Summary of any renewal options available to the tenant","example":"2 x 5-year options","title":"Renewal Options"},"free_rent_months":{"anyOf":[{"type":"integer"},{"type":"null"}],"default":null,"description":"Number of months of free rent provided to the tenant at the beginning of the lease term, if any. If not specified in the lease, set to None.","example":3,"title":"Free Rent Months"}},"required":["base_rent","expense_recovery_type"],"title":"FinancialTerms","type":"object"},"LeaseDates":{"properties":{"lease_commencement_date":{"description":"Date when the rental period commences (format: YYYY-MM-DD)","example":"2024-01-01","format":"date","title":"Lease Commencement Date","type":"string"},"lease_expiration_date":{"description":"Date when the lease agreement terminates (format: YYYY-MM-DD)","example":"2029-12-31","format":"date","title":"Lease Expiration Date","type":"string"},"lease_term":{"description":"The duration of the lease in years","example":"5 years","title":"Lease Term","type":"string"}},"required":["lease_commencement_date","lease_expiration_date","lease_term"],"title":"LeaseDates","type":"object"},"PropertyInfo":{"properties":{"property_address":{"description":"Complete street address of the leased property including street number, city, state and zip code","example":"123 Main St, Springfield, IL 62704","title":"Property Address","type":"string"},"landlord_name":{"description":"Full legal name of the landlord or building owner who is leasing the property. This party is usually separate from the property management company.","example":"HoldCo, LLC","title":"Landlord Name","type":"string"}},"required":["property_address","landlord_name"],"title":"PropertyInfo","type":"object"},"RentEscalationSchema":{"properties":{"rent_schedule":{"items":{"$ref":"#/$defs/RentScheduleEntry"},"title":"Rent Schedule","type":"array"}},"required":["rent_schedule"],"title":"RentEscalationSchema","type":"object"},"RentScheduleEntry":{"properties":{"start_date":{"format":"date","title":"Start Date","type":"string"},"duration":{"$ref":"#/$defs/Duration"},"rent_type":{"description":"e.g. Base, Minimum, Annual Fixed, Initial","title":"Rent Type","type":"string"},"units":{"description":"e.g. $/SF/Year, $ per rentable SF","title":"Units","type":"string"},"amount":{"title":"Amount","type":"number"},"review_type":{"anyOf":[{"type":"string"},{"type":"null"}],"default":null,"description":"e.g. CPI, Market Review, etc.","title":"Review Type"},"uplift":{"anyOf":[{"$ref":"#/$defs/Uplift"},{"type":"null"}],"default":null},"adjust_expense_stops":{"anyOf":[{"type":"boolean"},{"type":"null"}],"default":false,"title":"Adjust Expense Stops"},"stop_year":{"anyOf":[{"type":"integer"},{"type":"null"}],"default":null,"title":"Stop Year"}},"required":["start_date","duration","rent_type","units","amount"],"title":"RentScheduleEntry","type":"object"},"TenantInfo":{"properties":{"tenant":{"description":"Full legal name of the tenant/lessee who is renting the property","example":"Acme Corp.","title":"Tenant","type":"string"},"suite_number":{"description":"Suite or unit number of the property being leased within a larger building. Print 'N/A' if the lease appears to rent the entire building.","example":"Suite 200","title":"Suite Number","type":"string"},"leased_sqft":{"anyOf":[{"type":"number"},{"type":"null"}],"default":null,"description":"Actual square footage being leased by the tenant","example":2000.0,"title":"Leased Sqft"}},"required":["tenant","suite_number"],"title":"TenantInfo","type":"object"},"Uplift":{"properties":{"min":{"anyOf":[{"type":"number"},{"type":"null"}],"default":null,"title":"Min"},"amount":{"anyOf":[{"type":"number"},{"type":"null"}],"default":null,"title":"Amount"},"max":{"anyOf":[{"type":"number"},{"type":"null"}],"default":null,"title":"Max"}},"title":"Uplift","type":"object"}},"properties":{"property_info":{"$ref":"#/$defs/PropertyInfo"},"tenant_info":{"$ref":"#/$defs/TenantInfo"},"lease_dates":{"$ref":"#/$defs/LeaseDates"},"financial_terms":{"$ref":"#/$defs/FinancialTerms"}},"required":["property_info","tenant_info","lease_dates","financial_terms"],"title":"LeaseSummary","type":"object"}}}]}
2025-05-19 21:07:38,827 - flask.app - INFO - Received update extraction agent request
2025-05-19 21:24:49,040 - flask.app - INFO - Received update extraction agent request
2025-05-19 21:24:49,041 - flask.app - ERROR - Error updating lease summary agent schema: LlamaCloudManager.get_agent() missing 1 required positional argument: 'name'
2025-05-19 21:27:16,008 - flask.app - INFO - Received update extraction agent request
2025-05-19 21:27:16,400 - flask.app - ERROR - Error updating lease summary agent schema: Failed to update agent: 422 {"detail":[{"type":"missing","loc":["body","config"],"msg":"Field required","input":{"data_schema":{"$defs":{"Duration":{"properties":{"years":{"default":0,"title":"Years","type":"integer"},"months":{"default":0,"title":"Months","type":"integer"},"days":{"default":0,"title":"Days","type":"integer"}},"title":"Duration","type":"object"},"ExpenseRecoveryType":{"enum":["Net","Stop Amount","Gross"],"title":"ExpenseRecoveryType","type":"string"},"FinancialTerms":{"properties":{"base_rent":{"description":"The base rent amount (expressed in USD paid monthly) when the lease commences","example":3500.0,"title":"Base Rent","type":"number"},"security_deposit":{"anyOf":[{"type":"number"},{"type":"null"}],"default":null,"description":"Amount of security deposit required from tenant","example":7000.0,"title":"Security Deposit"},"rent_escalations":{"anyOf":[{"$ref":"#/$defs/RentEscalationSchema"},{"type":"null"}],"default":null,"description":"Structured schedule of rent escalations or increases during the lease term. If no escalations are mentioned, set to None."},"expense_recovery_type":{"$ref":"#/$defs/ExpenseRecoveryType","description":"The method by which operating expenses are recovered from the tenant. Must be one of: 'Net', 'Stop Amount', or 'Gross'."},"renewal_options":{"anyOf":[{"type":"string"},{"type":"null"}],"default":null,"description":"Summary of any renewal options available to the tenant","example":"2 x 5-year options","title":"Renewal Options"},"free_rent_months":{"anyOf":[{"type":"integer"},{"type":"null"}],"default":null,"description":"Number of months of free rent provided to the tenant at the beginning of the lease term, if any. If not specified in the lease, set to None.","example":3,"title":"Free Rent Months"}},"required":["base_rent","expense_recovery_type"],"title":"FinancialTerms","type":"object"},"LeaseDates":{"properties":{"lease_commencement_date":{"description":"Date when the rental period commences (format: YYYY-MM-DD)","example":"2024-01-01","format":"date","title":"Lease Commencement Date","type":"string"},"lease_expiration_date":{"description":"Date when the lease agreement terminates (format: YYYY-MM-DD)","example":"2029-12-31","format":"date","title":"Lease Expiration Date","type":"string"},"lease_term":{"description":"The duration of the lease in years","example":"5 years","title":"Lease Term","type":"string"}},"required":["lease_commencement_date","lease_expiration_date","lease_term"],"title":"LeaseDates","type":"object"},"PropertyInfo":{"properties":{"property_address":{"description":"Complete street address of the leased property including street number, city, state and zip code","example":"123 Main St, Springfield, IL 62704","title":"Property Address","type":"string"},"landlord_name":{"description":"Full legal name of the landlord or building owner who is leasing the property. This party is usually separate from the property management company.","example":"HoldCo, LLC","title":"Landlord Name","type":"string"}},"required":["property_address","landlord_name"],"title":"PropertyInfo","type":"object"},"RentEscalationSchema":{"properties":{"rent_schedule":{"items":{"$ref":"#/$defs/RentScheduleEntry"},"title":"Rent Schedule","type":"array"}},"required":["rent_schedule"],"title":"RentEscalationSchema","type":"object"},"RentScheduleEntry":{"properties":{"start_date":{"format":"date","title":"Start Date","type":"string"},"duration":{"$ref":"#/$defs/Duration"},"rent_type":{"description":"e.g. Base, Minimum, Annual Fixed, Initial","title":"Rent Type","type":"string"},"units":{"description":"e.g. $/SF/Year, $ per rentable SF","title":"Units","type":"string"},"amount":{"title":"Amount","type":"number"},"review_type":{"anyOf":[{"type":"string"},{"type":"null"}],"default":null,"description":"e.g. CPI, Market Review, etc.","title":"Review Type"},"uplift":{"anyOf":[{"$ref":"#/$defs/Uplift"},{"type":"null"}],"default":null},"adjust_expense_stops":{"anyOf":[{"type":"boolean"},{"type":"null"}],"default":false,"title":"Adjust Expense Stops"},"stop_year":{"anyOf":[{"type":"integer"},{"type":"null"}],"default":null,"title":"Stop Year"}},"required":["start_date","duration","rent_type","units","amount"],"title":"RentScheduleEntry","type":"object"},"TenantInfo":{"properties":{"tenant":{"description":"Full legal name of the tenant/lessee who is renting the property","example":"Acme Corp.","title":"Tenant","type":"string"},"suite_number":{"description":"Suite or unit number of the property being leased within a larger building. Print 'N/A' if the lease appears to rent the entire building.","example":"Suite 200","title":"Suite Number","type":"string"},"leased_sqft":{"anyOf":[{"type":"number"},{"type":"null"}],"default":null,"description":"Actual square footage being leased by the tenant","example":2000.0,"title":"Leased Sqft"}},"required":["tenant","suite_number"],"title":"TenantInfo","type":"object"},"Uplift":{"properties":{"min":{"anyOf":[{"type":"number"},{"type":"null"}],"default":null,"title":"Min"},"amount":{"anyOf":[{"type":"number"},{"type":"null"}],"default":null,"title":"Amount"},"max":{"anyOf":[{"type":"number"},{"type":"null"}],"default":null,"title":"Max"}},"title":"Uplift","type":"object"}},"properties":{"property_info":{"$ref":"#/$defs/PropertyInfo"},"tenant_info":{"$ref":"#/$defs/TenantInfo"},"lease_dates":{"$ref":"#/$defs/LeaseDates"},"financial_terms":{"$ref":"#/$defs/FinancialTerms"}},"required":["property_info","tenant_info","lease_dates","financial_terms"],"title":"LeaseSummary","type":"object"}}}]}
2025-05-19 21:29:34,117 - flask.app - INFO - Received update extraction agent request
2025-05-19 21:31:21,389 - flask.app - INFO - Received file upload request
2025-05-19 21:31:21,406 - flask.app - INFO - Received lease summary extraction request
2025-05-19 21:31:21,417 - flask.app - ERROR - Error during lease summary extraction: name 'LeaseSummaryExtractor' is not defined
2025-05-19 22:13:48,039 - flask.app - INFO - Received file upload request
2025-05-19 22:13:48,073 - flask.app - INFO - Received lease summary extraction request
2025-05-20 09:27:08,844 - flask.app - INFO - Received file upload request
2025-05-20 09:27:08,860 - flask.app - INFO - Received lease summary extraction request
2025-05-20 10:08:15,499 - flask.app - INFO - Received file upload request
2025-05-20 10:08:15,526 - flask.app - INFO - Received lease summary extraction request
2025-05-20 10:10:44,594 - flask.app - INFO - Received file upload request
2025-05-20 10:10:44,617 - flask.app - INFO - Received lease summary extraction request
2025-05-20 10:13:02,989 - flask.app - INFO - Received file upload request
2025-05-20 10:13:03,006 - flask.app - INFO - Received lease summary extraction request
2025-05-20 10:17:41,663 - flask.app - INFO - Received file upload request
2025-05-20 10:17:41,689 - flask.app - INFO - Received lease summary extraction request
2025-05-20 11:08:23,555 - flask.app - INFO - Received file upload request
2025-05-20 11:08:23,582 - flask.app - INFO - Received lease summary extraction request
2025-05-20 11:28:59,202 - flask.app - INFO - Received file upload request
2025-05-20 11:28:59,240 - flask.app - INFO - Received lease summary extraction request
2025-05-20 11:42:34,528 - flask.app - INFO - Received file upload request
2025-05-20 11:42:34,554 - flask.app - INFO - Received lease summary extraction request
2025-05-20 14:30:24,108 - flask.app - INFO - Received lease flag extraction request
2025-05-20 14:30:24,109 - flask.app - ERROR - Error extracting lease flags: 'LlamaCloudIndex' object has no attribute '_docstore'
2025-05-20 14:33:56,907 - flask.app - INFO - Received lease flag extraction request
2025-05-20 14:33:56,910 - flask.app - ERROR - Error extracting lease flags: 'LlamaCloudIndex' object has no attribute '_docstore'
2025-05-20 14:52:50,984 - flask.app - INFO - Received lease flag extraction request
2025-05-20 14:52:50,985 - flask.app - ERROR - Error extracting lease flags: 'LlamaCloudIndex' object has no attribute '_docstore'
2025-05-20 15:02:13,482 - flask.app - INFO - Received lease flag extraction request
2025-05-20 15:06:27,613 - flask.app - INFO - Received lease flag extraction request
2025-05-20 15:06:27,618 - flask.app - ERROR - Error extracting lease flags: 'utf-8' codec can't decode byte 0xc4 in position 10: invalid continuation byte
2025-05-21 10:19:01,916 - flask.app - INFO - Received file upload request
2025-05-21 10:19:02,473 - flask.app - INFO - Received lease summary extraction request
2025-05-21 10:28:10,838 - flask.app - INFO - Received file upload request
2025-05-21 10:28:10,858 - flask.app - INFO - Received lease summary extraction request
2025-05-22 10:46:19,721 - flask.app - INFO - Received file upload request
2025-05-22 10:46:19,823 - flask.app - INFO - Received lease summary extraction request
2025-05-22 11:01:35,593 - flask.app - ERROR - Error in lease flag query: 'dict' object has no attribute 'condition'
2025-05-22 11:02:43,630 - flask.app - ERROR - Error in lease flag query: 'dict' object has no attribute 'condition'
2025-05-22 11:03:03,128 - flask.app - ERROR - Error in lease flag query: 'dict' object has no attribute 'condition'
2025-05-22 11:15:44,155 - flask.app - ERROR - Error in lease flag query: 'dict' object has no attribute 'condition'
2025-05-22 11:18:02,661 - flask.app - ERROR - Error in lease flag query: 'dict' object has no attribute 'condition'
2025-05-22 11:18:07,727 - flask.app - ERROR - Error in lease flag query: 'dict' object has no attribute 'condition'
2025-05-22 11:18:35,770 - flask.app - ERROR - Error in lease flag query: 'dict' object has no attribute 'condition'
2025-05-22 11:19:02,809 - flask.app - ERROR - Error in lease flag query: 'dict' object has no attribute 'condition'
2025-05-22 11:19:26,516 - flask.app - ERROR - Error in lease flag query: 'dict' object has no attribute 'condition'
2025-05-22 11:19:58,640 - flask.app - ERROR - Error in lease flag query: 'dict' object has no attribute 'condition'
2025-05-22 15:45:30,223 - flask.app - INFO - Received update extraction agent request
2025-05-22 15:45:30,371 - flask.app - ERROR - Error updating lease summary agent schema: Error getting agent: Network error: [Errno 8] nodename nor servname provided, or not known
2025-05-22 15:47:06,449 - flask.app - INFO - Received update extraction agent request
2025-05-22 15:58:15,051 - flask.app - INFO - Received update extraction agent request
2025-05-22 15:58:54,030 - flask.app - INFO - Received update extraction agent request
2025-05-27 21:38:25,539 - flask.app - INFO - Received SSE streaming lease flags extraction request
2025-05-27 21:38:47,765 - flask.app - ERROR - Failed to index uploaded file
2025-05-27 21:41:18,264 - flask.app - INFO - Received SSE streaming lease flags extraction request
2025-05-27 21:42:34,104 - flask.app - INFO - Received SSE streaming lease flags extraction request
2025-05-27 21:45:11,715 - flask.app - INFO - Received SSE streaming lease flags extraction request
2025-05-27 21:45:46,909 - flask.app - INFO - Received SSE streaming lease flags extraction request
2025-05-27 21:47:09,691 - flask.app - INFO - Received SSE streaming lease flags extraction request
2025-05-27 21:49:07,542 - flask.app - INFO - Received SSE streaming lease flags extraction request
2025-05-27 21:52:04,028 - flask.app - INFO - Received SSE streaming lease flags extraction request
2025-05-27 21:53:59,804 - flask.app - INFO - Received SSE streaming lease flags extraction request
2025-05-27 21:54:37,274 - flask.app - ERROR - Error indexing uploaded file: 
2025-05-27 21:57:09,196 - flask.app - INFO - Received SSE streaming lease flags extraction request
2025-05-27 22:00:28,931 - flask.app - INFO - Received SSE streaming lease flags extraction request
2025-05-27 22:01:20,407 - flask.app - INFO - Received file upload request
2025-05-27 22:01:20,428 - flask.app - INFO - Received indexing request
2025-05-27 22:01:44,348 - flask.app - INFO - Received SSE streaming lease flags extraction request
2025-05-28 09:54:17,443 - flask.app - INFO - Received file upload request
2025-05-28 09:54:17,472 - flask.app - INFO - Received indexing request
2025-05-28 09:55:31,346 - flask.app - INFO - Received file upload request
2025-05-28 09:55:31,363 - flask.app - INFO - Received indexing request
2025-05-28 09:55:57,825 - flask.app - ERROR - Error indexing file: 
2025-05-28 09:55:57,826 - flask.app - ERROR - Error indexing file: 
2025-05-28 09:56:26,529 - flask.app - INFO - Received file upload request
2025-05-28 09:56:26,548 - flask.app - INFO - Received indexing request
2025-05-28 09:56:57,761 - flask.app - INFO - Received SSE streaming lease flags extraction request
2025-05-28 11:08:26,467 - flask.app - INFO - Received file upload request
2025-05-28 11:08:26,496 - flask.app - INFO - Received indexing request
2025-05-28 11:09:30,157 - flask.app - INFO - Received streaming lease flags extraction request using updated pipeline
2025-05-28 11:09:34,300 - flask.app - INFO - Pipeline output: Loading document: uploaded_documents/2019-2022-Lease-Agreement-TETCO-Signed-tiny.pdf
2025-05-28 11:09:34,302 - flask.app - INFO - Pipeline output: Loaded 2 document(s)
2025-05-28 11:09:34,304 - flask.app - INFO - Pipeline output: Creating new vector index...
2025-05-28 11:09:34,304 - flask.app - INFO - Pipeline output: Querying the document for lease flags...
2025-05-28 11:09:34,305 - flask.app - INFO - Pipeline output: Streaming response:
2025-05-28 11:09:34,343 - flask.app - INFO - Pipeline output: Financial Exposure & Cost Uncertainty:
2025-05-28 11:09:34,392 - flask.app - INFO - Pipeline output: 1. Excessive Service Charges Without Transparency or Caps
2025-05-28 11:09:34,479 - flask.app - INFO - Pipeline output: 2. Hidden Fees
2025-05-28 11:09:35,005 - flask.app - INFO - Pipeline output: 3. The lease document includes provisions for additional service charges that are not clearly defined or capped, leading to potential excessive costs. Additionally, there are hidden fees mentioned in the document that are not transparent or explicitly outlined, posing financial exposure and uncertainty for the tenant.
2025-05-28 11:09:35,006 - flask.app - INFO - Pipeline output: 
2025-05-28 11:09:35,109 - flask.app - INFO - Pipeline output: Operational Constraints & Legal Risks:
2025-05-28 11:09:35,178 - flask.app - INFO - Pipeline output: 1. Restrictive Use Clauses
2025-05-28 11:09:35,273 - flask.app - INFO - Pipeline output: 2. Ambiguous or Vague Language
2025-05-28 11:09:35,747 - flask.app - INFO - Pipeline output: 3. The lease contains clauses that restrict the tenant's use of the property in certain ways, introducing operational constraints. Moreover, there are sections with ambiguous or vague language that could lead to legal risks due to unclear obligations or rights outlined in the agreement.
2025-05-28 11:09:35,748 - flask.app - INFO - Pipeline output: 
2025-05-28 11:09:35,791 - flask.app - INFO - Pipeline output: Insurance & Liability:
2025-05-28 11:09:35,861 - flask.app - INFO - Pipeline output: 1. Indemnification Clauses
2025-05-28 11:09:35,920 - flask.app - INFO - Pipeline output: 2. Tenant Insurance Requirements
2025-05-28 11:09:36,305 - flask.app - INFO - Pipeline output: 3. The document specifies clauses related to indemnification, shifting liability risks to the tenant. Additionally, there are requirements for tenant insurance coverage mentioned in the lease, impacting insurance and liability aspects of the agreement.
2025-05-28 11:09:36,305 - flask.app - INFO - Pipeline output: 
2025-05-28 11:09:36,361 - flask.app - INFO - Pipeline output: Lease Term & Renewal:
2025-05-28 11:09:36,473 - flask.app - INFO - Pipeline output: 1. Holdover Penalties
2025-05-28 11:09:36,543 - flask.app - INFO - Pipeline output: 2. Unfavorable Renewal Terms
2025-05-28 11:09:36,967 - flask.app - INFO - Pipeline output: 3. The lease includes penalties for holdover situations where the tenant stays beyond the agreed-upon lease term. Furthermore, there are renewal terms that are unfavorable to the tenant, affecting the lease term and potential renewal options.
2025-05-28 11:09:36,967 - flask.app - INFO - Pipeline output: 
2025-05-28 11:09:37,007 - flask.app - INFO - Pipeline output: Miscellaneous:
2025-05-28 11:09:37,061 - flask.app - INFO - Pipeline output: 1. Sublease Restrictions
2025-05-28 11:09:37,823 - flask.app - INFO - Pipeline output: 2. Assignment Clauses
2025-05-28 11:09:37,986 - flask.app - INFO - Pipeline output: 3. The lease document outlines restrictions on subleasing the property and includes clauses related to assigning the lease to another party, impacting the tenant's flexibility in managing the property.
2025-05-28 11:09:37,986 - flask.app - INFO - Pipeline output: ------------------------------------------------------------
2025-05-28 11:09:37,986 - flask.app - INFO - Pipeline output: 
2025-05-28 11:09:37,987 - flask.app - INFO - Pipeline output: ============================================================
2025-05-28 11:09:37,987 - flask.app - INFO - Pipeline output: LEASE FLAGS EXTRACTED:
2025-05-28 11:09:37,990 - flask.app - INFO - Pipeline output: ============================================================
2025-05-28 11:09:37,990 - flask.app - INFO - Pipeline output: 
2025-05-28 11:09:37,991 - flask.app - INFO - Pipeline output: 1. Excessive Service Charges Without Transparency or Caps
2025-05-28 11:09:37,993 - flask.app - INFO - Pipeline output: Category: Financial Exposure & Cost Uncertainty
2025-05-28 11:09:37,994 - flask.app - INFO - Pipeline output: Description: Leases allowing landlords to impose service charges without clear justification or limits.
2025-05-28 11:09:37,994 - flask.app - INFO - Pipeline output: 
2025-05-28 11:09:37,994 - flask.app - INFO - Pipeline output: 2. Hidden Fees
2025-05-28 11:09:37,994 - flask.app - INFO - Pipeline output: Category: Financial Exposure & Cost Uncertainty
2025-05-28 11:09:37,994 - flask.app - INFO - Pipeline output: Description: Unspecified costs embedded within the lease, including unexpected insurance requirements or maintenance charges.
2025-05-28 11:09:37,994 - flask.app - INFO - Pipeline output: 
2025-05-28 11:09:37,994 - flask.app - INFO - Pipeline output: 3. Ambiguous or Vague Language
2025-05-28 11:09:37,994 - flask.app - INFO - Pipeline output: Category: Operational Constraints & Legal Risks
2025-05-28 11:09:37,994 - flask.app - INFO - Pipeline output: Description: Clauses lacking clarity, leading to potential misunderstandings regarding responsibilities and obligations.
2025-05-28 11:09:37,994 - flask.app - INFO - Pipeline output: 
2025-05-28 11:09:37,995 - flask.app - INFO - Pipeline output: 4. Tenant Insurance Requirements
2025-05-28 11:09:37,995 - flask.app - INFO - Pipeline output: Category: Insurance & Liability
2025-05-28 11:09:37,995 - flask.app - INFO - Pipeline output: Description: Clauses mandating tenants to carry specific insurance policies without clear specifications, potentially leading to increased costs.
2025-05-28 11:09:37,995 - flask.app - INFO - Pipeline output: 
2025-05-28 11:09:37,995 - flask.app - INFO - Pipeline output: 5. Indemnification Clauses
2025-05-28 11:09:37,995 - flask.app - INFO - Pipeline output: Category: Insurance & Liability
2025-05-28 11:09:37,995 - flask.app - INFO - Pipeline output: Description: Provisions requiring tenants to indemnify landlords, which can expose tenants to significant liabilities.
2025-05-28 11:09:37,996 - flask.app - INFO - Pipeline output: 
2025-05-28 11:09:37,996 - flask.app - INFO - Pipeline output: 6. Unfavorable Renewal Terms
2025-05-28 11:09:37,996 - flask.app - INFO - Pipeline output: Category: Lease Term & Renewal
2025-05-28 11:09:37,996 - flask.app - INFO - Pipeline output: Description: Clauses that allow landlords to increase rent significantly upon renewal or impose strict renewal notification periods.
2025-05-28 11:09:37,996 - flask.app - INFO - Pipeline output: 
2025-05-28 11:09:37,997 - flask.app - INFO - Pipeline output: 7. Holdover Penalties
2025-05-28 11:09:37,998 - flask.app - INFO - Pipeline output: Category: Lease Term & Renewal
2025-05-28 11:09:37,999 - flask.app - INFO - Pipeline output: Description: Excessive fees or penalties for tenants who remain in the property after lease expiration without a new agreement.
2025-05-28 11:09:38,000 - flask.app - INFO - Pipeline output: 
2025-05-28 11:09:38,000 - flask.app - INFO - Pipeline output: 8. Sublease Restrictions
2025-05-28 11:09:38,004 - flask.app - INFO - Pipeline output: Category: Miscellaneous
2025-05-28 11:09:38,005 - flask.app - INFO - Pipeline output: Description: Limitations or prohibitions on the tenant's ability to sublease the property, affecting flexibility.
2025-05-28 11:09:38,006 - flask.app - INFO - Pipeline output: 
2025-05-28 11:09:38,006 - flask.app - INFO - Pipeline output: 9. Assignment Clauses
2025-05-28 11:09:38,006 - flask.app - INFO - Pipeline output: Category: Miscellaneous
2025-05-28 11:09:38,006 - flask.app - INFO - Pipeline output: Description: Restrictions on transferring lease obligations to another party, which can impact business transitions.
2025-05-28 11:09:38,006 - flask.app - INFO - Pipeline output: ============================================================
2025-05-28 11:09:38,006 - flask.app - INFO - Pipeline output: 
2025-05-28 11:09:38,006 - flask.app - INFO - Pipeline output: Results saved to: lease_flags_2019-2022-Lease-Agreement-TETCO-Signed-tiny.pdf.json
2025-05-28 11:12:17,587 - flask.app - INFO - Received file upload request
2025-05-28 11:12:18,513 - flask.app - INFO - Received indexing request
2025-05-28 11:13:18,565 - flask.app - INFO - Received streaming lease flags extraction request using updated pipeline
2025-05-28 11:13:22,950 - flask.app - INFO - Pipeline output: Loading document: uploaded_documents/2019-2022-Lease-Agreement-TETCO-Signed-condensed.pdf
2025-05-28 11:13:22,954 - flask.app - INFO - Pipeline output: Loaded 10 document(s)
2025-05-28 11:13:22,954 - flask.app - INFO - Pipeline output: Creating new vector index...
2025-05-28 11:13:22,954 - flask.app - INFO - Pipeline output: Querying the document for lease flags...
2025-05-28 11:13:22,955 - flask.app - INFO - Pipeline output: Streaming response:
2025-05-28 11:13:23,390 - flask.app - INFO - Pipeline output: Financial Exposure & Cost Uncertainty:
2025-05-28 11:13:23,725 - flask.app - INFO - Pipeline output: 1. Excessive Service Charges Without Transparency or Caps
2025-05-28 11:13:23,904 - flask.app - INFO - Pipeline output: 2. Hidden Fees
2025-05-28 11:13:27,392 - flask.app - INFO - Pipeline output: 3. The lease document includes provisions for additional service charges that are not clearly defined or capped, leading to potential financial exposure. Additionally, there are hidden fees mentioned in the document that are not explicitly outlined, creating uncertainty regarding the total cost of the lease.
2025-05-28 11:13:27,393 - flask.app - INFO - Pipeline output: 
2025-05-28 11:13:28,161 - flask.app - INFO - Pipeline output: Operational Constraints & Legal Risks:
2025-05-28 11:13:28,574 - flask.app - INFO - Pipeline output: 1. Restrictive Use Clauses
2025-05-28 11:13:28,848 - flask.app - INFO - Pipeline output: 2. Ambiguous or Vague Language
2025-05-28 11:13:29,597 - flask.app - INFO - Pipeline output: 3. The lease contains clauses that restrict the tenant's use of the property in certain ways, introducing operational constraints. Moreover, there are sections with ambiguous or vague language that could pose legal risks due to interpretation issues.
2025-05-28 11:13:29,597 - flask.app - INFO - Pipeline output: 
2025-05-28 11:13:29,688 - flask.app - INFO - Pipeline output: Insurance & Liability:
2025-05-28 11:13:29,745 - flask.app - INFO - Pipeline output: 1. Tenant Insurance Requirements
2025-05-28 11:13:29,791 - flask.app - INFO - Pipeline output: 2. Indemnification Clauses
2025-05-28 11:13:29,919 - flask.app - INFO - Pipeline output: 3. The document specifies insurance requirements for the tenant and includes indemnification clauses that outline liability obligations, impacting insurance and liability aspects of the lease agreement.
2025-05-28 11:13:29,919 - flask.app - INFO - Pipeline output: 
2025-05-28 11:13:29,930 - flask.app - INFO - Pipeline output: Lease Term & Renewal:
2025-05-28 11:13:29,968 - flask.app - INFO - Pipeline output: 1. Holdover Penalties
2025-05-28 11:13:29,975 - flask.app - INFO - Pipeline output: 2. Unfavorable Renewal Terms
2025-05-28 11:13:30,075 - flask.app - INFO - Pipeline output: 3. The lease agreement outlines penalties for holdover situations and includes renewal terms that are unfavorable to the tenant, affecting the lease term and potential renewal options.
2025-05-28 11:13:30,076 - flask.app - INFO - Pipeline output: 
2025-05-28 11:13:30,098 - flask.app - INFO - Pipeline output: Miscellaneous:
2025-05-28 11:13:30,120 - flask.app - INFO - Pipeline output: 1. Sublease Restrictions
2025-05-28 11:13:30,134 - flask.app - INFO - Pipeline output: 2. Assignment Clauses
2025-05-28 11:13:30,283 - flask.app - INFO - Pipeline output: 3. The lease document imposes restrictions on subleasing the property and includes clauses related to assigning the lease, adding additional constraints on tenant actions.
2025-05-28 11:13:30,283 - flask.app - INFO - Pipeline output: ------------------------------------------------------------
2025-05-28 11:13:30,283 - flask.app - INFO - Pipeline output: 
2025-05-28 11:13:30,283 - flask.app - INFO - Pipeline output: ============================================================
2025-05-28 11:13:30,283 - flask.app - INFO - Pipeline output: LEASE FLAGS EXTRACTED:
2025-05-28 11:13:30,283 - flask.app - INFO - Pipeline output: ============================================================
2025-05-28 11:13:30,283 - flask.app - INFO - Pipeline output: 
2025-05-28 11:13:30,284 - flask.app - INFO - Pipeline output: 1. Excessive Service Charges Without Transparency or Caps
2025-05-28 11:13:30,284 - flask.app - INFO - Pipeline output: Category: Financial Exposure & Cost Uncertainty
2025-05-28 11:13:30,284 - flask.app - INFO - Pipeline output: Description: Leases allowing landlords to impose service charges without clear justification or limits.
2025-05-28 11:13:30,284 - flask.app - INFO - Pipeline output: 
2025-05-28 11:13:30,284 - flask.app - INFO - Pipeline output: 2. Hidden Fees
2025-05-28 11:13:30,284 - flask.app - INFO - Pipeline output: Category: Financial Exposure & Cost Uncertainty
2025-05-28 11:13:30,284 - flask.app - INFO - Pipeline output: Description: Unspecified costs embedded within the lease, including unexpected insurance requirements or maintenance charges.
2025-05-28 11:13:30,284 - flask.app - INFO - Pipeline output: 
2025-05-28 11:13:30,284 - flask.app - INFO - Pipeline output: 3. Ambiguous or Vague Language
2025-05-28 11:13:30,285 - flask.app - INFO - Pipeline output: Category: Operational Constraints & Legal Risks
2025-05-28 11:13:30,285 - flask.app - INFO - Pipeline output: Description: Clauses lacking clarity, leading to potential misunderstandings regarding responsibilities and obligations.
2025-05-28 11:13:30,286 - flask.app - INFO - Pipeline output: 
2025-05-28 11:13:30,286 - flask.app - INFO - Pipeline output: 4. Tenant Insurance Requirements
2025-05-28 11:13:30,286 - flask.app - INFO - Pipeline output: Category: Insurance & Liability
2025-05-28 11:13:30,286 - flask.app - INFO - Pipeline output: Description: Clauses mandating tenants to carry specific insurance policies without clear specifications, potentially leading to increased costs.
2025-05-28 11:13:30,286 - flask.app - INFO - Pipeline output: 
2025-05-28 11:13:30,287 - flask.app - INFO - Pipeline output: 5. Indemnification Clauses
2025-05-28 11:13:30,287 - flask.app - INFO - Pipeline output: Category: Insurance & Liability
2025-05-28 11:13:30,287 - flask.app - INFO - Pipeline output: Description: Provisions requiring tenants to indemnify landlords, which can expose tenants to significant liabilities.
2025-05-28 11:13:30,288 - flask.app - INFO - Pipeline output: 
2025-05-28 11:13:30,288 - flask.app - INFO - Pipeline output: 6. Unfavorable Renewal Terms
2025-05-28 11:13:30,288 - flask.app - INFO - Pipeline output: Category: Lease Term & Renewal
2025-05-28 11:13:30,288 - flask.app - INFO - Pipeline output: Description: Clauses that allow landlords to increase rent significantly upon renewal or impose strict renewal notification periods.
2025-05-28 11:13:30,288 - flask.app - INFO - Pipeline output: 
2025-05-28 11:13:30,288 - flask.app - INFO - Pipeline output: 7. Holdover Penalties
2025-05-28 11:13:30,288 - flask.app - INFO - Pipeline output: Category: Lease Term & Renewal
2025-05-28 11:13:30,289 - flask.app - INFO - Pipeline output: Description: Excessive fees or penalties for tenants who remain in the property after lease expiration without a new agreement.
2025-05-28 11:13:30,289 - flask.app - INFO - Pipeline output: 
2025-05-28 11:13:30,289 - flask.app - INFO - Pipeline output: 8. Sublease Restrictions
2025-05-28 11:13:30,289 - flask.app - INFO - Pipeline output: Category: Miscellaneous
2025-05-28 11:13:30,289 - flask.app - INFO - Pipeline output: Description: Limitations or prohibitions on the tenant's ability to sublease the property, affecting flexibility.
2025-05-28 11:13:30,289 - flask.app - INFO - Pipeline output: 
2025-05-28 11:13:30,289 - flask.app - INFO - Pipeline output: 9. Assignment Clauses
2025-05-28 11:13:30,289 - flask.app - INFO - Pipeline output: Category: Miscellaneous
2025-05-28 11:13:30,290 - flask.app - INFO - Pipeline output: Description: Restrictions on transferring lease obligations to another party, which can impact business transitions.
2025-05-28 11:13:30,290 - flask.app - INFO - Pipeline output: ============================================================
2025-05-28 11:13:30,290 - flask.app - INFO - Pipeline output: 
2025-05-28 11:13:30,290 - flask.app - INFO - Pipeline output: Results saved to: lease_flags_2019-2022-Lease-Agreement-TETCO-Signed-condensed.pdf.json
2025-06-02 16:04:24,816 - flask.app - INFO - Received file upload request
2025-06-02 16:04:24,855 - flask.app - INFO - Received asset type classification request
2025-06-02 16:04:38,251 - flask.app - INFO - Received lease summary extraction request
2025-06-02 16:06:44,684 - flask.app - INFO - Received file upload request
2025-06-02 16:06:45,111 - flask.app - INFO - Received asset type classification request
2025-06-02 16:07:15,144 - flask.app - INFO - Received lease summary extraction request
2025-06-02 16:14:05,766 - flask.app - INFO - Received file upload request
2025-06-02 16:14:05,792 - flask.app - INFO - Received asset type classification request
2025-06-02 16:14:18,814 - flask.app - INFO - Received lease summary extraction request
2025-06-02 16:18:47,554 - flask.app - INFO - Received file upload request
2025-06-02 16:18:47,581 - flask.app - INFO - Received asset type classification request
2025-06-02 16:18:58,532 - flask.app - INFO - Received lease summary extraction request
2025-06-02 16:19:42,950 - flask.app - INFO - Received file upload request
2025-06-02 16:19:42,972 - flask.app - INFO - Received asset type classification request
2025-06-02 16:19:53,821 - flask.app - INFO - Received lease summary extraction request
2025-06-02 16:48:22,928 - flask.app - ERROR - Error during lease summary extraction: Request timed out: 
2025-06-02 20:29:08,463 - flask.app - INFO - Received file upload request
2025-06-02 20:29:08,490 - flask.app - INFO - Received asset type classification request
2025-06-02 20:29:19,864 - flask.app - INFO - Received lease summary extraction request
2025-06-03 15:24:19,744 - flask.app - INFO - Received file upload request
2025-06-03 15:24:19,779 - flask.app - INFO - Received indexing request
2025-06-03 15:24:20,036 - flask.app - ERROR - Error indexing file: 
---------------------------------------------------------------------------
Traceback (most recent call last):
  File "/opt/homebrew/Cellar/python@3.13/3.13.2/Frameworks/Python.framework/Versions/3.13/lib/python3.13/multiprocessing/managers.py", line 212, in _handle_request
    result = func(c, *args, **kwds)
  File "/opt/homebrew/Cellar/python@3.13/3.13.2/Frameworks/Python.framework/Versions/3.13/lib/python3.13/multiprocessing/managers.py", line 382, in create
    self.registry[typeid]
    ~~~~~~~~~~~~~^^^^^^^^
KeyError: 'handle_file_upload'
---------------------------------------------------------------------------
2025-06-04 11:32:08,546 - flask.app - INFO - Received file upload request
2025-06-04 11:32:09,051 - flask.app - INFO - Received asset type classification request
2025-06-04 11:32:24,713 - flask.app - INFO - Received lease summary extraction request
2025-06-04 12:58:59,326 - flask.app - INFO - Received file upload request
2025-06-04 12:58:59,373 - flask.app - INFO - Received indexing request
2025-06-04 12:58:59,455 - flask.app - ERROR - Error indexing file: 
---------------------------------------------------------------------------
Traceback (most recent call last):
  File "/opt/homebrew/Cellar/python@3.13/3.13.2/Frameworks/Python.framework/Versions/3.13/lib/python3.13/multiprocessing/managers.py", line 212, in _handle_request
    result = func(c, *args, **kwds)
  File "/opt/homebrew/Cellar/python@3.13/3.13.2/Frameworks/Python.framework/Versions/3.13/lib/python3.13/multiprocessing/managers.py", line 382, in create
    self.registry[typeid]
    ~~~~~~~~~~~~~^^^^^^^^
KeyError: 'handle_file_upload'
---------------------------------------------------------------------------
2025-06-04 12:59:18,156 - flask.app - INFO - Received file upload request
2025-06-04 12:59:18,170 - flask.app - INFO - Received indexing request
2025-06-04 12:59:18,216 - flask.app - ERROR - Error indexing file: 
---------------------------------------------------------------------------
Traceback (most recent call last):
  File "/opt/homebrew/Cellar/python@3.13/3.13.2/Frameworks/Python.framework/Versions/3.13/lib/python3.13/multiprocessing/managers.py", line 212, in _handle_request
    result = func(c, *args, **kwds)
  File "/opt/homebrew/Cellar/python@3.13/3.13.2/Frameworks/Python.framework/Versions/3.13/lib/python3.13/multiprocessing/managers.py", line 382, in create
    self.registry[typeid]
    ~~~~~~~~~~~~~^^^^^^^^
KeyError: 'handle_file_upload'
---------------------------------------------------------------------------
2025-06-12 14:04:09,408 - flask.app - INFO - Received file upload request
2025-06-12 14:04:11,955 - flask.app - INFO - Received asset type classification request
2025-06-12 14:04:42,438 - flask.app - INFO - Received lease summary extraction request
2025-06-12 14:06:31,382 - flask.app - ERROR - Error during lease summary extraction: Server disconnected without sending a response.
2025-06-12 14:12:22,792 - flask.app - INFO - Received file upload request
2025-06-12 14:12:22,825 - flask.app - INFO - Received lease summary extraction request
2025-06-12 14:12:22,828 - flask.app - INFO - Received risk flags extraction request
2025-06-12 14:12:22,830 - flask.app - INFO - Received asset type classification request
2025-06-12 14:12:23,327 - flask.app - ERROR - Error during risk flags extraction: status_code: 404, body: {'detail': 'Extraction agent atlas-risk-flags not found or user does not have access.'}
2025-06-12 14:17:00,277 - flask.app - INFO - Received file upload request
2025-06-12 14:17:00,318 - flask.app - INFO - Received lease summary extraction request
2025-06-12 14:17:00,339 - flask.app - INFO - Received risk flags extraction request
2025-06-12 14:17:00,356 - flask.app - INFO - Received asset type classification request
2025-06-12 14:17:00,942 - flask.app - ERROR - Error during risk flags extraction: status_code: 404, body: {'detail': 'Extraction agent atlas-risk-flags not found or user does not have access.'}
2025-06-12 14:17:47,131 - flask.app - INFO - Received file upload request
2025-06-12 14:17:47,158 - flask.app - INFO - Received lease summary extraction request
2025-06-12 14:17:47,162 - flask.app - INFO - Received risk flags extraction request
2025-06-12 14:17:47,165 - flask.app - INFO - Received asset type classification request
2025-06-12 14:19:31,762 - flask.app - INFO - Received file upload request
2025-06-12 14:19:33,852 - flask.app - INFO - Received lease summary extraction request
2025-06-12 14:19:33,853 - flask.app - INFO - Received risk flags extraction request
2025-06-12 14:19:33,858 - flask.app - INFO - Received asset type classification request
2025-06-12 14:24:07,953 - flask.app - INFO - Received file upload request
2025-06-12 14:24:07,974 - flask.app - INFO - Received lease summary extraction request
2025-06-12 14:24:07,979 - flask.app - INFO - Received risk flags extraction request
2025-06-12 14:24:07,981 - flask.app - INFO - Received asset type classification request
2025-06-12 16:08:41,159 - flask.app - INFO - Received file upload request
2025-06-12 16:08:41,637 - flask.app - INFO - Received lease summary extraction request
2025-06-12 16:08:41,643 - flask.app - INFO - Received risk flags extraction request
2025-06-12 16:08:41,645 - flask.app - INFO - Received asset type classification request
2025-06-12 21:50:36,328 - flask.app - INFO - Received file upload request
2025-06-12 21:50:36,438 - flask.app - INFO - Received lease summary extraction request
2025-06-12 21:50:36,439 - flask.app - INFO - Received risk flags extraction request
2025-06-12 21:50:36,448 - flask.app - INFO - Received asset type classification request
2025-06-13 11:36:02,415 - flask.app - INFO - Received file upload request
2025-06-13 11:36:02,947 - flask.app - INFO - Received lease summary extraction request
2025-06-13 11:36:02,952 - flask.app - INFO - Received risk flags extraction request
2025-06-13 11:36:02,956 - flask.app - INFO - Received asset type classification request
2025-06-13 11:39:47,723 - flask.app - INFO - Received file upload request
2025-06-13 11:39:47,746 - flask.app - INFO - Received lease summary extraction request
2025-06-13 11:39:47,748 - flask.app - INFO - Received risk flags extraction request
2025-06-13 11:39:47,750 - flask.app - INFO - Received asset type classification request
2025-06-13 11:58:21,744 - flask.app - INFO - Received file upload request
2025-06-13 11:58:24,309 - flask.app - INFO - Received lease summary extraction request
2025-06-13 11:58:24,309 - flask.app - INFO - Received risk flags extraction request
2025-06-13 11:58:24,312 - flask.app - INFO - Received asset type classification request
2025-06-13 12:00:06,705 - flask.app - INFO - Received file upload request
2025-06-13 12:00:06,727 - flask.app - INFO - Received lease summary extraction request
2025-06-13 12:00:06,732 - flask.app - INFO - Received risk flags extraction request
2025-06-13 12:00:06,738 - flask.app - INFO - Received asset type classification request
2025-06-16 14:18:08,046 - flask.app - INFO - Received file upload request
2025-06-16 14:18:08,938 - flask.app - INFO - Received lease summary extraction request
2025-06-16 14:18:08,941 - flask.app - INFO - Received risk flags extraction request
2025-06-16 14:18:08,945 - flask.app - INFO - Received asset type classification request
2025-06-17 19:07:35,546 - flask.app - INFO - Received file upload request
2025-06-17 19:07:35,621 - flask.app - INFO - Received indexing request
2025-06-17 19:07:35,741 - flask.app - ERROR - Error indexing file: 
---------------------------------------------------------------------------
Traceback (most recent call last):
  File "/opt/homebrew/Cellar/python@3.13/3.13.2/Frameworks/Python.framework/Versions/3.13/lib/python3.13/multiprocessing/managers.py", line 212, in _handle_request
    result = func(c, *args, **kwds)
  File "/opt/homebrew/Cellar/python@3.13/3.13.2/Frameworks/Python.framework/Versions/3.13/lib/python3.13/multiprocessing/managers.py", line 382, in create
    self.registry[typeid]
    ~~~~~~~~~~~~~^^^^^^^^
KeyError: 'handle_file_upload'
---------------------------------------------------------------------------
2025-06-17 19:08:16,902 - flask.app - INFO - Received file upload request
2025-06-17 19:08:16,917 - flask.app - INFO - Received indexing request
2025-06-17 19:08:16,933 - flask.app - ERROR - Error indexing file: 
---------------------------------------------------------------------------
Traceback (most recent call last):
  File "/opt/homebrew/Cellar/python@3.13/3.13.2/Frameworks/Python.framework/Versions/3.13/lib/python3.13/multiprocessing/managers.py", line 212, in _handle_request
    result = func(c, *args, **kwds)
  File "/opt/homebrew/Cellar/python@3.13/3.13.2/Frameworks/Python.framework/Versions/3.13/lib/python3.13/multiprocessing/managers.py", line 382, in create
    self.registry[typeid]
    ~~~~~~~~~~~~~^^^^^^^^
KeyError: 'handle_file_upload'
---------------------------------------------------------------------------
2025-06-17 19:12:21,490 - flask.app - INFO - Received file upload request
2025-06-17 19:12:21,508 - flask.app - INFO - Received indexing request
2025-06-17 19:12:21,519 - flask.app - ERROR - Error indexing file: 
---------------------------------------------------------------------------
Traceback (most recent call last):
  File "/opt/homebrew/Cellar/python@3.13/3.13.2/Frameworks/Python.framework/Versions/3.13/lib/python3.13/multiprocessing/managers.py", line 212, in _handle_request
    result = func(c, *args, **kwds)
  File "/opt/homebrew/Cellar/python@3.13/3.13.2/Frameworks/Python.framework/Versions/3.13/lib/python3.13/multiprocessing/managers.py", line 382, in create
    self.registry[typeid]
    ~~~~~~~~~~~~~^^^^^^^^
KeyError: 'handle_file_upload'
---------------------------------------------------------------------------
2025-06-17 19:16:35,954 - flask.app - INFO - Received file upload request
2025-06-17 19:16:35,982 - flask.app - INFO - Received indexing request
2025-06-17 19:16:35,982 - flask.app - ERROR - Error indexing file: 'BaseManager' object has no attribute 'upload_file'
2025-06-17 19:18:50,000 - flask.app - INFO - Received file upload request
2025-06-17 19:18:50,023 - flask.app - INFO - Received indexing request
2025-06-17 19:18:50,023 - flask.app - ERROR - Error indexing file: 'BaseManager' object has no attribute 'upload_file'
2025-06-17 19:21:30,948 - flask.app - INFO - Received file upload request
2025-06-17 19:21:31,354 - flask.app - INFO - Received indexing request
2025-06-17 19:21:31,354 - flask.app - ERROR - Error indexing file: 'BaseManager' object has no attribute 'upload_file'
2025-06-17 19:27:37,526 - flask.app - INFO - Received file upload request
2025-06-17 19:27:37,545 - flask.app - INFO - Received indexing request
2025-06-17 19:28:04,047 - flask.app - INFO - Received streaming lease flags extraction request using updated pipeline
2025-06-17 19:34:18,967 - flask.app - INFO - Received file upload request
2025-06-17 19:34:22,003 - flask.app - INFO - Received indexing request
2025-06-17 19:34:36,709 - flask.app - INFO - Received streaming lease flags extraction request using updated pipeline
2025-06-17 19:43:38,768 - flask.app - INFO - Received file upload request
2025-06-17 19:43:38,794 - flask.app - INFO - Received indexing request
2025-06-17 19:43:51,715 - flask.app - INFO - Received streaming lease flags extraction request using updated pipeline
2025-06-17 19:45:26,980 - flask.app - INFO - Received file upload request
2025-06-17 19:45:26,997 - flask.app - INFO - Received indexing request
2025-06-17 19:45:48,747 - flask.app - INFO - Received streaming lease flags extraction request using updated pipeline
2025-06-17 19:51:57,160 - flask.app - INFO - Received file upload request
2025-06-17 19:51:57,178 - flask.app - INFO - Received indexing request
2025-06-17 19:52:21,908 - flask.app - INFO - Received streaming lease flags extraction request using updated pipeline
2025-06-17 19:54:39,191 - flask.app - INFO - Received file upload request
2025-06-17 19:54:39,205 - flask.app - INFO - Received indexing request
2025-06-17 19:54:59,520 - flask.app - INFO - Received streaming lease flags extraction request using updated pipeline
2025-06-17 19:55:45,989 - flask.app - INFO - Pipeline output: Loading document: /Users/betojuareziii/Applications/atlas-lease-extractor/uploaded_documents/2019-2022-Lease-Agreement-TETCO-Signed-tiny.pdf
2025-06-17 19:55:45,993 - flask.app - INFO - Pipeline output: Started parsing the file under job_id 762aa907-b878-426a-a172-420ec3190f97
2025-06-17 19:56:06,904 - flask.app - INFO - Pipeline output: .Loaded 1 document(s) via LlamaParse
2025-06-17 19:56:06,905 - flask.app - INFO - Pipeline output: Creating new vector index...
2025-06-17 19:56:06,905 - flask.app - INFO - Pipeline output: Querying the document for risk flags...
2025-06-17 19:56:06,905 - flask.app - INFO - Pipeline output: 
2025-06-17 19:56:06,905 - flask.app - INFO - Pipeline output: Results saved to: risk_flags_2019-2022-Lease-Agreement-TETCO-Signed-tiny.pdf.json
2025-06-17 19:56:06,905 - flask.app - INFO - Pipeline output: 
2025-06-17 19:56:06,905 - flask.app - INFO - Pipeline output: Extracted Risk Flags:
2025-06-17 19:56:06,905 - flask.app - INFO - Pipeline output: ==================================================
2025-06-17 19:56:06,905 - flask.app - INFO - Pipeline output: 
2025-06-17 19:56:06,905 - flask.app - INFO - Pipeline output: 1. ### Early Termination Clause
2025-06-17 19:56:06,905 - flask.app - INFO - Pipeline output: Category: ### Early Termination Clause
2025-06-17 19:56:06,905 - flask.app - INFO - Pipeline output: Description: The lease document does not contain an early termination clause.
2025-06-17 19:56:06,905 - flask.app - INFO - Pipeline output: --------------------------------------------------
2025-06-17 19:56:06,905 - flask.app - INFO - Pipeline output: 
2025-06-17 19:56:06,905 - flask.app - INFO - Pipeline output: 2. ### Uncapped or Vague Operating Expenses
2025-06-17 19:56:06,905 - flask.app - INFO - Pipeline output: Category: ### Uncapped or Vague Operating Expenses
2025-06-17 19:56:06,905 - flask.app - INFO - Pipeline output: Description: The lease document does not specify any details regarding operating expenses.
2025-06-17 19:56:06,905 - flask.app - INFO - Pipeline output: --------------------------------------------------
2025-06-17 19:56:06,905 - flask.app - INFO - Pipeline output: 
2025-06-17 19:56:06,905 - flask.app - INFO - Pipeline output: 3. ### Ambiguous Maintenance and Upgrade Obligations
2025-06-17 19:56:06,905 - flask.app - INFO - Pipeline output: Category: ### Ambiguous Maintenance and Upgrade Obligations
2025-06-17 19:56:06,905 - flask.app - INFO - Pipeline output: Description: The lease document does not provide clear details on maintenance and upgrade obligations.
2025-06-17 19:56:06,905 - flask.app - INFO - Pipeline output: --------------------------------------------------
2025-06-17 19:56:06,905 - flask.app - INFO - Pipeline output: 
2025-06-17 19:56:06,905 - flask.app - INFO - Pipeline output: 4. ### Excessive Service Charges Without Transparency or Caps
2025-06-17 19:56:06,905 - flask.app - INFO - Pipeline output: Category: ### Excessive Service Charges Without Transparency or Caps
2025-06-17 19:56:06,905 - flask.app - INFO - Pipeline output: Description: The lease document does not mention any service charges without transparency or caps.
2025-06-17 19:56:06,905 - flask.app - INFO - Pipeline output: --------------------------------------------------
2025-06-17 19:56:06,905 - flask.app - INFO - Pipeline output: 
2025-06-17 19:56:06,905 - flask.app - INFO - Pipeline output: 5. ### Hidden Fees
2025-06-17 19:56:06,905 - flask.app - INFO - Pipeline output: Category: ### Hidden Fees
2025-06-17 19:56:06,905 - flask.app - INFO - Pipeline output: Description: The lease document does not reveal any hidden fees.
2025-06-17 19:56:06,905 - flask.app - INFO - Pipeline output: --------------------------------------------------
2025-06-17 19:56:06,905 - flask.app - INFO - Pipeline output: 
2025-06-17 19:56:06,905 - flask.app - INFO - Pipeline output: 6. ### Restrictive Use Clauses
2025-06-17 19:56:06,905 - flask.app - INFO - Pipeline output: Category: ### Restrictive Use Clauses
2025-06-17 19:56:06,905 - flask.app - INFO - Pipeline output: Description: The lease document does not include any restrictive use clauses.
2025-06-17 19:56:06,905 - flask.app - INFO - Pipeline output: --------------------------------------------------
2025-06-17 19:56:06,905 - flask.app - INFO - Pipeline output: 
2025-06-17 19:56:06,905 - flask.app - INFO - Pipeline output: 7. ### Do Not Compete Clauses
2025-06-17 19:56:06,905 - flask.app - INFO - Pipeline output: Category: ### Do Not Compete Clauses
2025-06-17 19:56:06,906 - flask.app - INFO - Pipeline output: Description: The lease document does not contain any "Do Not Compete" clauses.
2025-06-17 19:56:06,906 - flask.app - INFO - Pipeline output: --------------------------------------------------
2025-06-17 19:56:06,906 - flask.app - INFO - Pipeline output: 
2025-06-17 19:56:06,906 - flask.app - INFO - Pipeline output: 8. ### Ambiguous or Vague Language
2025-06-17 19:56:06,906 - flask.app - INFO - Pipeline output: Category: ### Ambiguous or Vague Language
2025-06-17 19:56:06,906 - flask.app - INFO - Pipeline output: Description: The lease document does not exhibit ambiguous or vague language.
2025-06-17 19:56:06,906 - flask.app - INFO - Pipeline output: --------------------------------------------------
2025-06-17 19:56:06,906 - flask.app - INFO - Pipeline output: 
2025-06-17 19:56:06,906 - flask.app - INFO - Pipeline output: 9. ### Landlord's Right to Terminate
2025-06-17 19:56:06,906 - flask.app - INFO - Pipeline output: Category: ### Landlord's Right to Terminate
2025-06-17 19:56:06,906 - flask.app - INFO - Pipeline output: Description: The lease document does not grant the landlord the right to terminate the lease.
2025-06-17 19:56:06,906 - flask.app - INFO - Pipeline output: --------------------------------------------------
2025-06-17 19:56:06,906 - flask.app - INFO - Pipeline output: 
2025-06-17 19:56:06,906 - flask.app - INFO - Pipeline output: 10. ### Tenant Insurance Requirements
2025-06-17 19:56:06,906 - flask.app - INFO - Pipeline output: Category: ### Tenant Insurance Requirements
2025-06-17 19:56:06,906 - flask.app - INFO - Pipeline output: Description: The lease document does not outline any specific tenant insurance requirements.
2025-06-17 19:56:06,906 - flask.app - INFO - Pipeline output: --------------------------------------------------
2025-06-17 19:56:06,906 - flask.app - INFO - Pipeline output: 
2025-06-17 19:56:06,906 - flask.app - INFO - Pipeline output: 11. ### Indemnification Clauses
2025-06-17 19:56:06,906 - flask.app - INFO - Pipeline output: Category: ### Indemnification Clauses
2025-06-17 19:56:06,906 - flask.app - INFO - Pipeline output: Description: The lease document does not mention any indemnification clauses.
2025-06-17 19:56:06,906 - flask.app - INFO - Pipeline output: --------------------------------------------------
2025-06-17 19:56:06,906 - flask.app - INFO - Pipeline output: 
2025-06-17 19:56:06,906 - flask.app - INFO - Pipeline output: 12. ### Unfavorable Renewal Terms
2025-06-17 19:56:06,906 - flask.app - INFO - Pipeline output: Category: ### Unfavorable Renewal Terms
2025-06-17 19:56:06,906 - flask.app - INFO - Pipeline output: Description: The lease document includes two successive renewal terms of one year each, which may be considered unfavorable depending on the tenant's perspective.
2025-06-17 19:56:06,906 - flask.app - INFO - Pipeline output: --------------------------------------------------
2025-06-17 19:56:06,906 - flask.app - INFO - Pipeline output: 
2025-06-17 19:56:06,906 - flask.app - INFO - Pipeline output: 13. ### Holdover Penalties
2025-06-17 19:56:06,906 - flask.app - INFO - Pipeline output: Category: ### Holdover Penalties
2025-06-17 19:56:06,906 - flask.app - INFO - Pipeline output: Description: The lease document does not specify any holdover penalties.
2025-06-17 19:56:06,906 - flask.app - INFO - Pipeline output: --------------------------------------------------
2025-06-17 19:56:06,906 - flask.app - INFO - Pipeline output: 
2025-06-17 19:56:06,906 - flask.app - INFO - Pipeline output: 14. ### Sublease Restrictions
2025-06-17 19:56:06,906 - flask.app - INFO - Pipeline output: Category: ### Sublease Restrictions
2025-06-17 19:56:06,906 - flask.app - INFO - Pipeline output: Description: The lease document does not contain any sublease restrictions.
2025-06-17 19:56:06,906 - flask.app - INFO - Pipeline output: --------------------------------------------------
2025-06-17 19:56:06,906 - flask.app - INFO - Pipeline output: 
2025-06-17 19:56:06,906 - flask.app - INFO - Pipeline output: 15. ### Assignment Clauses
2025-06-17 19:56:06,906 - flask.app - INFO - Pipeline output: Category: ### Assignment Clauses
2025-06-17 19:56:06,906 - flask.app - INFO - Pipeline output: Description: The lease document does not include any assignment clauses.
2025-06-17 19:56:06,906 - flask.app - INFO - Pipeline output: --------------------------------------------------
2025-06-17 19:59:15,436 - flask.app - INFO - Received file upload request
2025-06-17 19:59:15,463 - flask.app - INFO - Received indexing request
2025-06-17 19:59:25,057 - flask.app - INFO - Received streaming lease flags extraction request using updated pipeline
2025-06-17 19:59:37,015 - flask.app - INFO - Pipeline output: Loading document: /Users/betojuareziii/Applications/atlas-lease-extractor/uploaded_documents/2019-2022-Lease-Agreement-TETCO-Signed-tiny.pdf
2025-06-17 19:59:37,016 - flask.app - INFO - Pipeline output: Started parsing the file under job_id 81131884-2fc4-4124-aa9a-7c654e111628
2025-06-17 19:59:37,017 - flask.app - INFO - Pipeline output: Loaded 1 document(s) via LlamaParse
2025-06-17 19:59:37,017 - flask.app - INFO - Pipeline output: Creating new vector index...
2025-06-17 19:59:37,017 - flask.app - INFO - Pipeline output: Querying the document for risk flags...
2025-06-17 19:59:37,017 - flask.app - INFO - Pipeline output: 
2025-06-17 19:59:37,017 - flask.app - INFO - Pipeline output: Results saved to: risk_flags_2019-2022-Lease-Agreement-TETCO-Signed-tiny.pdf.json
2025-06-17 19:59:37,017 - flask.app - INFO - Pipeline output: 
2025-06-17 19:59:37,017 - flask.app - INFO - Pipeline output: Extracted Risk Flags:
2025-06-17 19:59:37,017 - flask.app - INFO - Pipeline output: ==================================================
2025-06-17 19:59:37,017 - flask.app - INFO - Pipeline output: 
2025-06-17 19:59:37,017 - flask.app - INFO - Pipeline output: 1. ### Early Termination Clause
2025-06-17 19:59:37,017 - flask.app - INFO - Pipeline output: Category: ### Early Termination Clause
2025-06-17 19:59:37,017 - flask.app - INFO - Pipeline output: Description: The lease document does not contain an early termination clause.
2025-06-17 19:59:37,017 - flask.app - INFO - Pipeline output: --------------------------------------------------
2025-06-17 19:59:37,017 - flask.app - INFO - Pipeline output: 
2025-06-17 19:59:37,017 - flask.app - INFO - Pipeline output: 2. ### Uncapped or Vague Operating Expenses
2025-06-17 19:59:37,017 - flask.app - INFO - Pipeline output: Category: ### Uncapped or Vague Operating Expenses
2025-06-17 19:59:37,017 - flask.app - INFO - Pipeline output: Description: The lease document does not specify any details regarding operating expenses.
2025-06-17 19:59:37,017 - flask.app - INFO - Pipeline output: --------------------------------------------------
2025-06-17 19:59:37,017 - flask.app - INFO - Pipeline output: 
2025-06-17 19:59:37,017 - flask.app - INFO - Pipeline output: 3. ### Ambiguous Maintenance and Upgrade Obligations
2025-06-17 19:59:37,017 - flask.app - INFO - Pipeline output: Category: ### Ambiguous Maintenance and Upgrade Obligations
2025-06-17 19:59:37,017 - flask.app - INFO - Pipeline output: Description: The lease document does not provide clear details on maintenance and upgrade obligations.
2025-06-17 19:59:37,017 - flask.app - INFO - Pipeline output: --------------------------------------------------
2025-06-17 19:59:37,017 - flask.app - INFO - Pipeline output: 
2025-06-17 19:59:37,017 - flask.app - INFO - Pipeline output: 4. ### Excessive Service Charges Without Transparency or Caps
2025-06-17 19:59:37,017 - flask.app - INFO - Pipeline output: Category: ### Excessive Service Charges Without Transparency or Caps
2025-06-17 19:59:37,017 - flask.app - INFO - Pipeline output: Description: The lease document does not mention any service charges.
2025-06-17 19:59:37,017 - flask.app - INFO - Pipeline output: --------------------------------------------------
2025-06-17 19:59:37,017 - flask.app - INFO - Pipeline output: 
2025-06-17 19:59:37,017 - flask.app - INFO - Pipeline output: 5. ### Hidden Fees
2025-06-17 19:59:37,017 - flask.app - INFO - Pipeline output: Category: ### Hidden Fees
2025-06-17 19:59:37,017 - flask.app - INFO - Pipeline output: Description: The lease document does not reveal any hidden fees.
2025-06-17 19:59:37,017 - flask.app - INFO - Pipeline output: --------------------------------------------------
2025-06-17 19:59:37,017 - flask.app - INFO - Pipeline output: 
2025-06-17 19:59:37,017 - flask.app - INFO - Pipeline output: 6. ### Restrictive Use Clauses
2025-06-17 19:59:37,018 - flask.app - INFO - Pipeline output: Category: ### Restrictive Use Clauses
2025-06-17 19:59:37,018 - flask.app - INFO - Pipeline output: Description: The lease document does not include any restrictive use clauses.
2025-06-17 19:59:37,018 - flask.app - INFO - Pipeline output: --------------------------------------------------
2025-06-17 19:59:37,018 - flask.app - INFO - Pipeline output: 
2025-06-17 19:59:37,018 - flask.app - INFO - Pipeline output: 7. ### Do Not Compete Clauses
2025-06-17 19:59:37,018 - flask.app - INFO - Pipeline output: Category: ### Do Not Compete Clauses
2025-06-17 19:59:37,018 - flask.app - INFO - Pipeline output: Description: The lease document does not contain any "Do Not Compete" clauses.
2025-06-17 19:59:37,018 - flask.app - INFO - Pipeline output: --------------------------------------------------
2025-06-17 19:59:37,018 - flask.app - INFO - Pipeline output: 
2025-06-17 19:59:37,018 - flask.app - INFO - Pipeline output: 8. ### Ambiguous or Vague Language
2025-06-17 19:59:37,018 - flask.app - INFO - Pipeline output: Category: ### Ambiguous or Vague Language
2025-06-17 19:59:37,018 - flask.app - INFO - Pipeline output: Description: The lease document does not exhibit ambiguous or vague language.
2025-06-17 19:59:37,018 - flask.app - INFO - Pipeline output: --------------------------------------------------
2025-06-17 19:59:37,018 - flask.app - INFO - Pipeline output: 
2025-06-17 19:59:37,018 - flask.app - INFO - Pipeline output: 9. ### Landlord's Right to Terminate
2025-06-17 19:59:37,018 - flask.app - INFO - Pipeline output: Category: ### Landlord's Right to Terminate
2025-06-17 19:59:37,018 - flask.app - INFO - Pipeline output: Description: The lease document does not outline the landlord's right to terminate.
2025-06-17 19:59:37,018 - flask.app - INFO - Pipeline output: --------------------------------------------------
2025-06-17 19:59:37,018 - flask.app - INFO - Pipeline output: 
2025-06-17 19:59:37,018 - flask.app - INFO - Pipeline output: 10. ### Tenant Insurance Requirements
2025-06-17 19:59:37,018 - flask.app - INFO - Pipeline output: Category: ### Tenant Insurance Requirements
2025-06-17 19:59:37,018 - flask.app - INFO - Pipeline output: Description: The lease document does not specify any tenant insurance requirements.
2025-06-17 19:59:37,018 - flask.app - INFO - Pipeline output: --------------------------------------------------
2025-06-17 19:59:37,018 - flask.app - INFO - Pipeline output: 
2025-06-17 19:59:37,018 - flask.app - INFO - Pipeline output: 11. ### Indemnification Clauses
2025-06-17 19:59:37,018 - flask.app - INFO - Pipeline output: Category: ### Indemnification Clauses
2025-06-17 19:59:37,018 - flask.app - INFO - Pipeline output: Description: The lease document does not include any indemnification clauses.
2025-06-17 19:59:37,018 - flask.app - INFO - Pipeline output: --------------------------------------------------
2025-06-17 19:59:37,018 - flask.app - INFO - Pipeline output: 
2025-06-17 19:59:37,018 - flask.app - INFO - Pipeline output: 12. ### Unfavorable Renewal Terms
2025-06-17 19:59:37,018 - flask.app - INFO - Pipeline output: Category: ### Unfavorable Renewal Terms
2025-06-17 19:59:37,018 - flask.app - INFO - Pipeline output: Description: The lease document mentions two successive renewal terms of one year each.
2025-06-17 19:59:37,018 - flask.app - INFO - Pipeline output: --------------------------------------------------
2025-06-17 19:59:37,018 - flask.app - INFO - Pipeline output: 
2025-06-17 19:59:37,018 - flask.app - INFO - Pipeline output: 13. ### Holdover Penalties
2025-06-17 19:59:37,018 - flask.app - INFO - Pipeline output: Category: ### Holdover Penalties
2025-06-17 19:59:37,018 - flask.app - INFO - Pipeline output: Description: The lease document does not mention any holdover penalties.
2025-06-17 19:59:37,018 - flask.app - INFO - Pipeline output: --------------------------------------------------
2025-06-17 19:59:37,018 - flask.app - INFO - Pipeline output: 
2025-06-17 19:59:37,018 - flask.app - INFO - Pipeline output: 14. ### Sublease Restrictions
2025-06-17 19:59:37,018 - flask.app - INFO - Pipeline output: Category: ### Sublease Restrictions
2025-06-17 19:59:37,019 - flask.app - INFO - Pipeline output: Description: The lease document does not contain any sublease restrictions.
2025-06-17 19:59:37,019 - flask.app - INFO - Pipeline output: --------------------------------------------------
2025-06-17 19:59:37,019 - flask.app - INFO - Pipeline output: 
2025-06-17 19:59:37,019 - flask.app - INFO - Pipeline output: 15. ### Assignment Clauses
2025-06-17 19:59:37,019 - flask.app - INFO - Pipeline output: Category: ### Assignment Clauses
2025-06-17 19:59:37,019 - flask.app - INFO - Pipeline output: Description: The lease document does not include any assignment clauses.
2025-06-17 19:59:37,019 - flask.app - INFO - Pipeline output: --------------------------------------------------
2025-06-17 20:06:44,845 - flask.app - INFO - Received file upload request
2025-06-17 20:06:47,142 - flask.app - INFO - Received indexing request
2025-06-17 20:07:07,022 - flask.app - INFO - Received streaming lease flags extraction request using updated pipeline
2025-06-17 20:07:07,023 - flask.app - ERROR - Error in streaming pipeline: extract_risk_flags() takes 0 positional arguments but 1 was given
2025-06-17 20:07:47,493 - flask.app - INFO - Received file upload request
2025-06-17 20:07:47,510 - flask.app - INFO - Received indexing request
2025-06-17 20:08:16,432 - flask.app - INFO - Received streaming lease flags extraction request using updated pipeline
2025-06-17 20:08:16,435 - flask.app - ERROR - Error in streaming pipeline: extract_risk_flags() takes 0 positional arguments but 1 was given
2025-06-17 20:12:53,093 - flask.app - INFO - Received file upload request
2025-06-17 20:12:53,119 - flask.app - INFO - Received indexing request
2025-06-17 20:13:09,672 - flask.app - INFO - Received streaming lease flags extraction request using updated pipeline
2025-06-17 20:14:52,440 - flask.app - INFO - Received file upload request
2025-06-17 20:14:52,463 - flask.app - INFO - Received risk flags extraction request
2025-06-17 20:14:52,464 - flask.app - INFO - Received lease summary extraction request
2025-06-17 20:14:52,468 - flask.app - INFO - Received asset type classification request
2025-06-18 23:12:13,380 - flask.app - INFO - Received update extraction agent request
2025-06-18 23:12:13,383 - flask.app - INFO - Schema type requested: lease_summary
2025-06-18 23:12:13,383 - flask.app - INFO - Config provided: None
2025-06-18 23:12:13,383 - flask.app - INFO - Updating SUMMARY agent: atlas-summary-extractor
2025-06-18 23:14:06,060 - flask.app - INFO - Received update extraction agent request
2025-06-18 23:14:06,061 - flask.app - INFO - Schema type requested: lease_summary
2025-06-18 23:14:06,061 - flask.app - INFO - Config provided: None
2025-06-18 23:14:06,061 - flask.app - INFO - Updating SUMMARY agent: atlas-summary-extractor
2025-06-18 23:15:24,369 - flask.app - INFO - Received update extraction agent request
2025-06-18 23:15:24,371 - flask.app - INFO - Schema type requested: risk_flags
2025-06-18 23:15:24,371 - flask.app - INFO - Config provided: None
2025-06-18 23:15:24,371 - flask.app - INFO - Updating FLAGS agent: atlas-lease-flags
2025-06-25 14:22:05,372 - flask.app - INFO - Received update extraction agent request
2025-06-25 14:22:05,373 - flask.app - INFO - Schema type requested: lease_summary
2025-06-25 14:22:05,373 - flask.app - INFO - Config provided: {'extraction_target': 'PER_DOC', 'extraction_mode': 'BALANCED', 'system_prompt': None, 'use_reasoning': True, 'cite_sources': False}
2025-06-25 14:22:05,373 - flask.app - INFO - Updating SUMMARY agent: atlas-summary-extractor
2025-06-25 14:30:33,409 - flask.app - INFO - Received file upload request
2025-06-25 14:30:33,523 - flask.app - INFO - Received risk flags extraction request
2025-06-25 14:30:33,545 - flask.app - INFO - Received lease summary extraction request
2025-06-25 14:30:33,563 - flask.app - INFO - Received asset type classification request
2025-06-25 14:36:08,384 - flask.app - INFO - Received file upload request
2025-06-25 14:36:08,414 - flask.app - INFO - Received risk flags extraction request
2025-06-25 14:36:08,417 - flask.app - INFO - Received lease summary extraction request
2025-06-25 14:36:08,428 - flask.app - INFO - Received asset type classification request
2025-06-30 14:51:09,877 - flask.app - INFO - Received file upload request
2025-06-30 14:51:11,371 - flask.app - INFO - Received risk flags extraction request
2025-06-30 14:51:11,375 - flask.app - INFO - Received lease summary extraction request
2025-06-30 14:51:11,376 - flask.app - INFO - Received asset type classification request
2025-06-30 14:56:28,075 - flask.app - INFO - Received file upload request
2025-06-30 14:56:28,862 - flask.app - INFO - Received risk flags extraction request
2025-06-30 14:56:28,862 - flask.app - INFO - Received lease summary extraction request
2025-06-30 14:56:28,871 - flask.app - INFO - Received asset type classification request
2025-08-01 01:38:07,699 - flask.app - INFO - Received document registration request
2025-08-01 01:38:07,726 - flask.app - ERROR - Database error during document registration: (psycopg2.OperationalError) SSL connection has been closed unexpectedly

[SQL: INSERT INTO documents (id, title, file_path, user_id, sharing_type, asset_type, status, ownership_type, license_fee, revenue_generated, shared_emails, extracted_data, risk_flags, created_at, updated_at) VALUES (%(id)s, %(title)s, %(file_path)s, %(user_id)s, %(sharing_type)s, %(asset_type)s, %(status)s, %(ownership_type)s, %(license_fee)s, %(revenue_generated)s, %(shared_emails)s::JSONB, %(extracted_data)s::JSONB, %(risk_flags)s::JSONB, %(created_at)s, %(updated_at)s)]
[parameters: {'id': 'dcc0b597-b2bf-46be-a261-995a5a9e7325', 'title': 'Sample Office Lease.pdf', 'file_path': '/mock/Sample Office Lease.pdf', 'user_id': 'THikdZ0EKIiLj53CYGjnAfnGqdrpeHrn', 'sharing_type': 'firm', 'asset_type': 'Office', 'status': 'active', 'ownership_type': 'owned', 'license_fee': 0, 'revenue_generated': 0.0, 'shared_emails': '[]', 'extracted_data': '{"tenant_info": {"tenant": "TechStart Inc.", "suite_number": "Suite 401", "leased_sqft": 5500}, "property_info": {"property_address": "123 Business P ... (885 characters truncated) ... : false, "stop_year": null}]}}, "sourceData": {"field_metadata": {"tenant_info": {}, "property_info": {}, "lease_dates": {}, "financial_terms": {}}}}', 'risk_flags': '[{"title": "Personal Guarantee Required", "severity": "high", "page": 12, "clause": "Section 8.2 - Guaranty Provisions", "reason": "Lease requires pe ... (602 characters truncated) ... bletting provisions that require landlord consent", "recommendation": "Seek more flexible assignment rights for affiliates and qualified assignees"}]', 'created_at': datetime.datetime(2025, 8, 1, 8, 38, 7, 724738), 'updated_at': datetime.datetime(2025, 8, 1, 8, 38, 7, 724748)}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-08-01 01:38:26,721 - flask.app - INFO - Fetching documents for user: THikdZ0EKIiLj53CYGjnAfnGqdrpeHrn
2025-08-01 01:38:26,723 - flask.app - INFO - Fetching documents for user: THikdZ0EKIiLj53CYGjnAfnGqdrpeHrn
2025-08-01 01:46:47,435 - flask.app - INFO - Received file upload request
2025-08-01 01:46:47,760 - flask.app - INFO - Received risk flags extraction request
2025-08-01 01:46:47,762 - flask.app - INFO - Received lease summary extraction request
2025-08-01 01:46:47,763 - flask.app - INFO - Received asset type classification request
2025-08-04 21:44:29,129 - flask.app - INFO - Received user sync request
2025-08-04 21:44:29,137 - flask.app - INFO - Received user sync request
2025-08-04 21:44:29,475 - flask.app - INFO - Fetching documents for user: THikdZ0EKIiLj53CYGjnAfnGqdrpeHrn
2025-08-04 21:44:30,040 - flask.app - INFO - Fetching documents for user: THikdZ0EKIiLj53CYGjnAfnGqdrpeHrn
2025-08-04 21:44:44,635 - flask.app - INFO - Received user sync request
2025-08-04 21:44:44,636 - flask.app - INFO - Fetching documents for user: THikdZ0EKIiLj53CYGjnAfnGqdrpeHrn
2025-08-04 21:44:44,946 - flask.app - INFO - Fetching documents for user: THikdZ0EKIiLj53CYGjnAfnGqdrpeHrn
2025-08-04 21:44:45,112 - flask.app - INFO - Received user sync request
2025-08-04 21:44:45,112 - flask.app - INFO - Fetching documents for user: THikdZ0EKIiLj53CYGjnAfnGqdrpeHrn
2025-08-04 21:44:45,826 - flask.app - INFO - Fetching documents for user: THikdZ0EKIiLj53CYGjnAfnGqdrpeHrn
2025-08-04 21:45:22,215 - flask.app - INFO - Creating license offer for document 6fbf12bb-897a-4ba4-b3b2-96c0745214b5
2025-08-04 21:45:22,869 - flask.app - INFO - Fetching activities for document: 6fbf12bb-897a-4ba4-b3b2-96c0745214b5
2025-08-04 21:51:04,390 - flask.app - INFO - Creating license offer for document 6fbf12bb-897a-4ba4-b3b2-96c0745214b5
2025-08-04 21:51:06,395 - flask.app - INFO - Fetching activities for document: 6fbf12bb-897a-4ba4-b3b2-96c0745214b5
2025-08-04 21:51:22,242 - flask.app - INFO - Received document registration request
2025-08-04 21:51:23,985 - flask.app - INFO - Document registered successfully: f154921a-db86-401e-9fb2-dec0cc4c8b08
2025-08-04 21:51:23,996 - flask.app - INFO - Sharing document 6fbf12bb-897a-4ba4-b3b2-96c0745214b5 with external parties
2025-08-04 21:51:24,614 - flask.app - INFO - Fetching activities for document: 6fbf12bb-897a-4ba4-b3b2-96c0745214b5
2025-08-04 21:51:31,317 - flask.app - INFO - Fetching activities for document: 6fbf12bb-897a-4ba4-b3b2-96c0745214b5
2025-08-04 21:51:48,815 - flask.app - INFO - Publishing document 6fbf12bb-897a-4ba4-b3b2-96c0745214b5 to data co-op marketplace
2025-08-04 21:51:49,434 - flask.app - INFO - Fetching activities for document: 6fbf12bb-897a-4ba4-b3b2-96c0745214b5
2025-08-04 21:51:55,641 - flask.app - INFO - Fetching activities for document: 6fbf12bb-897a-4ba4-b3b2-96c0745214b5
2025-08-06 00:09:39,312 - flask.app - INFO - Received user sync request
2025-08-06 00:09:39,616 - flask.app - INFO - Received user sync request
2025-08-06 00:09:40,186 - flask.app - INFO - Fetching documents for user: THikdZ0EKIiLj53CYGjnAfnGqdrpeHrn
2025-08-06 00:09:43,130 - flask.app - INFO - Fetching documents for user: THikdZ0EKIiLj53CYGjnAfnGqdrpeHrn
2025-08-07 17:42:08,922 - flask.app - INFO - Received user sync request
2025-08-07 17:42:08,931 - flask.app - INFO - Received user sync request
2025-08-07 17:42:09,244 - flask.app - INFO - Fetching documents for user: uw5I716vuuxmuIUeS0rnjbNTDFP9MoFI
2025-08-07 17:42:09,633 - flask.app - INFO - Fetching documents for user: uw5I716vuuxmuIUeS0rnjbNTDFP9MoFI
2025-08-07 17:52:49,872 - flask.app - INFO - Received user sync request
2025-08-07 17:52:49,886 - flask.app - INFO - Received user sync request
2025-08-07 17:52:50,615 - flask.app - INFO - Fetching documents for user: uw5I716vuuxmuIUeS0rnjbNTDFP9MoFI
2025-08-07 17:52:50,618 - flask.app - INFO - Fetching documents for user: uw5I716vuuxmuIUeS0rnjbNTDFP9MoFI
2025-08-07 17:56:48,937 - flask.app - INFO - Received user sync request
2025-08-07 17:56:48,937 - flask.app - INFO - Received user sync request
2025-08-07 17:56:49,241 - flask.app - INFO - Fetching documents for user: uw5I716vuuxmuIUeS0rnjbNTDFP9MoFI
2025-08-07 17:56:49,255 - flask.app - INFO - Fetching documents for user: uw5I716vuuxmuIUeS0rnjbNTDFP9MoFI
2025-08-12 20:31:07,466 - flask.app - WARNING - Index server unavailable: digest sent was rejected. Retrying in 5s...
2025-08-12 20:32:20,896 - flask.app - WARNING - Index server unavailable: digest sent was rejected. Retrying in 5s...
2025-08-12 20:32:33,928 - flask.app - WARNING - Index server unavailable: digest sent was rejected. Retrying in 5s...
2025-08-12 20:32:46,958 - flask.app - WARNING - Index server unavailable: digest sent was rejected. Retrying in 5s...
2025-08-12 20:32:59,985 - flask.app - WARNING - Index server unavailable: digest sent was rejected. Retrying in 5s...
2025-08-14 13:23:07,936 - flask.app - INFO - Connected to index server
2025-08-14 13:23:14,947 - flask.app - INFO - Received user sync request
2025-08-14 13:23:14,947 - flask.app - INFO - Received user sync request
2025-08-14 13:23:16,657 - flask.app - INFO - Received user sync request
2025-08-14 13:23:16,657 - flask.app - INFO - Received user sync request
2025-08-14 13:23:16,962 - flask.app - INFO - Received document registration request
2025-08-14 13:23:16,964 - flask.app - INFO - Received document registration request
2025-08-14 13:23:18,262 - flask.app - INFO - Document registered successfully: 00a03d2e-d399-4a3e-95f9-9e2ef2232aa7
2025-08-14 13:23:18,262 - flask.app - INFO - Document registered successfully: 9c68f65e-2a45-49b8-b9fb-8e6f84c8d429
2025-08-14 13:23:18,267 - flask.app - INFO - Fetching documents for user: uw5I716vuuxmuIUeS0rnjbNTDFP9MoFI
2025-08-14 13:23:18,268 - flask.app - INFO - Fetching documents for user: uw5I716vuuxmuIUeS0rnjbNTDFP9MoFI
2025-08-14 13:23:23,844 - flask.app - INFO - Received file upload request
2025-08-14 13:23:23,860 - flask.app - INFO - Received risk flags extraction request
2025-08-14 13:23:23,863 - flask.app - INFO - Received lease summary extraction request
2025-08-14 13:23:23,865 - flask.app - INFO - Received asset type classification request
2025-08-14 13:27:30,859 - flask.app - INFO - Received document registration request
2025-08-14 13:27:32,110 - flask.app - INFO - Document registered successfully: 62b5868c-dae6-47da-8f96-c684b39c222a
2025-08-14 13:28:16,079 - flask.app - INFO - Received document registration request
2025-08-14 13:28:17,325 - flask.app - INFO - Document registered successfully: bab919de-f616-4cc6-bf76-40abdfc87060
2025-08-14 13:28:40,600 - flask.app - INFO - Received user sync request
2025-08-14 13:28:40,892 - flask.app - INFO - Fetching documents for user: uw5I716vuuxmuIUeS0rnjbNTDFP9MoFI
2025-08-14 13:28:41,053 - flask.app - INFO - Received user sync request
2025-08-14 13:28:41,341 - flask.app - INFO - Fetching documents for user: uw5I716vuuxmuIUeS0rnjbNTDFP9MoFI
2025-08-14 13:28:49,499 - flask.app - INFO - Fetching document: bab919de-f616-4cc6-bf76-40abdfc87060
2025-08-14 13:28:49,500 - flask.app - INFO - Fetching document: bab919de-f616-4cc6-bf76-40abdfc87060
2025-08-14 13:28:50,140 - flask.app - INFO - Getting sharing state for document: bab919de-f616-4cc6-bf76-40abdfc87060
2025-08-14 13:28:50,141 - flask.app - INFO - Getting sharing state for document: bab919de-f616-4cc6-bf76-40abdfc87060
2025-08-14 13:28:50,141 - flask.app - INFO - Fetching activities for document: bab919de-f616-4cc6-bf76-40abdfc87060
2025-08-14 13:28:50,141 - flask.app - INFO - Fetching activities for document: bab919de-f616-4cc6-bf76-40abdfc87060
2025-08-14 13:33:22,423 - flask.app - INFO - Received user sync request
2025-08-14 13:33:22,427 - flask.app - INFO - Received user sync request
2025-08-14 13:33:22,727 - flask.app - INFO - Fetching documents for user: uw5I716vuuxmuIUeS0rnjbNTDFP9MoFI
2025-08-14 13:33:22,734 - flask.app - INFO - Fetching documents for user: uw5I716vuuxmuIUeS0rnjbNTDFP9MoFI
2025-08-14 13:34:01,812 - flask.app - INFO - Received file upload request
2025-08-14 13:34:01,834 - flask.app - INFO - Received risk flags extraction request
2025-08-14 13:34:01,839 - flask.app - INFO - Received lease summary extraction request
2025-08-14 13:34:01,841 - flask.app - INFO - Received asset type classification request
2025-08-14 13:44:18,319 - flask.app - INFO - Connected to index server
2025-08-14 13:44:47,794 - flask.app - INFO - Received file upload request
2025-08-14 13:44:47,817 - flask.app - INFO - Received risk flags extraction request
2025-08-14 13:44:47,821 - flask.app - INFO - Received lease summary extraction request
2025-08-14 13:44:47,827 - flask.app - INFO - Received asset type classification request
2025-08-14 13:44:47,828 - flask.app - INFO - Starting asset type classification for: uploaded_documents/2019-2022-Lease-Agreement-TETCO-Signed-tiny.pdf
2025-08-14 13:45:01,915 - flask.app - INFO - Asset type classification completed: office (confidence: 0.95)
2025-08-14 13:48:06,820 - flask.app - INFO - Received file upload request
2025-08-14 13:48:06,837 - flask.app - INFO - Received risk flags extraction request
2025-08-14 13:48:06,838 - flask.app - INFO - Received lease summary extraction request
2025-08-14 13:48:06,839 - flask.app - INFO - Received asset type classification request
2025-08-14 13:48:06,840 - flask.app - INFO - Starting asset type classification for: uploaded_documents/Commercial_Sublease_TXR_2116_716_S._Alamo_St.pdf
2025-08-14 13:48:45,140 - flask.app - INFO - Asset type classification completed: mixed_use (confidence: 0.95)
2025-08-14 13:49:40,936 - flask.app - INFO - Received document registration request
2025-08-14 13:49:43,354 - flask.app - INFO - Document registered successfully: e72b652c-5f76-4cb5-9c10-54d46dc8e559
2025-08-14 13:49:56,361 - flask.app - INFO - Received document registration request
2025-08-14 13:49:57,609 - flask.app - INFO - Document registered successfully: 4b9fc01f-86f6-4c32-979c-4ea97e37b2b8
2025-08-14 13:50:23,330 - flask.app - INFO - Fetching document: 4b9fc01f-86f6-4c32-979c-4ea97e37b2b8
2025-08-14 13:50:23,332 - flask.app - INFO - Fetching document: 4b9fc01f-86f6-4c32-979c-4ea97e37b2b8
2025-08-14 13:50:23,505 - flask.app - INFO - Received user sync request
2025-08-14 13:50:23,952 - flask.app - INFO - Received user sync request
2025-08-14 13:50:24,013 - flask.app - INFO - Fetching activities for document: 4b9fc01f-86f6-4c32-979c-4ea97e37b2b8
2025-08-14 13:50:24,013 - flask.app - INFO - Fetching activities for document: 4b9fc01f-86f6-4c32-979c-4ea97e37b2b8
2025-08-14 13:50:24,014 - flask.app - INFO - Getting sharing state for document: 4b9fc01f-86f6-4c32-979c-4ea97e37b2b8
2025-08-14 13:50:24,014 - flask.app - INFO - Getting sharing state for document: 4b9fc01f-86f6-4c32-979c-4ea97e37b2b8
2025-08-14 13:50:24,166 - flask.app - INFO - Fetching documents for user: uw5I716vuuxmuIUeS0rnjbNTDFP9MoFI
2025-08-14 13:50:24,249 - flask.app - INFO - Fetching documents for user: uw5I716vuuxmuIUeS0rnjbNTDFP9MoFI
2025-09-09 13:45:44,792 - flask.app - INFO - Connected to index server
2025-09-09 13:47:08,545 - flask.app - INFO - Received user sync request
2025-09-09 13:47:08,845 - flask.app - INFO - Received user sync request
2025-09-09 13:47:10,165 - flask.app - INFO - Fetching documents for user: uw5I716vuuxmuIUeS0rnjbNTDFP9MoFI
2025-09-09 13:47:12,870 - flask.app - INFO - Fetching documents for user: uw5I716vuuxmuIUeS0rnjbNTDFP9MoFI
2025-09-09 13:55:55,000 - flask.app - INFO - Received user sync request
2025-09-09 13:55:55,160 - flask.app - INFO - Received user sync request
2025-09-09 13:55:55,702 - flask.app - INFO - Fetching documents for user: uw5I716vuuxmuIUeS0rnjbNTDFP9MoFI
2025-09-09 13:55:58,138 - flask.app - INFO - Fetching documents for user: uw5I716vuuxmuIUeS0rnjbNTDFP9MoFI
2025-09-15 11:52:19,859 - flask.app - INFO - Connected to index server
2025-09-15 14:56:55,040 - flask.app - INFO - Connected to index server
2025-09-15 15:05:42,340 - flask.app - INFO - Checking Google Drive auth status
2025-09-15 15:05:55,946 - flask.app - INFO - Generating Google Drive auth URL
2025-09-15 15:29:14,222 - flask.app - INFO - Connected to index server
2025-09-15 15:30:30,648 - flask.app - INFO - Received user sync request
2025-09-15 15:30:30,780 - flask.app - ERROR - Database error during user sync: (psycopg2.OperationalError) connection to server at "localhost" (::1), port 5432 failed: FATAL:  role "username" does not exist

(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-09-15 15:30:30,784 - flask.app - INFO - Fetching documents for user: uw5I716vuuxmuIUeS0rnjbNTDFP9MoFI
2025-09-15 15:30:30,789 - flask.app - ERROR - Unhandled exception
Traceback (most recent call last):
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 3301, in raw_connection
    return self.pool.connect()
           ~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/impl.py", line 177, in _do_get
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/impl.py", line 175, in _do_get
    return self._create_connection()
           ~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 388, in _create_connection
    return _ConnectionRecord(self)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 673, in __init__
    self.__connect()
    ~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 899, in __connect
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 895, in __connect
    self.dbapi_connection = connection = pool._invoke_creator(self)
                                         ~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/create.py", line 661, in connect
    return dialect.connect(*cargs, **cparams)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 629, in connect
    return self.loaded_dbapi.connect(*cargs, **cparams)  # type: ignore[no-any-return]  # NOQA: E501
           ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/psycopg2/__init__.py", line 122, in connect
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)
psycopg2.OperationalError: connection to server at "localhost" (::1), port 5432 failed: FATAL:  role "username" does not exist


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/flask_server.py", line 1204, in get_user_documents
    documents = db_manager.get_user_documents(user_id)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/database.py", line 293, in get_user_documents
    return session.query(Document).filter(Document.user_id == user_id).order_by(Document.created_at.desc()).all()
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/orm/query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/orm/query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 1189, in _connection_for_bind
    conn = bind.connect()
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 3277, in connect
    return self._connection_cls(self)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 145, in __init__
    Connection._handle_dbapi_exception_noconnection(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        err, dialect, engine
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 2440, in _handle_dbapi_exception_noconnection
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 3301, in raw_connection
    return self.pool.connect()
           ~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/impl.py", line 177, in _do_get
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/impl.py", line 175, in _do_get
    return self._create_connection()
           ~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 388, in _create_connection
    return _ConnectionRecord(self)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 673, in __init__
    self.__connect()
    ~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 899, in __connect
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 895, in __connect
    self.dbapi_connection = connection = pool._invoke_creator(self)
                                         ~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/create.py", line 661, in connect
    return dialect.connect(*cargs, **cparams)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 629, in connect
    return self.loaded_dbapi.connect(*cargs, **cparams)  # type: ignore[no-any-return]  # NOQA: E501
           ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/psycopg2/__init__.py", line 122, in connect
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)
sqlalchemy.exc.OperationalError: (psycopg2.OperationalError) connection to server at "localhost" (::1), port 5432 failed: FATAL:  role "username" does not exist

(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-09-15 15:30:31,052 - flask.app - INFO - Received user sync request
2025-09-15 15:30:31,055 - flask.app - ERROR - Database error during user sync: (psycopg2.OperationalError) connection to server at "localhost" (::1), port 5432 failed: FATAL:  role "username" does not exist

(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-09-15 15:30:31,057 - flask.app - INFO - Fetching documents for user: uw5I716vuuxmuIUeS0rnjbNTDFP9MoFI
2025-09-15 15:30:31,060 - flask.app - ERROR - Unhandled exception
Traceback (most recent call last):
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 3301, in raw_connection
    return self.pool.connect()
           ~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/impl.py", line 177, in _do_get
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/impl.py", line 175, in _do_get
    return self._create_connection()
           ~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 388, in _create_connection
    return _ConnectionRecord(self)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 673, in __init__
    self.__connect()
    ~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 899, in __connect
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 895, in __connect
    self.dbapi_connection = connection = pool._invoke_creator(self)
                                         ~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/create.py", line 661, in connect
    return dialect.connect(*cargs, **cparams)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 629, in connect
    return self.loaded_dbapi.connect(*cargs, **cparams)  # type: ignore[no-any-return]  # NOQA: E501
           ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/psycopg2/__init__.py", line 122, in connect
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)
psycopg2.OperationalError: connection to server at "localhost" (::1), port 5432 failed: FATAL:  role "username" does not exist


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/flask_server.py", line 1204, in get_user_documents
    documents = db_manager.get_user_documents(user_id)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/database.py", line 293, in get_user_documents
    return session.query(Document).filter(Document.user_id == user_id).order_by(Document.created_at.desc()).all()
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/orm/query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/orm/query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 1189, in _connection_for_bind
    conn = bind.connect()
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 3277, in connect
    return self._connection_cls(self)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 145, in __init__
    Connection._handle_dbapi_exception_noconnection(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        err, dialect, engine
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 2440, in _handle_dbapi_exception_noconnection
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 3301, in raw_connection
    return self.pool.connect()
           ~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/impl.py", line 177, in _do_get
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/impl.py", line 175, in _do_get
    return self._create_connection()
           ~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 388, in _create_connection
    return _ConnectionRecord(self)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 673, in __init__
    self.__connect()
    ~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 899, in __connect
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 895, in __connect
    self.dbapi_connection = connection = pool._invoke_creator(self)
                                         ~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/create.py", line 661, in connect
    return dialect.connect(*cargs, **cparams)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 629, in connect
    return self.loaded_dbapi.connect(*cargs, **cparams)  # type: ignore[no-any-return]  # NOQA: E501
           ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/psycopg2/__init__.py", line 122, in connect
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)
sqlalchemy.exc.OperationalError: (psycopg2.OperationalError) connection to server at "localhost" (::1), port 5432 failed: FATAL:  role "username" does not exist

(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-09-16 12:28:48,650 - flask.app - INFO - Connected to index server
2025-09-16 12:30:36,898 - flask.app - INFO - Received key terms extraction request
2025-09-16 12:30:53,358 - flask.app - INFO - Received streaming key terms extraction request
2025-09-16 12:30:53,360 - flask.app - ERROR - Error in stream generator
Traceback (most recent call last):
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/flask_server.py", line 537, in generate
    if request.method == "POST":
       ^^^^^^^^^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/werkzeug/local.py", line 318, in __get__
    obj = instance._get_current_object()
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/werkzeug/local.py", line 519, in _get_current_object
    raise RuntimeError(unbound_message) from None
RuntimeError: Working outside of request context.

This typically means that you attempted to use functionality that needed
an active HTTP request. Consult the documentation on testing for
information about how to avoid this problem.
2025-09-16 12:36:43,192 - flask.app - INFO - Received key terms extraction request
2025-09-16 12:36:59,145 - flask.app - INFO - Received streaming key terms extraction request
2025-09-16 12:36:59,146 - flask.app - ERROR - Error in stream generator
Traceback (most recent call last):
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/flask_server.py", line 537, in generate
    if request.method == "POST":
       ^^^^^^^^^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/werkzeug/local.py", line 318, in __get__
    obj = instance._get_current_object()
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/werkzeug/local.py", line 519, in _get_current_object
    raise RuntimeError(unbound_message) from None
RuntimeError: Working outside of request context.

This typically means that you attempted to use functionality that needed
an active HTTP request. Consult the documentation on testing for
information about how to avoid this problem.
2025-09-16 12:39:01,496 - flask.app - INFO - Received key terms extraction request
2025-09-16 12:39:58,365 - flask.app - INFO - Connected to index server
2025-09-16 12:41:09,913 - flask.app - INFO - Connected to index server
2025-09-16 12:41:16,706 - flask.app - INFO - Received key terms extraction request
2025-09-16 12:42:06,789 - flask.app - INFO - Received streaming key terms extraction request
2025-09-16 12:42:06,792 - flask.app - ERROR - Error in stream generator
Traceback (most recent call last):
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/flask_server.py", line 537, in generate
    if request.method == "POST":
       ^^^^^^^^^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/werkzeug/local.py", line 318, in __get__
    obj = instance._get_current_object()
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/werkzeug/local.py", line 519, in _get_current_object
    raise RuntimeError(unbound_message) from None
RuntimeError: Working outside of request context.

This typically means that you attempted to use functionality that needed
an active HTTP request. Consult the documentation on testing for
information about how to avoid this problem.
2025-09-16 12:42:45,310 - flask.app - INFO - Connected to index server
2025-09-16 12:43:45,004 - flask.app - INFO - Received key terms extraction request
2025-09-16 12:44:27,495 - flask.app - INFO - Received streaming key terms extraction request
2025-09-16 12:44:27,496 - flask.app - ERROR - Error in stream generator
Traceback (most recent call last):
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/flask_server.py", line 537, in generate
    if request.method == "POST":
       ^^^^^^^^^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/werkzeug/local.py", line 318, in __get__
    obj = instance._get_current_object()
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/werkzeug/local.py", line 519, in _get_current_object
    raise RuntimeError(unbound_message) from None
RuntimeError: Working outside of request context.

This typically means that you attempted to use functionality that needed
an active HTTP request. Consult the documentation on testing for
information about how to avoid this problem.
2025-09-16 12:52:06,885 - flask.app - INFO - Connected to index server
2025-09-16 12:53:10,465 - flask.app - INFO - Received key terms extraction request
2025-09-16 12:54:06,644 - flask.app - INFO - Received streaming key terms extraction request
2025-09-16 12:54:06,645 - flask.app - ERROR - Error in stream generator
Traceback (most recent call last):
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/flask_server.py", line 537, in generate
    if request.method == "POST":
       ^^^^^^^^^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/werkzeug/local.py", line 318, in __get__
    obj = instance._get_current_object()
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/werkzeug/local.py", line 519, in _get_current_object
    raise RuntimeError(unbound_message) from None
RuntimeError: Working outside of request context.

This typically means that you attempted to use functionality that needed
an active HTTP request. Consult the documentation on testing for
information about how to avoid this problem.
2025-09-16 13:01:53,488 - flask.app - INFO - Checking Google Drive auth status
2025-09-16 13:01:53,493 - flask.app - INFO - Checking Google Drive auth status
2025-09-16 13:01:53,494 - flask.app - INFO - Checking Google Drive auth status
2025-09-16 13:01:57,175 - flask.app - INFO - Received user sync request
2025-09-16 13:01:57,312 - flask.app - ERROR - Database error during user sync: (psycopg2.OperationalError) connection to server at "localhost" (::1), port 5432 failed: FATAL:  role "username" does not exist

(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-09-16 13:01:57,318 - flask.app - INFO - Fetching documents for user: uw5I716vuuxmuIUeS0rnjbNTDFP9MoFI
2025-09-16 13:01:57,321 - flask.app - ERROR - Unhandled exception
Traceback (most recent call last):
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 3301, in raw_connection
    return self.pool.connect()
           ~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/impl.py", line 177, in _do_get
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/impl.py", line 175, in _do_get
    return self._create_connection()
           ~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 388, in _create_connection
    return _ConnectionRecord(self)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 673, in __init__
    self.__connect()
    ~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 899, in __connect
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 895, in __connect
    self.dbapi_connection = connection = pool._invoke_creator(self)
                                         ~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/create.py", line 661, in connect
    return dialect.connect(*cargs, **cparams)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 629, in connect
    return self.loaded_dbapi.connect(*cargs, **cparams)  # type: ignore[no-any-return]  # NOQA: E501
           ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/psycopg2/__init__.py", line 122, in connect
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)
psycopg2.OperationalError: connection to server at "localhost" (::1), port 5432 failed: FATAL:  role "username" does not exist


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/flask_server.py", line 1175, in get_user_documents
    documents = db_manager.get_user_documents(user_id)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/database.py", line 293, in get_user_documents
    return session.query(Document).filter(Document.user_id == user_id).order_by(Document.created_at.desc()).all()
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/orm/query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/orm/query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 1189, in _connection_for_bind
    conn = bind.connect()
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 3277, in connect
    return self._connection_cls(self)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 145, in __init__
    Connection._handle_dbapi_exception_noconnection(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        err, dialect, engine
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 2440, in _handle_dbapi_exception_noconnection
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 3301, in raw_connection
    return self.pool.connect()
           ~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/impl.py", line 177, in _do_get
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/impl.py", line 175, in _do_get
    return self._create_connection()
           ~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 388, in _create_connection
    return _ConnectionRecord(self)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 673, in __init__
    self.__connect()
    ~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 899, in __connect
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 895, in __connect
    self.dbapi_connection = connection = pool._invoke_creator(self)
                                         ~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/create.py", line 661, in connect
    return dialect.connect(*cargs, **cparams)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 629, in connect
    return self.loaded_dbapi.connect(*cargs, **cparams)  # type: ignore[no-any-return]  # NOQA: E501
           ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/psycopg2/__init__.py", line 122, in connect
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)
sqlalchemy.exc.OperationalError: (psycopg2.OperationalError) connection to server at "localhost" (::1), port 5432 failed: FATAL:  role "username" does not exist

(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-09-16 13:01:57,483 - flask.app - INFO - Received user sync request
2025-09-16 13:01:57,485 - flask.app - ERROR - Database error during user sync: (psycopg2.OperationalError) connection to server at "localhost" (::1), port 5432 failed: FATAL:  role "username" does not exist

(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-09-16 13:01:57,489 - flask.app - INFO - Fetching documents for user: uw5I716vuuxmuIUeS0rnjbNTDFP9MoFI
2025-09-16 13:01:57,492 - flask.app - ERROR - Unhandled exception
Traceback (most recent call last):
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 3301, in raw_connection
    return self.pool.connect()
           ~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/impl.py", line 177, in _do_get
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/impl.py", line 175, in _do_get
    return self._create_connection()
           ~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 388, in _create_connection
    return _ConnectionRecord(self)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 673, in __init__
    self.__connect()
    ~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 899, in __connect
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 895, in __connect
    self.dbapi_connection = connection = pool._invoke_creator(self)
                                         ~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/create.py", line 661, in connect
    return dialect.connect(*cargs, **cparams)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 629, in connect
    return self.loaded_dbapi.connect(*cargs, **cparams)  # type: ignore[no-any-return]  # NOQA: E501
           ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/psycopg2/__init__.py", line 122, in connect
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)
psycopg2.OperationalError: connection to server at "localhost" (::1), port 5432 failed: FATAL:  role "username" does not exist


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/flask_server.py", line 1175, in get_user_documents
    documents = db_manager.get_user_documents(user_id)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/database.py", line 293, in get_user_documents
    return session.query(Document).filter(Document.user_id == user_id).order_by(Document.created_at.desc()).all()
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/orm/query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/orm/query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 1189, in _connection_for_bind
    conn = bind.connect()
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 3277, in connect
    return self._connection_cls(self)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 145, in __init__
    Connection._handle_dbapi_exception_noconnection(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        err, dialect, engine
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 2440, in _handle_dbapi_exception_noconnection
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 3301, in raw_connection
    return self.pool.connect()
           ~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/impl.py", line 177, in _do_get
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/impl.py", line 175, in _do_get
    return self._create_connection()
           ~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 388, in _create_connection
    return _ConnectionRecord(self)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 673, in __init__
    self.__connect()
    ~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 899, in __connect
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 895, in __connect
    self.dbapi_connection = connection = pool._invoke_creator(self)
                                         ~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/create.py", line 661, in connect
    return dialect.connect(*cargs, **cparams)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 629, in connect
    return self.loaded_dbapi.connect(*cargs, **cparams)  # type: ignore[no-any-return]  # NOQA: E501
           ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/psycopg2/__init__.py", line 122, in connect
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)
sqlalchemy.exc.OperationalError: (psycopg2.OperationalError) connection to server at "localhost" (::1), port 5432 failed: FATAL:  role "username" does not exist

(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-09-16 13:02:15,037 - flask.app - INFO - Generating Google Drive auth URL
2025-09-16 13:02:17,088 - flask.app - INFO - Checking Google Drive auth status
2025-09-16 13:08:47,199 - flask.app - INFO - Connected to index server
2025-09-16 13:08:59,892 - flask.app - INFO - Generating Google Drive auth URL
2025-09-16 13:09:04,948 - flask.app - INFO - Checking Google Drive auth status
2025-09-16 13:10:39,545 - flask.app - INFO - Generating Google Drive auth URL
2025-09-16 13:10:56,174 - flask.app - INFO - Handling Google Drive auth callback
2025-09-16 13:29:47,158 - flask.app - INFO - Generating Google Drive auth URL
2025-09-16 13:29:47,557 - flask.app - INFO - Checking Google Drive auth status
2025-09-16 13:29:54,820 - flask.app - INFO - Handling Google Drive auth callback
2025-09-16 13:37:47,716 - flask.app - INFO - Checking Google Drive auth status
2025-09-16 13:37:47,718 - flask.app - INFO - Checking Google Drive auth status
2025-09-16 13:37:47,721 - flask.app - INFO - Checking Google Drive auth status
2025-09-16 13:37:52,395 - flask.app - INFO - Received user sync request
2025-09-16 13:37:52,419 - flask.app - INFO - Received user sync request
2025-09-16 13:37:52,515 - flask.app - ERROR - Database error during user sync: (psycopg2.OperationalError) connection to server at "localhost" (::1), port 5432 failed: FATAL:  role "username" does not exist

(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-09-16 13:37:52,515 - flask.app - ERROR - Database error during user sync: (psycopg2.OperationalError) connection to server at "localhost" (::1), port 5432 failed: FATAL:  role "username" does not exist

(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-09-16 13:37:52,521 - flask.app - INFO - Fetching documents for user: uw5I716vuuxmuIUeS0rnjbNTDFP9MoFI
2025-09-16 13:37:52,523 - flask.app - INFO - Fetching documents for user: uw5I716vuuxmuIUeS0rnjbNTDFP9MoFI
2025-09-16 13:37:52,526 - flask.app - ERROR - Unhandled exception
Traceback (most recent call last):
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 3301, in raw_connection
    return self.pool.connect()
           ~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/impl.py", line 177, in _do_get
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/impl.py", line 175, in _do_get
    return self._create_connection()
           ~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 388, in _create_connection
    return _ConnectionRecord(self)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 673, in __init__
    self.__connect()
    ~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 899, in __connect
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 895, in __connect
    self.dbapi_connection = connection = pool._invoke_creator(self)
                                         ~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/create.py", line 661, in connect
    return dialect.connect(*cargs, **cparams)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 629, in connect
    return self.loaded_dbapi.connect(*cargs, **cparams)  # type: ignore[no-any-return]  # NOQA: E501
           ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/psycopg2/__init__.py", line 122, in connect
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)
psycopg2.OperationalError: connection to server at "localhost" (::1), port 5432 failed: FATAL:  role "username" does not exist


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/flask_server.py", line 1175, in get_user_documents
    documents = db_manager.get_user_documents(user_id)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/database.py", line 293, in get_user_documents
    return session.query(Document).filter(Document.user_id == user_id).order_by(Document.created_at.desc()).all()
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/orm/query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/orm/query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 1189, in _connection_for_bind
    conn = bind.connect()
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 3277, in connect
    return self._connection_cls(self)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 145, in __init__
    Connection._handle_dbapi_exception_noconnection(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        err, dialect, engine
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 2440, in _handle_dbapi_exception_noconnection
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 3301, in raw_connection
    return self.pool.connect()
           ~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/impl.py", line 177, in _do_get
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/impl.py", line 175, in _do_get
    return self._create_connection()
           ~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 388, in _create_connection
    return _ConnectionRecord(self)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 673, in __init__
    self.__connect()
    ~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 899, in __connect
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 895, in __connect
    self.dbapi_connection = connection = pool._invoke_creator(self)
                                         ~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/create.py", line 661, in connect
    return dialect.connect(*cargs, **cparams)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 629, in connect
    return self.loaded_dbapi.connect(*cargs, **cparams)  # type: ignore[no-any-return]  # NOQA: E501
           ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/psycopg2/__init__.py", line 122, in connect
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)
sqlalchemy.exc.OperationalError: (psycopg2.OperationalError) connection to server at "localhost" (::1), port 5432 failed: FATAL:  role "username" does not exist

(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-09-16 13:37:52,527 - flask.app - ERROR - Unhandled exception
Traceback (most recent call last):
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 3301, in raw_connection
    return self.pool.connect()
           ~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/impl.py", line 177, in _do_get
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/impl.py", line 175, in _do_get
    return self._create_connection()
           ~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 388, in _create_connection
    return _ConnectionRecord(self)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 673, in __init__
    self.__connect()
    ~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 899, in __connect
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 895, in __connect
    self.dbapi_connection = connection = pool._invoke_creator(self)
                                         ~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/create.py", line 661, in connect
    return dialect.connect(*cargs, **cparams)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 629, in connect
    return self.loaded_dbapi.connect(*cargs, **cparams)  # type: ignore[no-any-return]  # NOQA: E501
           ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/psycopg2/__init__.py", line 122, in connect
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)
psycopg2.OperationalError: connection to server at "localhost" (::1), port 5432 failed: FATAL:  role "username" does not exist


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/flask_server.py", line 1175, in get_user_documents
    documents = db_manager.get_user_documents(user_id)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/database.py", line 293, in get_user_documents
    return session.query(Document).filter(Document.user_id == user_id).order_by(Document.created_at.desc()).all()
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/orm/query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/orm/query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 1189, in _connection_for_bind
    conn = bind.connect()
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 3277, in connect
    return self._connection_cls(self)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 145, in __init__
    Connection._handle_dbapi_exception_noconnection(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        err, dialect, engine
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 2440, in _handle_dbapi_exception_noconnection
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 3301, in raw_connection
    return self.pool.connect()
           ~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/impl.py", line 177, in _do_get
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/impl.py", line 175, in _do_get
    return self._create_connection()
           ~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 388, in _create_connection
    return _ConnectionRecord(self)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 673, in __init__
    self.__connect()
    ~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 899, in __connect
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 895, in __connect
    self.dbapi_connection = connection = pool._invoke_creator(self)
                                         ~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/create.py", line 661, in connect
    return dialect.connect(*cargs, **cparams)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 629, in connect
    return self.loaded_dbapi.connect(*cargs, **cparams)  # type: ignore[no-any-return]  # NOQA: E501
           ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/psycopg2/__init__.py", line 122, in connect
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)
sqlalchemy.exc.OperationalError: (psycopg2.OperationalError) connection to server at "localhost" (::1), port 5432 failed: FATAL:  role "username" does not exist

(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-09-16 13:37:59,427 - flask.app - INFO - Getting Google Drive folder tree
2025-09-16 13:38:00,931 - flask.app - ERROR - Error getting folder tree: 'children'
2025-09-16 13:39:10,548 - flask.app - INFO - Checking Google Drive auth status
2025-09-16 13:39:14,209 - flask.app - INFO - Getting Google Drive folder tree
2025-09-16 13:39:15,234 - flask.app - ERROR - Error getting folder tree: 'children'
2025-09-16 13:39:37,154 - flask.app - INFO - Getting Google Drive folder tree
2025-09-16 13:39:38,117 - flask.app - ERROR - Error getting folder tree: 'children'
2025-09-16 13:41:43,053 - flask.app - INFO - Connected to index server
2025-09-16 13:41:45,581 - flask.app - INFO - Generating Google Drive auth URL
2025-09-16 13:41:52,870 - flask.app - INFO - Handling Google Drive auth callback
2025-09-16 13:45:44,470 - flask.app - INFO - Checking Google Drive auth status
2025-09-16 13:45:44,476 - flask.app - INFO - Checking Google Drive auth status
2025-09-16 13:45:44,480 - flask.app - INFO - Checking Google Drive auth status
2025-09-16 13:45:45,175 - flask.app - INFO - Received user sync request
2025-09-16 13:45:45,182 - flask.app - INFO - Received user sync request
2025-09-16 13:45:45,267 - flask.app - ERROR - Database error during user sync: (psycopg2.OperationalError) connection to server at "localhost" (::1), port 5432 failed: FATAL:  role "username" does not exist

(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-09-16 13:45:45,267 - flask.app - ERROR - Database error during user sync: (psycopg2.OperationalError) connection to server at "localhost" (::1), port 5432 failed: FATAL:  role "username" does not exist

(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-09-16 13:45:45,274 - flask.app - INFO - Fetching documents for user: uw5I716vuuxmuIUeS0rnjbNTDFP9MoFI
2025-09-16 13:45:45,275 - flask.app - INFO - Fetching documents for user: uw5I716vuuxmuIUeS0rnjbNTDFP9MoFI
2025-09-16 13:45:45,279 - flask.app - ERROR - Unhandled exception
Traceback (most recent call last):
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 3301, in raw_connection
    return self.pool.connect()
           ~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/impl.py", line 177, in _do_get
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/impl.py", line 175, in _do_get
    return self._create_connection()
           ~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 388, in _create_connection
    return _ConnectionRecord(self)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 673, in __init__
    self.__connect()
    ~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 899, in __connect
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 895, in __connect
    self.dbapi_connection = connection = pool._invoke_creator(self)
                                         ~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/create.py", line 661, in connect
    return dialect.connect(*cargs, **cparams)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 629, in connect
    return self.loaded_dbapi.connect(*cargs, **cparams)  # type: ignore[no-any-return]  # NOQA: E501
           ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/psycopg2/__init__.py", line 122, in connect
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)
psycopg2.OperationalError: connection to server at "localhost" (::1), port 5432 failed: FATAL:  role "username" does not exist


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/flask_server.py", line 1175, in get_user_documents
    documents = db_manager.get_user_documents(user_id)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/database.py", line 293, in get_user_documents
    return session.query(Document).filter(Document.user_id == user_id).order_by(Document.created_at.desc()).all()
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/orm/query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/orm/query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 1189, in _connection_for_bind
    conn = bind.connect()
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 3277, in connect
    return self._connection_cls(self)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 145, in __init__
    Connection._handle_dbapi_exception_noconnection(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        err, dialect, engine
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 2440, in _handle_dbapi_exception_noconnection
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 3301, in raw_connection
    return self.pool.connect()
           ~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/impl.py", line 177, in _do_get
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/impl.py", line 175, in _do_get
    return self._create_connection()
           ~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 388, in _create_connection
    return _ConnectionRecord(self)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 673, in __init__
    self.__connect()
    ~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 899, in __connect
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 895, in __connect
    self.dbapi_connection = connection = pool._invoke_creator(self)
                                         ~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/create.py", line 661, in connect
    return dialect.connect(*cargs, **cparams)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 629, in connect
    return self.loaded_dbapi.connect(*cargs, **cparams)  # type: ignore[no-any-return]  # NOQA: E501
           ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/psycopg2/__init__.py", line 122, in connect
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)
sqlalchemy.exc.OperationalError: (psycopg2.OperationalError) connection to server at "localhost" (::1), port 5432 failed: FATAL:  role "username" does not exist

(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-09-16 13:45:45,280 - flask.app - ERROR - Unhandled exception
Traceback (most recent call last):
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 3301, in raw_connection
    return self.pool.connect()
           ~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/impl.py", line 177, in _do_get
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/impl.py", line 175, in _do_get
    return self._create_connection()
           ~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 388, in _create_connection
    return _ConnectionRecord(self)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 673, in __init__
    self.__connect()
    ~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 899, in __connect
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 895, in __connect
    self.dbapi_connection = connection = pool._invoke_creator(self)
                                         ~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/create.py", line 661, in connect
    return dialect.connect(*cargs, **cparams)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 629, in connect
    return self.loaded_dbapi.connect(*cargs, **cparams)  # type: ignore[no-any-return]  # NOQA: E501
           ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/psycopg2/__init__.py", line 122, in connect
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)
psycopg2.OperationalError: connection to server at "localhost" (::1), port 5432 failed: FATAL:  role "username" does not exist


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/flask_server.py", line 1175, in get_user_documents
    documents = db_manager.get_user_documents(user_id)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/database.py", line 293, in get_user_documents
    return session.query(Document).filter(Document.user_id == user_id).order_by(Document.created_at.desc()).all()
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/orm/query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/orm/query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 1189, in _connection_for_bind
    conn = bind.connect()
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 3277, in connect
    return self._connection_cls(self)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 145, in __init__
    Connection._handle_dbapi_exception_noconnection(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        err, dialect, engine
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 2440, in _handle_dbapi_exception_noconnection
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 3301, in raw_connection
    return self.pool.connect()
           ~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/impl.py", line 177, in _do_get
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/impl.py", line 175, in _do_get
    return self._create_connection()
           ~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 388, in _create_connection
    return _ConnectionRecord(self)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 673, in __init__
    self.__connect()
    ~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 899, in __connect
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 895, in __connect
    self.dbapi_connection = connection = pool._invoke_creator(self)
                                         ~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/create.py", line 661, in connect
    return dialect.connect(*cargs, **cparams)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 629, in connect
    return self.loaded_dbapi.connect(*cargs, **cparams)  # type: ignore[no-any-return]  # NOQA: E501
           ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/psycopg2/__init__.py", line 122, in connect
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)
sqlalchemy.exc.OperationalError: (psycopg2.OperationalError) connection to server at "localhost" (::1), port 5432 failed: FATAL:  role "username" does not exist

(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-09-16 13:45:46,270 - flask.app - INFO - Getting Google Drive folder tree
2025-09-16 13:45:47,518 - flask.app - ERROR - Error getting folder tree: 'children'
2025-09-16 13:45:49,066 - flask.app - INFO - Disconnecting Google Drive
2025-09-16 13:45:51,553 - flask.app - INFO - Disconnecting Google Drive
2025-09-16 13:46:07,395 - flask.app - INFO - Connected to index server
2025-09-16 13:46:08,967 - flask.app - INFO - Checking Google Drive auth status
2025-09-16 13:46:08,969 - flask.app - INFO - Checking Google Drive auth status
2025-09-16 13:46:08,976 - flask.app - INFO - Checking Google Drive auth status
2025-09-16 13:46:09,438 - flask.app - INFO - Received user sync request
2025-09-16 13:46:09,445 - flask.app - INFO - Received user sync request
2025-09-16 13:46:09,471 - flask.app - ERROR - Database error during user sync: (psycopg2.OperationalError) connection to server at "localhost" (::1), port 5432 failed: FATAL:  role "username" does not exist

(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-09-16 13:46:09,472 - flask.app - ERROR - Database error during user sync: (psycopg2.OperationalError) connection to server at "localhost" (::1), port 5432 failed: FATAL:  role "username" does not exist

(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-09-16 13:46:09,476 - flask.app - INFO - Fetching documents for user: uw5I716vuuxmuIUeS0rnjbNTDFP9MoFI
2025-09-16 13:46:09,480 - flask.app - ERROR - Unhandled exception
Traceback (most recent call last):
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 3301, in raw_connection
    return self.pool.connect()
           ~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/impl.py", line 177, in _do_get
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/impl.py", line 175, in _do_get
    return self._create_connection()
           ~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 388, in _create_connection
    return _ConnectionRecord(self)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 673, in __init__
    self.__connect()
    ~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 899, in __connect
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 895, in __connect
    self.dbapi_connection = connection = pool._invoke_creator(self)
                                         ~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/create.py", line 661, in connect
    return dialect.connect(*cargs, **cparams)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 629, in connect
    return self.loaded_dbapi.connect(*cargs, **cparams)  # type: ignore[no-any-return]  # NOQA: E501
           ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/psycopg2/__init__.py", line 122, in connect
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)
psycopg2.OperationalError: connection to server at "localhost" (::1), port 5432 failed: FATAL:  role "username" does not exist


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/flask_server.py", line 1175, in get_user_documents
    documents = db_manager.get_user_documents(user_id)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/database.py", line 293, in get_user_documents
    return session.query(Document).filter(Document.user_id == user_id).order_by(Document.created_at.desc()).all()
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/orm/query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/orm/query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 1189, in _connection_for_bind
    conn = bind.connect()
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 3277, in connect
    return self._connection_cls(self)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 145, in __init__
    Connection._handle_dbapi_exception_noconnection(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        err, dialect, engine
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 2440, in _handle_dbapi_exception_noconnection
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 3301, in raw_connection
    return self.pool.connect()
           ~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/impl.py", line 177, in _do_get
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/impl.py", line 175, in _do_get
    return self._create_connection()
           ~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 388, in _create_connection
    return _ConnectionRecord(self)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 673, in __init__
    self.__connect()
    ~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 899, in __connect
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 895, in __connect
    self.dbapi_connection = connection = pool._invoke_creator(self)
                                         ~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/create.py", line 661, in connect
    return dialect.connect(*cargs, **cparams)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 629, in connect
    return self.loaded_dbapi.connect(*cargs, **cparams)  # type: ignore[no-any-return]  # NOQA: E501
           ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/psycopg2/__init__.py", line 122, in connect
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)
sqlalchemy.exc.OperationalError: (psycopg2.OperationalError) connection to server at "localhost" (::1), port 5432 failed: FATAL:  role "username" does not exist

(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-09-16 13:46:09,483 - flask.app - INFO - Fetching documents for user: uw5I716vuuxmuIUeS0rnjbNTDFP9MoFI
2025-09-16 13:46:09,493 - flask.app - ERROR - Unhandled exception
Traceback (most recent call last):
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 3301, in raw_connection
    return self.pool.connect()
           ~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/impl.py", line 177, in _do_get
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/impl.py", line 175, in _do_get
    return self._create_connection()
           ~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 388, in _create_connection
    return _ConnectionRecord(self)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 673, in __init__
    self.__connect()
    ~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 899, in __connect
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 895, in __connect
    self.dbapi_connection = connection = pool._invoke_creator(self)
                                         ~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/create.py", line 661, in connect
    return dialect.connect(*cargs, **cparams)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 629, in connect
    return self.loaded_dbapi.connect(*cargs, **cparams)  # type: ignore[no-any-return]  # NOQA: E501
           ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/psycopg2/__init__.py", line 122, in connect
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)
psycopg2.OperationalError: connection to server at "localhost" (::1), port 5432 failed: FATAL:  role "username" does not exist


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/flask_server.py", line 1175, in get_user_documents
    documents = db_manager.get_user_documents(user_id)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/database.py", line 293, in get_user_documents
    return session.query(Document).filter(Document.user_id == user_id).order_by(Document.created_at.desc()).all()
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/orm/query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/orm/query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 1189, in _connection_for_bind
    conn = bind.connect()
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 3277, in connect
    return self._connection_cls(self)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 145, in __init__
    Connection._handle_dbapi_exception_noconnection(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        err, dialect, engine
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 2440, in _handle_dbapi_exception_noconnection
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 3301, in raw_connection
    return self.pool.connect()
           ~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/impl.py", line 177, in _do_get
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/impl.py", line 175, in _do_get
    return self._create_connection()
           ~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 388, in _create_connection
    return _ConnectionRecord(self)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 673, in __init__
    self.__connect()
    ~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 899, in __connect
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 895, in __connect
    self.dbapi_connection = connection = pool._invoke_creator(self)
                                         ~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/create.py", line 661, in connect
    return dialect.connect(*cargs, **cparams)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 629, in connect
    return self.loaded_dbapi.connect(*cargs, **cparams)  # type: ignore[no-any-return]  # NOQA: E501
           ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/psycopg2/__init__.py", line 122, in connect
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)
sqlalchemy.exc.OperationalError: (psycopg2.OperationalError) connection to server at "localhost" (::1), port 5432 failed: FATAL:  role "username" does not exist

(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-09-16 13:46:11,590 - flask.app - INFO - Disconnecting Google Drive
2025-09-16 13:46:16,799 - flask.app - INFO - Getting Google Drive folder tree
2025-09-16 13:46:17,830 - flask.app - ERROR - Error getting folder tree: 'children'
2025-09-16 13:46:20,653 - flask.app - INFO - Checking Google Drive auth status
2025-09-16 13:46:20,654 - flask.app - INFO - Checking Google Drive auth status
2025-09-16 13:46:20,661 - flask.app - INFO - Checking Google Drive auth status
2025-09-16 13:46:20,861 - flask.app - INFO - Received user sync request
2025-09-16 13:46:20,862 - flask.app - INFO - Received user sync request
2025-09-16 13:46:20,864 - flask.app - ERROR - Database error during user sync: (psycopg2.OperationalError) connection to server at "localhost" (::1), port 5432 failed: FATAL:  role "username" does not exist

(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-09-16 13:46:20,865 - flask.app - ERROR - Database error during user sync: (psycopg2.OperationalError) connection to server at "localhost" (::1), port 5432 failed: FATAL:  role "username" does not exist

(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-09-16 13:46:20,868 - flask.app - INFO - Fetching documents for user: uw5I716vuuxmuIUeS0rnjbNTDFP9MoFI
2025-09-16 13:46:20,871 - flask.app - ERROR - Unhandled exception
Traceback (most recent call last):
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 3301, in raw_connection
    return self.pool.connect()
           ~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/impl.py", line 177, in _do_get
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/impl.py", line 175, in _do_get
    return self._create_connection()
           ~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 388, in _create_connection
    return _ConnectionRecord(self)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 673, in __init__
    self.__connect()
    ~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 899, in __connect
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 895, in __connect
    self.dbapi_connection = connection = pool._invoke_creator(self)
                                         ~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/create.py", line 661, in connect
    return dialect.connect(*cargs, **cparams)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 629, in connect
    return self.loaded_dbapi.connect(*cargs, **cparams)  # type: ignore[no-any-return]  # NOQA: E501
           ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/psycopg2/__init__.py", line 122, in connect
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)
psycopg2.OperationalError: connection to server at "localhost" (::1), port 5432 failed: FATAL:  role "username" does not exist


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/flask_server.py", line 1175, in get_user_documents
    documents = db_manager.get_user_documents(user_id)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/database.py", line 293, in get_user_documents
    return session.query(Document).filter(Document.user_id == user_id).order_by(Document.created_at.desc()).all()
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/orm/query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/orm/query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 1189, in _connection_for_bind
    conn = bind.connect()
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 3277, in connect
    return self._connection_cls(self)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 145, in __init__
    Connection._handle_dbapi_exception_noconnection(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        err, dialect, engine
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 2440, in _handle_dbapi_exception_noconnection
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 3301, in raw_connection
    return self.pool.connect()
           ~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/impl.py", line 177, in _do_get
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/impl.py", line 175, in _do_get
    return self._create_connection()
           ~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 388, in _create_connection
    return _ConnectionRecord(self)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 673, in __init__
    self.__connect()
    ~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 899, in __connect
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 895, in __connect
    self.dbapi_connection = connection = pool._invoke_creator(self)
                                         ~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/create.py", line 661, in connect
    return dialect.connect(*cargs, **cparams)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 629, in connect
    return self.loaded_dbapi.connect(*cargs, **cparams)  # type: ignore[no-any-return]  # NOQA: E501
           ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/psycopg2/__init__.py", line 122, in connect
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)
sqlalchemy.exc.OperationalError: (psycopg2.OperationalError) connection to server at "localhost" (::1), port 5432 failed: FATAL:  role "username" does not exist

(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-09-16 13:46:20,872 - flask.app - INFO - Fetching documents for user: uw5I716vuuxmuIUeS0rnjbNTDFP9MoFI
2025-09-16 13:46:20,877 - flask.app - ERROR - Unhandled exception
Traceback (most recent call last):
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 3301, in raw_connection
    return self.pool.connect()
           ~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/impl.py", line 177, in _do_get
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/impl.py", line 175, in _do_get
    return self._create_connection()
           ~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 388, in _create_connection
    return _ConnectionRecord(self)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 673, in __init__
    self.__connect()
    ~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 899, in __connect
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 895, in __connect
    self.dbapi_connection = connection = pool._invoke_creator(self)
                                         ~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/create.py", line 661, in connect
    return dialect.connect(*cargs, **cparams)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 629, in connect
    return self.loaded_dbapi.connect(*cargs, **cparams)  # type: ignore[no-any-return]  # NOQA: E501
           ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/psycopg2/__init__.py", line 122, in connect
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)
psycopg2.OperationalError: connection to server at "localhost" (::1), port 5432 failed: FATAL:  role "username" does not exist


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/flask_server.py", line 1175, in get_user_documents
    documents = db_manager.get_user_documents(user_id)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/database.py", line 293, in get_user_documents
    return session.query(Document).filter(Document.user_id == user_id).order_by(Document.created_at.desc()).all()
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/orm/query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/orm/query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 1189, in _connection_for_bind
    conn = bind.connect()
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 3277, in connect
    return self._connection_cls(self)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 145, in __init__
    Connection._handle_dbapi_exception_noconnection(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        err, dialect, engine
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 2440, in _handle_dbapi_exception_noconnection
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 3301, in raw_connection
    return self.pool.connect()
           ~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/impl.py", line 177, in _do_get
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/impl.py", line 175, in _do_get
    return self._create_connection()
           ~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 388, in _create_connection
    return _ConnectionRecord(self)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 673, in __init__
    self.__connect()
    ~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 899, in __connect
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 895, in __connect
    self.dbapi_connection = connection = pool._invoke_creator(self)
                                         ~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/create.py", line 661, in connect
    return dialect.connect(*cargs, **cparams)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 629, in connect
    return self.loaded_dbapi.connect(*cargs, **cparams)  # type: ignore[no-any-return]  # NOQA: E501
           ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/psycopg2/__init__.py", line 122, in connect
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)
sqlalchemy.exc.OperationalError: (psycopg2.OperationalError) connection to server at "localhost" (::1), port 5432 failed: FATAL:  role "username" does not exist

(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-09-16 13:46:22,464 - flask.app - INFO - Disconnecting Google Drive
2025-09-16 13:46:24,247 - flask.app - INFO - Getting Google Drive folder tree
2025-09-16 13:46:25,088 - flask.app - ERROR - Error getting folder tree: 'children'
2025-09-16 13:47:02,255 - flask.app - INFO - Checking Google Drive auth status
2025-09-16 13:47:02,258 - flask.app - INFO - Checking Google Drive auth status
2025-09-16 13:47:02,261 - flask.app - INFO - Checking Google Drive auth status
2025-09-16 13:47:02,967 - flask.app - INFO - Received user sync request
2025-09-16 13:47:02,975 - flask.app - ERROR - Database error during user sync: (psycopg2.OperationalError) connection to server at "localhost" (::1), port 5432 failed: FATAL:  role "username" does not exist

(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-09-16 13:47:02,981 - flask.app - INFO - Fetching documents for user: uw5I716vuuxmuIUeS0rnjbNTDFP9MoFI
2025-09-16 13:47:02,986 - flask.app - ERROR - Unhandled exception
Traceback (most recent call last):
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 3301, in raw_connection
    return self.pool.connect()
           ~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/impl.py", line 177, in _do_get
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/impl.py", line 175, in _do_get
    return self._create_connection()
           ~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 388, in _create_connection
    return _ConnectionRecord(self)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 673, in __init__
    self.__connect()
    ~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 899, in __connect
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 895, in __connect
    self.dbapi_connection = connection = pool._invoke_creator(self)
                                         ~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/create.py", line 661, in connect
    return dialect.connect(*cargs, **cparams)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 629, in connect
    return self.loaded_dbapi.connect(*cargs, **cparams)  # type: ignore[no-any-return]  # NOQA: E501
           ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/psycopg2/__init__.py", line 122, in connect
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)
psycopg2.OperationalError: connection to server at "localhost" (::1), port 5432 failed: FATAL:  role "username" does not exist


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/flask_server.py", line 1175, in get_user_documents
    documents = db_manager.get_user_documents(user_id)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/database.py", line 293, in get_user_documents
    return session.query(Document).filter(Document.user_id == user_id).order_by(Document.created_at.desc()).all()
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/orm/query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/orm/query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 1189, in _connection_for_bind
    conn = bind.connect()
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 3277, in connect
    return self._connection_cls(self)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 145, in __init__
    Connection._handle_dbapi_exception_noconnection(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        err, dialect, engine
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 2440, in _handle_dbapi_exception_noconnection
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 3301, in raw_connection
    return self.pool.connect()
           ~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/impl.py", line 177, in _do_get
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/impl.py", line 175, in _do_get
    return self._create_connection()
           ~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 388, in _create_connection
    return _ConnectionRecord(self)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 673, in __init__
    self.__connect()
    ~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 899, in __connect
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 895, in __connect
    self.dbapi_connection = connection = pool._invoke_creator(self)
                                         ~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/create.py", line 661, in connect
    return dialect.connect(*cargs, **cparams)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 629, in connect
    return self.loaded_dbapi.connect(*cargs, **cparams)  # type: ignore[no-any-return]  # NOQA: E501
           ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/psycopg2/__init__.py", line 122, in connect
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)
sqlalchemy.exc.OperationalError: (psycopg2.OperationalError) connection to server at "localhost" (::1), port 5432 failed: FATAL:  role "username" does not exist

(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-09-16 13:47:03,137 - flask.app - INFO - Received user sync request
2025-09-16 13:47:03,140 - flask.app - ERROR - Database error during user sync: (psycopg2.OperationalError) connection to server at "localhost" (::1), port 5432 failed: FATAL:  role "username" does not exist

(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-09-16 13:47:03,143 - flask.app - INFO - Fetching documents for user: uw5I716vuuxmuIUeS0rnjbNTDFP9MoFI
2025-09-16 13:47:03,145 - flask.app - ERROR - Unhandled exception
Traceback (most recent call last):
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 3301, in raw_connection
    return self.pool.connect()
           ~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/impl.py", line 177, in _do_get
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/impl.py", line 175, in _do_get
    return self._create_connection()
           ~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 388, in _create_connection
    return _ConnectionRecord(self)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 673, in __init__
    self.__connect()
    ~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 899, in __connect
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 895, in __connect
    self.dbapi_connection = connection = pool._invoke_creator(self)
                                         ~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/create.py", line 661, in connect
    return dialect.connect(*cargs, **cparams)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 629, in connect
    return self.loaded_dbapi.connect(*cargs, **cparams)  # type: ignore[no-any-return]  # NOQA: E501
           ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/psycopg2/__init__.py", line 122, in connect
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)
psycopg2.OperationalError: connection to server at "localhost" (::1), port 5432 failed: FATAL:  role "username" does not exist


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/flask_server.py", line 1175, in get_user_documents
    documents = db_manager.get_user_documents(user_id)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/database.py", line 293, in get_user_documents
    return session.query(Document).filter(Document.user_id == user_id).order_by(Document.created_at.desc()).all()
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/orm/query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/orm/query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 1189, in _connection_for_bind
    conn = bind.connect()
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 3277, in connect
    return self._connection_cls(self)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 145, in __init__
    Connection._handle_dbapi_exception_noconnection(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        err, dialect, engine
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 2440, in _handle_dbapi_exception_noconnection
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 3301, in raw_connection
    return self.pool.connect()
           ~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/impl.py", line 177, in _do_get
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/impl.py", line 175, in _do_get
    return self._create_connection()
           ~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 388, in _create_connection
    return _ConnectionRecord(self)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 673, in __init__
    self.__connect()
    ~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 899, in __connect
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 895, in __connect
    self.dbapi_connection = connection = pool._invoke_creator(self)
                                         ~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/create.py", line 661, in connect
    return dialect.connect(*cargs, **cparams)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 629, in connect
    return self.loaded_dbapi.connect(*cargs, **cparams)  # type: ignore[no-any-return]  # NOQA: E501
           ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/psycopg2/__init__.py", line 122, in connect
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)
sqlalchemy.exc.OperationalError: (psycopg2.OperationalError) connection to server at "localhost" (::1), port 5432 failed: FATAL:  role "username" does not exist

(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-09-16 13:48:49,846 - flask.app - INFO - Getting Google Drive folder tree
2025-09-16 13:48:50,797 - flask.app - ERROR - Error getting folder tree: 'children'
2025-09-16 13:49:02,470 - flask.app - INFO - Disconnecting Google Drive
2025-09-16 13:49:25,432 - flask.app - INFO - Disconnecting Google Drive
2025-09-16 13:51:10,731 - flask.app - INFO - Connected to index server
2025-09-16 13:51:26,103 - flask.app - INFO - Checking Google Drive auth status
2025-09-16 13:51:26,106 - flask.app - INFO - Checking Google Drive auth status
2025-09-16 13:51:26,111 - flask.app - INFO - Checking Google Drive auth status
2025-09-16 13:51:26,947 - flask.app - INFO - Received user sync request
2025-09-16 13:51:26,972 - flask.app - ERROR - Database error during user sync: (psycopg2.OperationalError) connection to server at "localhost" (::1), port 5432 failed: FATAL:  role "username" does not exist

(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-09-16 13:51:26,977 - flask.app - INFO - Fetching documents for user: uw5I716vuuxmuIUeS0rnjbNTDFP9MoFI
2025-09-16 13:51:26,980 - flask.app - ERROR - Unhandled exception
Traceback (most recent call last):
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 3301, in raw_connection
    return self.pool.connect()
           ~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/impl.py", line 177, in _do_get
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/impl.py", line 175, in _do_get
    return self._create_connection()
           ~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 388, in _create_connection
    return _ConnectionRecord(self)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 673, in __init__
    self.__connect()
    ~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 899, in __connect
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 895, in __connect
    self.dbapi_connection = connection = pool._invoke_creator(self)
                                         ~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/create.py", line 661, in connect
    return dialect.connect(*cargs, **cparams)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 629, in connect
    return self.loaded_dbapi.connect(*cargs, **cparams)  # type: ignore[no-any-return]  # NOQA: E501
           ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/psycopg2/__init__.py", line 122, in connect
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)
psycopg2.OperationalError: connection to server at "localhost" (::1), port 5432 failed: FATAL:  role "username" does not exist


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/flask_server.py", line 1175, in get_user_documents
    documents = db_manager.get_user_documents(user_id)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/database.py", line 293, in get_user_documents
    return session.query(Document).filter(Document.user_id == user_id).order_by(Document.created_at.desc()).all()
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/orm/query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/orm/query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 1189, in _connection_for_bind
    conn = bind.connect()
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 3277, in connect
    return self._connection_cls(self)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 145, in __init__
    Connection._handle_dbapi_exception_noconnection(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        err, dialect, engine
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 2440, in _handle_dbapi_exception_noconnection
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 3301, in raw_connection
    return self.pool.connect()
           ~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/impl.py", line 177, in _do_get
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/impl.py", line 175, in _do_get
    return self._create_connection()
           ~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 388, in _create_connection
    return _ConnectionRecord(self)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 673, in __init__
    self.__connect()
    ~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 899, in __connect
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 895, in __connect
    self.dbapi_connection = connection = pool._invoke_creator(self)
                                         ~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/create.py", line 661, in connect
    return dialect.connect(*cargs, **cparams)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 629, in connect
    return self.loaded_dbapi.connect(*cargs, **cparams)  # type: ignore[no-any-return]  # NOQA: E501
           ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/psycopg2/__init__.py", line 122, in connect
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)
sqlalchemy.exc.OperationalError: (psycopg2.OperationalError) connection to server at "localhost" (::1), port 5432 failed: FATAL:  role "username" does not exist

(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-09-16 13:51:27,252 - flask.app - INFO - Received user sync request
2025-09-16 13:51:27,254 - flask.app - ERROR - Database error during user sync: (psycopg2.OperationalError) connection to server at "localhost" (::1), port 5432 failed: FATAL:  role "username" does not exist

(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-09-16 13:51:27,257 - flask.app - INFO - Fetching documents for user: uw5I716vuuxmuIUeS0rnjbNTDFP9MoFI
2025-09-16 13:51:27,259 - flask.app - ERROR - Unhandled exception
Traceback (most recent call last):
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 3301, in raw_connection
    return self.pool.connect()
           ~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/impl.py", line 177, in _do_get
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/impl.py", line 175, in _do_get
    return self._create_connection()
           ~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 388, in _create_connection
    return _ConnectionRecord(self)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 673, in __init__
    self.__connect()
    ~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 899, in __connect
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 895, in __connect
    self.dbapi_connection = connection = pool._invoke_creator(self)
                                         ~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/create.py", line 661, in connect
    return dialect.connect(*cargs, **cparams)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 629, in connect
    return self.loaded_dbapi.connect(*cargs, **cparams)  # type: ignore[no-any-return]  # NOQA: E501
           ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/psycopg2/__init__.py", line 122, in connect
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)
psycopg2.OperationalError: connection to server at "localhost" (::1), port 5432 failed: FATAL:  role "username" does not exist


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/flask_server.py", line 1175, in get_user_documents
    documents = db_manager.get_user_documents(user_id)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/database.py", line 293, in get_user_documents
    return session.query(Document).filter(Document.user_id == user_id).order_by(Document.created_at.desc()).all()
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/orm/query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/orm/query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 1189, in _connection_for_bind
    conn = bind.connect()
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 3277, in connect
    return self._connection_cls(self)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 145, in __init__
    Connection._handle_dbapi_exception_noconnection(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        err, dialect, engine
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 2440, in _handle_dbapi_exception_noconnection
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 3301, in raw_connection
    return self.pool.connect()
           ~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/impl.py", line 177, in _do_get
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/impl.py", line 175, in _do_get
    return self._create_connection()
           ~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 388, in _create_connection
    return _ConnectionRecord(self)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 673, in __init__
    self.__connect()
    ~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 899, in __connect
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 895, in __connect
    self.dbapi_connection = connection = pool._invoke_creator(self)
                                         ~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/create.py", line 661, in connect
    return dialect.connect(*cargs, **cparams)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 629, in connect
    return self.loaded_dbapi.connect(*cargs, **cparams)  # type: ignore[no-any-return]  # NOQA: E501
           ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/psycopg2/__init__.py", line 122, in connect
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)
sqlalchemy.exc.OperationalError: (psycopg2.OperationalError) connection to server at "localhost" (::1), port 5432 failed: FATAL:  role "username" does not exist

(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-09-16 13:51:28,101 - flask.app - INFO - Generating Google Drive auth URL
2025-09-16 13:51:35,200 - flask.app - INFO - Handling Google Drive auth callback
2025-09-16 13:51:35,870 - flask.app - INFO - Getting Google Drive folder tree
2025-09-16 13:51:36,948 - flask.app - ERROR - Error getting folder tree: 'children'
2025-09-16 13:51:37,154 - flask.app - INFO - Checking Google Drive auth status
2025-09-16 13:55:33,557 - flask.app - INFO - Connected to index server
2025-09-16 14:01:00,747 - flask.app - INFO - Checking Google Drive auth status
2025-09-16 14:01:00,748 - flask.app - INFO - Checking Google Drive auth status
2025-09-16 14:01:00,753 - flask.app - INFO - Checking Google Drive auth status
2025-09-16 14:01:01,428 - flask.app - INFO - Received user sync request
2025-09-16 14:01:01,467 - flask.app - ERROR - Database error during user sync: (psycopg2.OperationalError) connection to server at "localhost" (::1), port 5432 failed: FATAL:  role "username" does not exist

(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-09-16 14:01:01,472 - flask.app - INFO - Fetching documents for user: uw5I716vuuxmuIUeS0rnjbNTDFP9MoFI
2025-09-16 14:01:01,475 - flask.app - ERROR - Unhandled exception
Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ~~~~~~~~~~~~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 3301, in raw_connection
    return self.pool.connect()
           ~~~~~~~~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/impl.py", line 177, in _do_get
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/impl.py", line 175, in _do_get
    return self._create_connection()
           ~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 388, in _create_connection
    return _ConnectionRecord(self)
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 673, in __init__
    self.__connect()
    ~~~~~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 899, in __connect
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 895, in __connect
    self.dbapi_connection = connection = pool._invoke_creator(self)
                                         ~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/engine/create.py", line 661, in connect
    return dialect.connect(*cargs, **cparams)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 629, in connect
    return self.loaded_dbapi.connect(*cargs, **cparams)  # type: ignore[no-any-return]  # NOQA: E501
           ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.13/site-packages/psycopg2/__init__.py", line 122, in connect
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)
psycopg2.OperationalError: connection to server at "localhost" (::1), port 5432 failed: FATAL:  role "username" does not exist


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.13/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/opt/homebrew/lib/python3.13/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/flask_server.py", line 1175, in get_user_documents
    documents = db_manager.get_user_documents(user_id)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/database.py", line 293, in get_user_documents
    return session.query(Document).filter(Document.user_id == user_id).order_by(Document.created_at.desc()).all()
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/orm/query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/orm/query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 1189, in _connection_for_bind
    conn = bind.connect()
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 3277, in connect
    return self._connection_cls(self)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 145, in __init__
    Connection._handle_dbapi_exception_noconnection(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        err, dialect, engine
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 2440, in _handle_dbapi_exception_noconnection
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ~~~~~~~~~~~~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 3301, in raw_connection
    return self.pool.connect()
           ~~~~~~~~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/impl.py", line 177, in _do_get
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/impl.py", line 175, in _do_get
    return self._create_connection()
           ~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 388, in _create_connection
    return _ConnectionRecord(self)
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 673, in __init__
    self.__connect()
    ~~~~~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 899, in __connect
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 895, in __connect
    self.dbapi_connection = connection = pool._invoke_creator(self)
                                         ~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/engine/create.py", line 661, in connect
    return dialect.connect(*cargs, **cparams)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 629, in connect
    return self.loaded_dbapi.connect(*cargs, **cparams)  # type: ignore[no-any-return]  # NOQA: E501
           ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.13/site-packages/psycopg2/__init__.py", line 122, in connect
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)
sqlalchemy.exc.OperationalError: (psycopg2.OperationalError) connection to server at "localhost" (::1), port 5432 failed: FATAL:  role "username" does not exist

(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-09-16 14:01:01,526 - flask.app - INFO - Received user sync request
2025-09-16 14:01:01,547 - flask.app - ERROR - Database error during user sync: (psycopg2.OperationalError) connection to server at "localhost" (::1), port 5432 failed: FATAL:  role "username" does not exist

(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-09-16 14:01:01,562 - flask.app - INFO - Fetching documents for user: uw5I716vuuxmuIUeS0rnjbNTDFP9MoFI
2025-09-16 14:01:01,577 - flask.app - ERROR - Unhandled exception
Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ~~~~~~~~~~~~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 3301, in raw_connection
    return self.pool.connect()
           ~~~~~~~~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/impl.py", line 177, in _do_get
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/impl.py", line 175, in _do_get
    return self._create_connection()
           ~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 388, in _create_connection
    return _ConnectionRecord(self)
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 673, in __init__
    self.__connect()
    ~~~~~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 899, in __connect
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 895, in __connect
    self.dbapi_connection = connection = pool._invoke_creator(self)
                                         ~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/engine/create.py", line 661, in connect
    return dialect.connect(*cargs, **cparams)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 629, in connect
    return self.loaded_dbapi.connect(*cargs, **cparams)  # type: ignore[no-any-return]  # NOQA: E501
           ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.13/site-packages/psycopg2/__init__.py", line 122, in connect
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)
psycopg2.OperationalError: connection to server at "localhost" (::1), port 5432 failed: FATAL:  role "username" does not exist


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.13/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/opt/homebrew/lib/python3.13/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/flask_server.py", line 1175, in get_user_documents
    documents = db_manager.get_user_documents(user_id)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/database.py", line 293, in get_user_documents
    return session.query(Document).filter(Document.user_id == user_id).order_by(Document.created_at.desc()).all()
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/orm/query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/orm/query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 1189, in _connection_for_bind
    conn = bind.connect()
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 3277, in connect
    return self._connection_cls(self)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 145, in __init__
    Connection._handle_dbapi_exception_noconnection(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        err, dialect, engine
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 2440, in _handle_dbapi_exception_noconnection
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ~~~~~~~~~~~~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 3301, in raw_connection
    return self.pool.connect()
           ~~~~~~~~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/impl.py", line 177, in _do_get
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/impl.py", line 175, in _do_get
    return self._create_connection()
           ~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 388, in _create_connection
    return _ConnectionRecord(self)
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 673, in __init__
    self.__connect()
    ~~~~~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 899, in __connect
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 895, in __connect
    self.dbapi_connection = connection = pool._invoke_creator(self)
                                         ~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/engine/create.py", line 661, in connect
    return dialect.connect(*cargs, **cparams)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 629, in connect
    return self.loaded_dbapi.connect(*cargs, **cparams)  # type: ignore[no-any-return]  # NOQA: E501
           ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.13/site-packages/psycopg2/__init__.py", line 122, in connect
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)
sqlalchemy.exc.OperationalError: (psycopg2.OperationalError) connection to server at "localhost" (::1), port 5432 failed: FATAL:  role "username" does not exist

(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-09-16 14:01:13,277 - flask.app - INFO - Getting Google Drive folder tree
2025-09-16 14:01:14,489 - flask.app - ERROR - Error getting folder tree: 'children'
2025-09-16 14:05:25,662 - flask.app - INFO - Checking Google Drive auth status
2025-09-16 14:05:25,668 - flask.app - INFO - Checking Google Drive auth status
2025-09-16 14:05:26,733 - flask.app - INFO - Checking Google Drive auth status
2025-09-16 14:05:26,736 - flask.app - INFO - Getting synced Google Drive files
2025-09-16 14:05:26,736 - flask.app - ERROR - Error getting synced files: 'DatabaseManager' object has no attribute 'session'
2025-09-16 14:05:26,741 - flask.app - INFO - Received user sync request
2025-09-16 14:05:26,746 - flask.app - INFO - Received user sync request
2025-09-16 14:05:26,750 - flask.app - ERROR - Database error during user sync: (psycopg2.OperationalError) connection to server at "localhost" (::1), port 5432 failed: FATAL:  role "username" does not exist

(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-09-16 14:05:26,750 - flask.app - ERROR - Database error during user sync: (psycopg2.OperationalError) connection to server at "localhost" (::1), port 5432 failed: FATAL:  role "username" does not exist

(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-09-16 14:05:26,755 - flask.app - INFO - Fetching documents for user: uw5I716vuuxmuIUeS0rnjbNTDFP9MoFI
2025-09-16 14:05:26,755 - flask.app - INFO - Fetching documents for user: uw5I716vuuxmuIUeS0rnjbNTDFP9MoFI
2025-09-16 14:05:26,758 - flask.app - ERROR - Unhandled exception
Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ~~~~~~~~~~~~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 3301, in raw_connection
    return self.pool.connect()
           ~~~~~~~~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/impl.py", line 177, in _do_get
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/impl.py", line 175, in _do_get
    return self._create_connection()
           ~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 388, in _create_connection
    return _ConnectionRecord(self)
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 673, in __init__
    self.__connect()
    ~~~~~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 899, in __connect
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 895, in __connect
    self.dbapi_connection = connection = pool._invoke_creator(self)
                                         ~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/engine/create.py", line 661, in connect
    return dialect.connect(*cargs, **cparams)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 629, in connect
    return self.loaded_dbapi.connect(*cargs, **cparams)  # type: ignore[no-any-return]  # NOQA: E501
           ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.13/site-packages/psycopg2/__init__.py", line 122, in connect
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)
psycopg2.OperationalError: connection to server at "localhost" (::1), port 5432 failed: FATAL:  role "username" does not exist


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.13/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/opt/homebrew/lib/python3.13/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/flask_server.py", line 1175, in get_user_documents
    documents = db_manager.get_user_documents(user_id)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/database.py", line 293, in get_user_documents
    return session.query(Document).filter(Document.user_id == user_id).order_by(Document.created_at.desc()).all()
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/orm/query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/orm/query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 1189, in _connection_for_bind
    conn = bind.connect()
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 3277, in connect
    return self._connection_cls(self)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 145, in __init__
    Connection._handle_dbapi_exception_noconnection(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        err, dialect, engine
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 2440, in _handle_dbapi_exception_noconnection
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ~~~~~~~~~~~~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 3301, in raw_connection
    return self.pool.connect()
           ~~~~~~~~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/impl.py", line 177, in _do_get
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/impl.py", line 175, in _do_get
    return self._create_connection()
           ~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 388, in _create_connection
    return _ConnectionRecord(self)
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 673, in __init__
    self.__connect()
    ~~~~~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 899, in __connect
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 895, in __connect
    self.dbapi_connection = connection = pool._invoke_creator(self)
                                         ~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/engine/create.py", line 661, in connect
    return dialect.connect(*cargs, **cparams)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 629, in connect
    return self.loaded_dbapi.connect(*cargs, **cparams)  # type: ignore[no-any-return]  # NOQA: E501
           ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.13/site-packages/psycopg2/__init__.py", line 122, in connect
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)
sqlalchemy.exc.OperationalError: (psycopg2.OperationalError) connection to server at "localhost" (::1), port 5432 failed: FATAL:  role "username" does not exist

(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-09-16 14:05:26,759 - flask.app - ERROR - Unhandled exception
Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ~~~~~~~~~~~~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 3301, in raw_connection
    return self.pool.connect()
           ~~~~~~~~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/impl.py", line 177, in _do_get
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/impl.py", line 175, in _do_get
    return self._create_connection()
           ~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 388, in _create_connection
    return _ConnectionRecord(self)
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 673, in __init__
    self.__connect()
    ~~~~~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 899, in __connect
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 895, in __connect
    self.dbapi_connection = connection = pool._invoke_creator(self)
                                         ~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/engine/create.py", line 661, in connect
    return dialect.connect(*cargs, **cparams)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 629, in connect
    return self.loaded_dbapi.connect(*cargs, **cparams)  # type: ignore[no-any-return]  # NOQA: E501
           ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.13/site-packages/psycopg2/__init__.py", line 122, in connect
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)
psycopg2.OperationalError: connection to server at "localhost" (::1), port 5432 failed: FATAL:  role "username" does not exist


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.13/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/opt/homebrew/lib/python3.13/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/flask_server.py", line 1175, in get_user_documents
    documents = db_manager.get_user_documents(user_id)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/database.py", line 293, in get_user_documents
    return session.query(Document).filter(Document.user_id == user_id).order_by(Document.created_at.desc()).all()
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/orm/query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/orm/query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 1189, in _connection_for_bind
    conn = bind.connect()
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 3277, in connect
    return self._connection_cls(self)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 145, in __init__
    Connection._handle_dbapi_exception_noconnection(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        err, dialect, engine
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 2440, in _handle_dbapi_exception_noconnection
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ~~~~~~~~~~~~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 3301, in raw_connection
    return self.pool.connect()
           ~~~~~~~~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/impl.py", line 177, in _do_get
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/impl.py", line 175, in _do_get
    return self._create_connection()
           ~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 388, in _create_connection
    return _ConnectionRecord(self)
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 673, in __init__
    self.__connect()
    ~~~~~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 899, in __connect
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 895, in __connect
    self.dbapi_connection = connection = pool._invoke_creator(self)
                                         ~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/engine/create.py", line 661, in connect
    return dialect.connect(*cargs, **cparams)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 629, in connect
    return self.loaded_dbapi.connect(*cargs, **cparams)  # type: ignore[no-any-return]  # NOQA: E501
           ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.13/site-packages/psycopg2/__init__.py", line 122, in connect
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)
sqlalchemy.exc.OperationalError: (psycopg2.OperationalError) connection to server at "localhost" (::1), port 5432 failed: FATAL:  role "username" does not exist

(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-09-16 14:05:37,528 - flask.app - INFO - Getting Google Drive folder tree
2025-09-16 14:05:38,778 - flask.app - ERROR - Error getting folder tree: 'children'
2025-09-16 14:05:50,444 - flask.app - INFO - Checking Google Drive auth status
2025-09-16 14:06:45,578 - flask.app - INFO - Checking Google Drive auth status
2025-09-16 14:06:45,578 - flask.app - INFO - Checking Google Drive auth status
2025-09-16 14:06:46,471 - flask.app - INFO - Generating Google Drive auth URL
2025-09-16 14:06:46,721 - flask.app - INFO - Received user sync request
2025-09-16 14:06:46,733 - flask.app - INFO - Checking Google Drive auth status
2025-09-16 14:06:46,735 - flask.app - INFO - Getting synced Google Drive files
2025-09-16 14:06:46,735 - flask.app - ERROR - Error getting synced files: 'DatabaseManager' object has no attribute 'session'
2025-09-16 14:06:46,740 - flask.app - INFO - Received user sync request
2025-09-16 14:06:46,743 - flask.app - ERROR - Database error during user sync: (psycopg2.OperationalError) connection to server at "localhost" (::1), port 5432 failed: FATAL:  role "username" does not exist

(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-09-16 14:06:46,744 - flask.app - ERROR - Database error during user sync: (psycopg2.OperationalError) connection to server at "localhost" (::1), port 5432 failed: FATAL:  role "username" does not exist

(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-09-16 14:06:46,748 - flask.app - INFO - Fetching documents for user: uw5I716vuuxmuIUeS0rnjbNTDFP9MoFI
2025-09-16 14:06:46,753 - flask.app - INFO - Fetching documents for user: uw5I716vuuxmuIUeS0rnjbNTDFP9MoFI
2025-09-16 14:06:46,754 - flask.app - ERROR - Unhandled exception
Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ~~~~~~~~~~~~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 3301, in raw_connection
    return self.pool.connect()
           ~~~~~~~~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/impl.py", line 177, in _do_get
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/impl.py", line 175, in _do_get
    return self._create_connection()
           ~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 388, in _create_connection
    return _ConnectionRecord(self)
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 673, in __init__
    self.__connect()
    ~~~~~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 899, in __connect
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 895, in __connect
    self.dbapi_connection = connection = pool._invoke_creator(self)
                                         ~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/engine/create.py", line 661, in connect
    return dialect.connect(*cargs, **cparams)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 629, in connect
    return self.loaded_dbapi.connect(*cargs, **cparams)  # type: ignore[no-any-return]  # NOQA: E501
           ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.13/site-packages/psycopg2/__init__.py", line 122, in connect
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)
psycopg2.OperationalError: connection to server at "localhost" (::1), port 5432 failed: FATAL:  role "username" does not exist


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.13/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/opt/homebrew/lib/python3.13/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/flask_server.py", line 1175, in get_user_documents
    documents = db_manager.get_user_documents(user_id)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/database.py", line 293, in get_user_documents
    return session.query(Document).filter(Document.user_id == user_id).order_by(Document.created_at.desc()).all()
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/orm/query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/orm/query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 1189, in _connection_for_bind
    conn = bind.connect()
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 3277, in connect
    return self._connection_cls(self)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 145, in __init__
    Connection._handle_dbapi_exception_noconnection(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        err, dialect, engine
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 2440, in _handle_dbapi_exception_noconnection
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ~~~~~~~~~~~~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 3301, in raw_connection
    return self.pool.connect()
           ~~~~~~~~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/impl.py", line 177, in _do_get
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/impl.py", line 175, in _do_get
    return self._create_connection()
           ~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 388, in _create_connection
    return _ConnectionRecord(self)
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 673, in __init__
    self.__connect()
    ~~~~~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 899, in __connect
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 895, in __connect
    self.dbapi_connection = connection = pool._invoke_creator(self)
                                         ~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/engine/create.py", line 661, in connect
    return dialect.connect(*cargs, **cparams)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 629, in connect
    return self.loaded_dbapi.connect(*cargs, **cparams)  # type: ignore[no-any-return]  # NOQA: E501
           ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.13/site-packages/psycopg2/__init__.py", line 122, in connect
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)
sqlalchemy.exc.OperationalError: (psycopg2.OperationalError) connection to server at "localhost" (::1), port 5432 failed: FATAL:  role "username" does not exist

(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-09-16 14:06:46,758 - flask.app - ERROR - Unhandled exception
Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ~~~~~~~~~~~~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 3301, in raw_connection
    return self.pool.connect()
           ~~~~~~~~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/impl.py", line 177, in _do_get
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/impl.py", line 175, in _do_get
    return self._create_connection()
           ~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 388, in _create_connection
    return _ConnectionRecord(self)
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 673, in __init__
    self.__connect()
    ~~~~~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 899, in __connect
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 895, in __connect
    self.dbapi_connection = connection = pool._invoke_creator(self)
                                         ~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/engine/create.py", line 661, in connect
    return dialect.connect(*cargs, **cparams)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 629, in connect
    return self.loaded_dbapi.connect(*cargs, **cparams)  # type: ignore[no-any-return]  # NOQA: E501
           ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.13/site-packages/psycopg2/__init__.py", line 122, in connect
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)
psycopg2.OperationalError: connection to server at "localhost" (::1), port 5432 failed: FATAL:  role "username" does not exist


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.13/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/opt/homebrew/lib/python3.13/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/flask_server.py", line 1175, in get_user_documents
    documents = db_manager.get_user_documents(user_id)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/database.py", line 293, in get_user_documents
    return session.query(Document).filter(Document.user_id == user_id).order_by(Document.created_at.desc()).all()
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/orm/query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/orm/query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 1189, in _connection_for_bind
    conn = bind.connect()
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 3277, in connect
    return self._connection_cls(self)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 145, in __init__
    Connection._handle_dbapi_exception_noconnection(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        err, dialect, engine
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 2440, in _handle_dbapi_exception_noconnection
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ~~~~~~~~~~~~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 3301, in raw_connection
    return self.pool.connect()
           ~~~~~~~~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/impl.py", line 177, in _do_get
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/impl.py", line 175, in _do_get
    return self._create_connection()
           ~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 388, in _create_connection
    return _ConnectionRecord(self)
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 673, in __init__
    self.__connect()
    ~~~~~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 899, in __connect
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 895, in __connect
    self.dbapi_connection = connection = pool._invoke_creator(self)
                                         ~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/engine/create.py", line 661, in connect
    return dialect.connect(*cargs, **cparams)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 629, in connect
    return self.loaded_dbapi.connect(*cargs, **cparams)  # type: ignore[no-any-return]  # NOQA: E501
           ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.13/site-packages/psycopg2/__init__.py", line 122, in connect
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)
sqlalchemy.exc.OperationalError: (psycopg2.OperationalError) connection to server at "localhost" (::1), port 5432 failed: FATAL:  role "username" does not exist

(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-09-16 14:06:49,078 - flask.app - INFO - Generating Google Drive auth URL
2025-09-16 14:06:55,674 - flask.app - INFO - Handling Google Drive auth callback
2025-09-16 14:06:56,403 - flask.app - INFO - Getting Google Drive folder tree
2025-09-16 14:06:57,433 - flask.app - ERROR - Error getting folder tree: 'children'
2025-09-16 14:06:58,138 - flask.app - INFO - Checking Google Drive auth status
2025-09-16 14:07:59,461 - flask.app - INFO - Checking Google Drive auth status
2025-09-16 14:08:10,287 - flask.app - INFO - Getting Google Drive folder tree
2025-09-16 14:08:11,339 - flask.app - ERROR - Error getting folder tree: 'children'
2025-09-16 14:09:13,817 - flask.app - INFO - Getting Google Drive folder tree
2025-09-16 14:09:15,021 - flask.app - ERROR - Error getting folder tree: 'children'
2025-09-16 14:10:36,353 - flask.app - INFO - Connected to index server
2025-09-16 14:10:40,808 - flask.app - INFO - Checking Google Drive auth status
2025-09-16 14:10:40,813 - flask.app - INFO - Checking Google Drive auth status
2025-09-16 14:10:41,536 - flask.app - INFO - Received user sync request
2025-09-16 14:10:41,548 - flask.app - INFO - Received user sync request
2025-09-16 14:10:41,549 - flask.app - INFO - Checking Google Drive auth status
2025-09-16 14:10:41,549 - flask.app - INFO - Getting synced Google Drive files
2025-09-16 14:10:41,549 - flask.app - ERROR - Error getting synced files: 'DatabaseManager' object has no attribute 'session'
2025-09-16 14:10:41,581 - flask.app - ERROR - Database error during user sync: (psycopg2.OperationalError) connection to server at "localhost" (::1), port 5432 failed: FATAL:  role "username" does not exist

(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-09-16 14:10:41,581 - flask.app - ERROR - Database error during user sync: (psycopg2.OperationalError) connection to server at "localhost" (::1), port 5432 failed: FATAL:  role "username" does not exist

(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-09-16 14:10:41,585 - flask.app - INFO - Fetching documents for user: uw5I716vuuxmuIUeS0rnjbNTDFP9MoFI
2025-09-16 14:10:41,589 - flask.app - INFO - Fetching documents for user: uw5I716vuuxmuIUeS0rnjbNTDFP9MoFI
2025-09-16 14:10:41,589 - flask.app - ERROR - Unhandled exception
Traceback (most recent call last):
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 3301, in raw_connection
    return self.pool.connect()
           ~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/impl.py", line 177, in _do_get
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/impl.py", line 175, in _do_get
    return self._create_connection()
           ~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 388, in _create_connection
    return _ConnectionRecord(self)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 673, in __init__
    self.__connect()
    ~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 899, in __connect
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 895, in __connect
    self.dbapi_connection = connection = pool._invoke_creator(self)
                                         ~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/create.py", line 661, in connect
    return dialect.connect(*cargs, **cparams)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 629, in connect
    return self.loaded_dbapi.connect(*cargs, **cparams)  # type: ignore[no-any-return]  # NOQA: E501
           ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/psycopg2/__init__.py", line 122, in connect
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)
psycopg2.OperationalError: connection to server at "localhost" (::1), port 5432 failed: FATAL:  role "username" does not exist


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/flask_server.py", line 1175, in get_user_documents
    documents = db_manager.get_user_documents(user_id)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/database.py", line 293, in get_user_documents
    return session.query(Document).filter(Document.user_id == user_id).order_by(Document.created_at.desc()).all()
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/orm/query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/orm/query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 1189, in _connection_for_bind
    conn = bind.connect()
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 3277, in connect
    return self._connection_cls(self)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 145, in __init__
    Connection._handle_dbapi_exception_noconnection(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        err, dialect, engine
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 2440, in _handle_dbapi_exception_noconnection
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 3301, in raw_connection
    return self.pool.connect()
           ~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/impl.py", line 177, in _do_get
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/impl.py", line 175, in _do_get
    return self._create_connection()
           ~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 388, in _create_connection
    return _ConnectionRecord(self)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 673, in __init__
    self.__connect()
    ~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 899, in __connect
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 895, in __connect
    self.dbapi_connection = connection = pool._invoke_creator(self)
                                         ~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/create.py", line 661, in connect
    return dialect.connect(*cargs, **cparams)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 629, in connect
    return self.loaded_dbapi.connect(*cargs, **cparams)  # type: ignore[no-any-return]  # NOQA: E501
           ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/psycopg2/__init__.py", line 122, in connect
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)
sqlalchemy.exc.OperationalError: (psycopg2.OperationalError) connection to server at "localhost" (::1), port 5432 failed: FATAL:  role "username" does not exist

(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-09-16 14:10:41,592 - flask.app - ERROR - Unhandled exception
Traceback (most recent call last):
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 3301, in raw_connection
    return self.pool.connect()
           ~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/impl.py", line 177, in _do_get
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/impl.py", line 175, in _do_get
    return self._create_connection()
           ~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 388, in _create_connection
    return _ConnectionRecord(self)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 673, in __init__
    self.__connect()
    ~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 899, in __connect
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 895, in __connect
    self.dbapi_connection = connection = pool._invoke_creator(self)
                                         ~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/create.py", line 661, in connect
    return dialect.connect(*cargs, **cparams)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 629, in connect
    return self.loaded_dbapi.connect(*cargs, **cparams)  # type: ignore[no-any-return]  # NOQA: E501
           ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/psycopg2/__init__.py", line 122, in connect
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)
psycopg2.OperationalError: connection to server at "localhost" (::1), port 5432 failed: FATAL:  role "username" does not exist


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/flask_server.py", line 1175, in get_user_documents
    documents = db_manager.get_user_documents(user_id)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/database.py", line 293, in get_user_documents
    return session.query(Document).filter(Document.user_id == user_id).order_by(Document.created_at.desc()).all()
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/orm/query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/orm/query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 1189, in _connection_for_bind
    conn = bind.connect()
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 3277, in connect
    return self._connection_cls(self)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 145, in __init__
    Connection._handle_dbapi_exception_noconnection(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        err, dialect, engine
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 2440, in _handle_dbapi_exception_noconnection
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 3301, in raw_connection
    return self.pool.connect()
           ~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/impl.py", line 177, in _do_get
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/impl.py", line 175, in _do_get
    return self._create_connection()
           ~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 388, in _create_connection
    return _ConnectionRecord(self)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 673, in __init__
    self.__connect()
    ~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 899, in __connect
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 895, in __connect
    self.dbapi_connection = connection = pool._invoke_creator(self)
                                         ~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/create.py", line 661, in connect
    return dialect.connect(*cargs, **cparams)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 629, in connect
    return self.loaded_dbapi.connect(*cargs, **cparams)  # type: ignore[no-any-return]  # NOQA: E501
           ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/psycopg2/__init__.py", line 122, in connect
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)
sqlalchemy.exc.OperationalError: (psycopg2.OperationalError) connection to server at "localhost" (::1), port 5432 failed: FATAL:  role "username" does not exist

(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-09-16 14:10:41,866 - flask.app - INFO - Generating Google Drive auth URL
2025-09-16 14:10:48,956 - flask.app - INFO - Handling Google Drive auth callback
2025-09-16 14:10:49,679 - flask.app - INFO - Getting Google Drive folder tree
2025-09-16 14:10:50,794 - flask.app - ERROR - Error getting folder tree: 'children'
2025-09-16 14:10:50,902 - flask.app - INFO - Checking Google Drive auth status
2025-09-16 14:13:18,848 - flask.app - INFO - Connected to index server
2025-09-16 14:13:38,408 - flask.app - INFO - Getting Google Drive folder tree
2025-09-16 14:14:20,730 - flask.app - INFO - Checking Google Drive auth status
2025-09-16 14:14:20,731 - flask.app - INFO - Checking Google Drive auth status
2025-09-16 14:14:21,421 - flask.app - INFO - Received user sync request
2025-09-16 14:14:21,446 - flask.app - INFO - Checking Google Drive auth status
2025-09-16 14:14:21,451 - flask.app - INFO - Getting synced Google Drive files
2025-09-16 14:14:21,451 - flask.app - ERROR - Error getting synced files: 'DatabaseManager' object has no attribute 'session'
2025-09-16 14:14:21,461 - flask.app - INFO - Received user sync request
2025-09-16 14:14:21,490 - flask.app - ERROR - Database error during user sync: (psycopg2.OperationalError) connection to server at "localhost" (::1), port 5432 failed: FATAL:  role "username" does not exist

(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-09-16 14:14:21,492 - flask.app - ERROR - Database error during user sync: (psycopg2.OperationalError) connection to server at "localhost" (::1), port 5432 failed: FATAL:  role "username" does not exist

(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-09-16 14:14:21,493 - flask.app - INFO - Fetching documents for user: uw5I716vuuxmuIUeS0rnjbNTDFP9MoFI
2025-09-16 14:14:21,496 - flask.app - ERROR - Unhandled exception
Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ~~~~~~~~~~~~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 3301, in raw_connection
    return self.pool.connect()
           ~~~~~~~~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/impl.py", line 177, in _do_get
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/impl.py", line 175, in _do_get
    return self._create_connection()
           ~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 388, in _create_connection
    return _ConnectionRecord(self)
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 673, in __init__
    self.__connect()
    ~~~~~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 899, in __connect
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 895, in __connect
    self.dbapi_connection = connection = pool._invoke_creator(self)
                                         ~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/engine/create.py", line 661, in connect
    return dialect.connect(*cargs, **cparams)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 629, in connect
    return self.loaded_dbapi.connect(*cargs, **cparams)  # type: ignore[no-any-return]  # NOQA: E501
           ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.13/site-packages/psycopg2/__init__.py", line 122, in connect
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)
psycopg2.OperationalError: connection to server at "localhost" (::1), port 5432 failed: FATAL:  role "username" does not exist


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.13/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/opt/homebrew/lib/python3.13/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/flask_server.py", line 1175, in get_user_documents
    documents = db_manager.get_user_documents(user_id)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/database.py", line 293, in get_user_documents
    return session.query(Document).filter(Document.user_id == user_id).order_by(Document.created_at.desc()).all()
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/orm/query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/orm/query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 1189, in _connection_for_bind
    conn = bind.connect()
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 3277, in connect
    return self._connection_cls(self)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 145, in __init__
    Connection._handle_dbapi_exception_noconnection(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        err, dialect, engine
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 2440, in _handle_dbapi_exception_noconnection
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ~~~~~~~~~~~~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 3301, in raw_connection
    return self.pool.connect()
           ~~~~~~~~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/impl.py", line 177, in _do_get
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/impl.py", line 175, in _do_get
    return self._create_connection()
           ~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 388, in _create_connection
    return _ConnectionRecord(self)
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 673, in __init__
    self.__connect()
    ~~~~~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 899, in __connect
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 895, in __connect
    self.dbapi_connection = connection = pool._invoke_creator(self)
                                         ~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/engine/create.py", line 661, in connect
    return dialect.connect(*cargs, **cparams)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 629, in connect
    return self.loaded_dbapi.connect(*cargs, **cparams)  # type: ignore[no-any-return]  # NOQA: E501
           ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.13/site-packages/psycopg2/__init__.py", line 122, in connect
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)
sqlalchemy.exc.OperationalError: (psycopg2.OperationalError) connection to server at "localhost" (::1), port 5432 failed: FATAL:  role "username" does not exist

(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-09-16 14:14:21,497 - flask.app - INFO - Fetching documents for user: uw5I716vuuxmuIUeS0rnjbNTDFP9MoFI
2025-09-16 14:14:21,507 - flask.app - ERROR - Unhandled exception
Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ~~~~~~~~~~~~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 3301, in raw_connection
    return self.pool.connect()
           ~~~~~~~~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/impl.py", line 177, in _do_get
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/impl.py", line 175, in _do_get
    return self._create_connection()
           ~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 388, in _create_connection
    return _ConnectionRecord(self)
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 673, in __init__
    self.__connect()
    ~~~~~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 899, in __connect
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 895, in __connect
    self.dbapi_connection = connection = pool._invoke_creator(self)
                                         ~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/engine/create.py", line 661, in connect
    return dialect.connect(*cargs, **cparams)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 629, in connect
    return self.loaded_dbapi.connect(*cargs, **cparams)  # type: ignore[no-any-return]  # NOQA: E501
           ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.13/site-packages/psycopg2/__init__.py", line 122, in connect
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)
psycopg2.OperationalError: connection to server at "localhost" (::1), port 5432 failed: FATAL:  role "username" does not exist


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.13/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/opt/homebrew/lib/python3.13/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/flask_server.py", line 1175, in get_user_documents
    documents = db_manager.get_user_documents(user_id)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/database.py", line 293, in get_user_documents
    return session.query(Document).filter(Document.user_id == user_id).order_by(Document.created_at.desc()).all()
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/orm/query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/orm/query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 1189, in _connection_for_bind
    conn = bind.connect()
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 3277, in connect
    return self._connection_cls(self)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 145, in __init__
    Connection._handle_dbapi_exception_noconnection(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        err, dialect, engine
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 2440, in _handle_dbapi_exception_noconnection
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ~~~~~~~~~~~~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 3301, in raw_connection
    return self.pool.connect()
           ~~~~~~~~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/impl.py", line 177, in _do_get
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/impl.py", line 175, in _do_get
    return self._create_connection()
           ~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 388, in _create_connection
    return _ConnectionRecord(self)
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 673, in __init__
    self.__connect()
    ~~~~~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 899, in __connect
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 895, in __connect
    self.dbapi_connection = connection = pool._invoke_creator(self)
                                         ~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/engine/create.py", line 661, in connect
    return dialect.connect(*cargs, **cparams)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 629, in connect
    return self.loaded_dbapi.connect(*cargs, **cparams)  # type: ignore[no-any-return]  # NOQA: E501
           ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.13/site-packages/psycopg2/__init__.py", line 122, in connect
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)
sqlalchemy.exc.OperationalError: (psycopg2.OperationalError) connection to server at "localhost" (::1), port 5432 failed: FATAL:  role "username" does not exist

(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-09-16 14:14:21,562 - flask.app - INFO - Getting Google Drive folder tree
2025-09-16 14:14:22,494 - flask.app - INFO - Listing Google Drive files
2025-09-16 14:14:43,087 - flask.app - INFO - Checking Google Drive auth status
2025-09-16 14:14:43,092 - flask.app - INFO - Checking Google Drive auth status
2025-09-16 14:14:43,284 - flask.app - INFO - Received user sync request
2025-09-16 14:14:43,285 - flask.app - INFO - Received user sync request
2025-09-16 14:14:43,288 - flask.app - INFO - Checking Google Drive auth status
2025-09-16 14:14:43,289 - flask.app - INFO - Getting synced Google Drive files
2025-09-16 14:14:43,289 - flask.app - ERROR - Error getting synced files: 'DatabaseManager' object has no attribute 'session'
2025-09-16 14:14:43,292 - flask.app - ERROR - Database error during user sync: (psycopg2.OperationalError) connection to server at "localhost" (::1), port 5432 failed: FATAL:  role "username" does not exist

(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-09-16 14:14:43,294 - flask.app - ERROR - Database error during user sync: (psycopg2.OperationalError) connection to server at "localhost" (::1), port 5432 failed: FATAL:  role "username" does not exist

(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-09-16 14:14:43,296 - flask.app - INFO - Fetching documents for user: uw5I716vuuxmuIUeS0rnjbNTDFP9MoFI
2025-09-16 14:14:43,300 - flask.app - INFO - Fetching documents for user: uw5I716vuuxmuIUeS0rnjbNTDFP9MoFI
2025-09-16 14:14:43,301 - flask.app - ERROR - Unhandled exception
Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ~~~~~~~~~~~~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 3301, in raw_connection
    return self.pool.connect()
           ~~~~~~~~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/impl.py", line 177, in _do_get
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/impl.py", line 175, in _do_get
    return self._create_connection()
           ~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 388, in _create_connection
    return _ConnectionRecord(self)
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 673, in __init__
    self.__connect()
    ~~~~~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 899, in __connect
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 895, in __connect
    self.dbapi_connection = connection = pool._invoke_creator(self)
                                         ~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/engine/create.py", line 661, in connect
    return dialect.connect(*cargs, **cparams)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 629, in connect
    return self.loaded_dbapi.connect(*cargs, **cparams)  # type: ignore[no-any-return]  # NOQA: E501
           ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.13/site-packages/psycopg2/__init__.py", line 122, in connect
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)
psycopg2.OperationalError: connection to server at "localhost" (::1), port 5432 failed: FATAL:  role "username" does not exist


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.13/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/opt/homebrew/lib/python3.13/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/flask_server.py", line 1175, in get_user_documents
    documents = db_manager.get_user_documents(user_id)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/database.py", line 293, in get_user_documents
    return session.query(Document).filter(Document.user_id == user_id).order_by(Document.created_at.desc()).all()
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/orm/query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/orm/query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 1189, in _connection_for_bind
    conn = bind.connect()
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 3277, in connect
    return self._connection_cls(self)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 145, in __init__
    Connection._handle_dbapi_exception_noconnection(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        err, dialect, engine
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 2440, in _handle_dbapi_exception_noconnection
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ~~~~~~~~~~~~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 3301, in raw_connection
    return self.pool.connect()
           ~~~~~~~~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/impl.py", line 177, in _do_get
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/impl.py", line 175, in _do_get
    return self._create_connection()
           ~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 388, in _create_connection
    return _ConnectionRecord(self)
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 673, in __init__
    self.__connect()
    ~~~~~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 899, in __connect
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 895, in __connect
    self.dbapi_connection = connection = pool._invoke_creator(self)
                                         ~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/engine/create.py", line 661, in connect
    return dialect.connect(*cargs, **cparams)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 629, in connect
    return self.loaded_dbapi.connect(*cargs, **cparams)  # type: ignore[no-any-return]  # NOQA: E501
           ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.13/site-packages/psycopg2/__init__.py", line 122, in connect
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)
sqlalchemy.exc.OperationalError: (psycopg2.OperationalError) connection to server at "localhost" (::1), port 5432 failed: FATAL:  role "username" does not exist

(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-09-16 14:14:43,303 - flask.app - ERROR - Unhandled exception
Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ~~~~~~~~~~~~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 3301, in raw_connection
    return self.pool.connect()
           ~~~~~~~~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/impl.py", line 177, in _do_get
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/impl.py", line 175, in _do_get
    return self._create_connection()
           ~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 388, in _create_connection
    return _ConnectionRecord(self)
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 673, in __init__
    self.__connect()
    ~~~~~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 899, in __connect
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 895, in __connect
    self.dbapi_connection = connection = pool._invoke_creator(self)
                                         ~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/engine/create.py", line 661, in connect
    return dialect.connect(*cargs, **cparams)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 629, in connect
    return self.loaded_dbapi.connect(*cargs, **cparams)  # type: ignore[no-any-return]  # NOQA: E501
           ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.13/site-packages/psycopg2/__init__.py", line 122, in connect
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)
psycopg2.OperationalError: connection to server at "localhost" (::1), port 5432 failed: FATAL:  role "username" does not exist


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.13/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/opt/homebrew/lib/python3.13/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/flask_server.py", line 1175, in get_user_documents
    documents = db_manager.get_user_documents(user_id)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/database.py", line 293, in get_user_documents
    return session.query(Document).filter(Document.user_id == user_id).order_by(Document.created_at.desc()).all()
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/orm/query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/orm/query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 1189, in _connection_for_bind
    conn = bind.connect()
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 3277, in connect
    return self._connection_cls(self)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 145, in __init__
    Connection._handle_dbapi_exception_noconnection(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        err, dialect, engine
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 2440, in _handle_dbapi_exception_noconnection
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ~~~~~~~~~~~~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 3301, in raw_connection
    return self.pool.connect()
           ~~~~~~~~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/impl.py", line 177, in _do_get
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/impl.py", line 175, in _do_get
    return self._create_connection()
           ~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 388, in _create_connection
    return _ConnectionRecord(self)
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 673, in __init__
    self.__connect()
    ~~~~~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 899, in __connect
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 895, in __connect
    self.dbapi_connection = connection = pool._invoke_creator(self)
                                         ~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/engine/create.py", line 661, in connect
    return dialect.connect(*cargs, **cparams)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 629, in connect
    return self.loaded_dbapi.connect(*cargs, **cparams)  # type: ignore[no-any-return]  # NOQA: E501
           ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.13/site-packages/psycopg2/__init__.py", line 122, in connect
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)
sqlalchemy.exc.OperationalError: (psycopg2.OperationalError) connection to server at "localhost" (::1), port 5432 failed: FATAL:  role "username" does not exist

(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-09-16 14:14:57,371 - flask.app - INFO - Getting Google Drive folder tree
2025-09-16 14:14:58,502 - flask.app - INFO - Listing Google Drive files
2025-09-16 14:15:52,749 - flask.app - INFO - Listing Google Drive files
2025-09-16 14:17:32,468 - flask.app - INFO - Received user sync request
2025-09-16 14:17:32,479 - flask.app - ERROR - Database error during user sync: (psycopg2.OperationalError) connection to server at "localhost" (::1), port 5432 failed: FATAL:  role "username" does not exist

(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-09-16 14:17:32,484 - flask.app - INFO - Fetching documents for user: uw5I716vuuxmuIUeS0rnjbNTDFP9MoFI
2025-09-16 14:17:32,487 - flask.app - ERROR - Unhandled exception
Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ~~~~~~~~~~~~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 3301, in raw_connection
    return self.pool.connect()
           ~~~~~~~~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/impl.py", line 177, in _do_get
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/impl.py", line 175, in _do_get
    return self._create_connection()
           ~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 388, in _create_connection
    return _ConnectionRecord(self)
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 673, in __init__
    self.__connect()
    ~~~~~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 899, in __connect
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 895, in __connect
    self.dbapi_connection = connection = pool._invoke_creator(self)
                                         ~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/engine/create.py", line 661, in connect
    return dialect.connect(*cargs, **cparams)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 629, in connect
    return self.loaded_dbapi.connect(*cargs, **cparams)  # type: ignore[no-any-return]  # NOQA: E501
           ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.13/site-packages/psycopg2/__init__.py", line 122, in connect
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)
psycopg2.OperationalError: connection to server at "localhost" (::1), port 5432 failed: FATAL:  role "username" does not exist


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.13/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/opt/homebrew/lib/python3.13/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/flask_server.py", line 1175, in get_user_documents
    documents = db_manager.get_user_documents(user_id)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/database.py", line 293, in get_user_documents
    return session.query(Document).filter(Document.user_id == user_id).order_by(Document.created_at.desc()).all()
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/orm/query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/orm/query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 1189, in _connection_for_bind
    conn = bind.connect()
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 3277, in connect
    return self._connection_cls(self)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 145, in __init__
    Connection._handle_dbapi_exception_noconnection(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        err, dialect, engine
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 2440, in _handle_dbapi_exception_noconnection
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ~~~~~~~~~~~~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 3301, in raw_connection
    return self.pool.connect()
           ~~~~~~~~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/impl.py", line 177, in _do_get
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/impl.py", line 175, in _do_get
    return self._create_connection()
           ~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 388, in _create_connection
    return _ConnectionRecord(self)
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 673, in __init__
    self.__connect()
    ~~~~~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 899, in __connect
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 895, in __connect
    self.dbapi_connection = connection = pool._invoke_creator(self)
                                         ~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/engine/create.py", line 661, in connect
    return dialect.connect(*cargs, **cparams)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 629, in connect
    return self.loaded_dbapi.connect(*cargs, **cparams)  # type: ignore[no-any-return]  # NOQA: E501
           ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.13/site-packages/psycopg2/__init__.py", line 122, in connect
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)
sqlalchemy.exc.OperationalError: (psycopg2.OperationalError) connection to server at "localhost" (::1), port 5432 failed: FATAL:  role "username" does not exist

(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-09-16 14:17:32,627 - flask.app - INFO - Received user sync request
2025-09-16 14:17:32,630 - flask.app - ERROR - Database error during user sync: (psycopg2.OperationalError) connection to server at "localhost" (::1), port 5432 failed: FATAL:  role "username" does not exist

(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-09-16 14:17:32,633 - flask.app - INFO - Fetching documents for user: uw5I716vuuxmuIUeS0rnjbNTDFP9MoFI
2025-09-16 14:17:32,635 - flask.app - ERROR - Unhandled exception
Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ~~~~~~~~~~~~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 3301, in raw_connection
    return self.pool.connect()
           ~~~~~~~~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/impl.py", line 177, in _do_get
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/impl.py", line 175, in _do_get
    return self._create_connection()
           ~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 388, in _create_connection
    return _ConnectionRecord(self)
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 673, in __init__
    self.__connect()
    ~~~~~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 899, in __connect
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 895, in __connect
    self.dbapi_connection = connection = pool._invoke_creator(self)
                                         ~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/engine/create.py", line 661, in connect
    return dialect.connect(*cargs, **cparams)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 629, in connect
    return self.loaded_dbapi.connect(*cargs, **cparams)  # type: ignore[no-any-return]  # NOQA: E501
           ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.13/site-packages/psycopg2/__init__.py", line 122, in connect
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)
psycopg2.OperationalError: connection to server at "localhost" (::1), port 5432 failed: FATAL:  role "username" does not exist


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/opt/homebrew/lib/python3.13/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/opt/homebrew/lib/python3.13/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/flask_server.py", line 1175, in get_user_documents
    documents = db_manager.get_user_documents(user_id)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/database.py", line 293, in get_user_documents
    return session.query(Document).filter(Document.user_id == user_id).order_by(Document.created_at.desc()).all()
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/orm/query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/orm/query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 1189, in _connection_for_bind
    conn = bind.connect()
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 3277, in connect
    return self._connection_cls(self)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 145, in __init__
    Connection._handle_dbapi_exception_noconnection(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        err, dialect, engine
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 2440, in _handle_dbapi_exception_noconnection
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ~~~~~~~~~~~~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 3301, in raw_connection
    return self.pool.connect()
           ~~~~~~~~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/impl.py", line 177, in _do_get
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/impl.py", line 175, in _do_get
    return self._create_connection()
           ~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 388, in _create_connection
    return _ConnectionRecord(self)
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 673, in __init__
    self.__connect()
    ~~~~~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 899, in __connect
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 895, in __connect
    self.dbapi_connection = connection = pool._invoke_creator(self)
                                         ~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/engine/create.py", line 661, in connect
    return dialect.connect(*cargs, **cparams)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 629, in connect
    return self.loaded_dbapi.connect(*cargs, **cparams)  # type: ignore[no-any-return]  # NOQA: E501
           ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.13/site-packages/psycopg2/__init__.py", line 122, in connect
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)
sqlalchemy.exc.OperationalError: (psycopg2.OperationalError) connection to server at "localhost" (::1), port 5432 failed: FATAL:  role "username" does not exist

(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-09-16 16:05:46,802 - flask.app - INFO - Connected to index server
2025-09-16 16:06:01,326 - flask.app - INFO - Checking Google Drive auth status
2025-09-16 16:06:01,330 - flask.app - INFO - Checking Google Drive auth status
2025-09-16 16:06:01,538 - flask.app - INFO - Checking Google Drive auth status
2025-09-16 16:06:01,539 - flask.app - INFO - Getting synced Google Drive files
2025-09-16 16:06:01,539 - flask.app - ERROR - Error getting synced files: 'DatabaseManager' object has no attribute 'session'
2025-09-16 16:06:01,542 - flask.app - INFO - Received user sync request
2025-09-16 16:06:01,546 - flask.app - INFO - Received user sync request
2025-09-16 16:06:01,666 - flask.app - ERROR - Database error during user sync: (psycopg2.OperationalError) connection to server at "localhost" (::1), port 5432 failed: FATAL:  role "username" does not exist

(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-09-16 16:06:01,666 - flask.app - ERROR - Database error during user sync: (psycopg2.OperationalError) connection to server at "localhost" (::1), port 5432 failed: FATAL:  role "username" does not exist

(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-09-16 16:06:01,669 - flask.app - INFO - Fetching documents for user: uw5I716vuuxmuIUeS0rnjbNTDFP9MoFI
2025-09-16 16:06:01,671 - flask.app - ERROR - Unhandled exception
Traceback (most recent call last):
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 3301, in raw_connection
    return self.pool.connect()
           ~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/impl.py", line 177, in _do_get
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/impl.py", line 175, in _do_get
    return self._create_connection()
           ~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 388, in _create_connection
    return _ConnectionRecord(self)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 673, in __init__
    self.__connect()
    ~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 899, in __connect
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 895, in __connect
    self.dbapi_connection = connection = pool._invoke_creator(self)
                                         ~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/create.py", line 661, in connect
    return dialect.connect(*cargs, **cparams)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 629, in connect
    return self.loaded_dbapi.connect(*cargs, **cparams)  # type: ignore[no-any-return]  # NOQA: E501
           ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/psycopg2/__init__.py", line 122, in connect
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)
psycopg2.OperationalError: connection to server at "localhost" (::1), port 5432 failed: FATAL:  role "username" does not exist


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/flask_server.py", line 1180, in get_user_documents
    documents = db_manager.get_user_documents(user_id)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/database.py", line 293, in get_user_documents
    return session.query(Document).filter(Document.user_id == user_id).order_by(Document.created_at.desc()).all()
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/orm/query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/orm/query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 1189, in _connection_for_bind
    conn = bind.connect()
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 3277, in connect
    return self._connection_cls(self)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 145, in __init__
    Connection._handle_dbapi_exception_noconnection(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        err, dialect, engine
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 2440, in _handle_dbapi_exception_noconnection
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 3301, in raw_connection
    return self.pool.connect()
           ~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/impl.py", line 177, in _do_get
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/impl.py", line 175, in _do_get
    return self._create_connection()
           ~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 388, in _create_connection
    return _ConnectionRecord(self)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 673, in __init__
    self.__connect()
    ~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 899, in __connect
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 895, in __connect
    self.dbapi_connection = connection = pool._invoke_creator(self)
                                         ~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/create.py", line 661, in connect
    return dialect.connect(*cargs, **cparams)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 629, in connect
    return self.loaded_dbapi.connect(*cargs, **cparams)  # type: ignore[no-any-return]  # NOQA: E501
           ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/psycopg2/__init__.py", line 122, in connect
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)
sqlalchemy.exc.OperationalError: (psycopg2.OperationalError) connection to server at "localhost" (::1), port 5432 failed: FATAL:  role "username" does not exist

(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-09-16 16:06:01,672 - flask.app - INFO - Fetching documents for user: uw5I716vuuxmuIUeS0rnjbNTDFP9MoFI
2025-09-16 16:06:01,685 - flask.app - ERROR - Unhandled exception
Traceback (most recent call last):
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 3301, in raw_connection
    return self.pool.connect()
           ~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/impl.py", line 177, in _do_get
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/impl.py", line 175, in _do_get
    return self._create_connection()
           ~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 388, in _create_connection
    return _ConnectionRecord(self)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 673, in __init__
    self.__connect()
    ~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 899, in __connect
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 895, in __connect
    self.dbapi_connection = connection = pool._invoke_creator(self)
                                         ~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/create.py", line 661, in connect
    return dialect.connect(*cargs, **cparams)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 629, in connect
    return self.loaded_dbapi.connect(*cargs, **cparams)  # type: ignore[no-any-return]  # NOQA: E501
           ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/psycopg2/__init__.py", line 122, in connect
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)
psycopg2.OperationalError: connection to server at "localhost" (::1), port 5432 failed: FATAL:  role "username" does not exist


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/flask_server.py", line 1180, in get_user_documents
    documents = db_manager.get_user_documents(user_id)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/database.py", line 293, in get_user_documents
    return session.query(Document).filter(Document.user_id == user_id).order_by(Document.created_at.desc()).all()
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/orm/query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/orm/query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 1189, in _connection_for_bind
    conn = bind.connect()
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 3277, in connect
    return self._connection_cls(self)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 145, in __init__
    Connection._handle_dbapi_exception_noconnection(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        err, dialect, engine
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 2440, in _handle_dbapi_exception_noconnection
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 3301, in raw_connection
    return self.pool.connect()
           ~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/impl.py", line 177, in _do_get
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/impl.py", line 175, in _do_get
    return self._create_connection()
           ~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 388, in _create_connection
    return _ConnectionRecord(self)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 673, in __init__
    self.__connect()
    ~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 899, in __connect
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 895, in __connect
    self.dbapi_connection = connection = pool._invoke_creator(self)
                                         ~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/create.py", line 661, in connect
    return dialect.connect(*cargs, **cparams)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 629, in connect
    return self.loaded_dbapi.connect(*cargs, **cparams)  # type: ignore[no-any-return]  # NOQA: E501
           ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/psycopg2/__init__.py", line 122, in connect
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)
sqlalchemy.exc.OperationalError: (psycopg2.OperationalError) connection to server at "localhost" (::1), port 5432 failed: FATAL:  role "username" does not exist

(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-09-16 16:07:58,597 - flask.app - INFO - Connected to index server
2025-09-16 16:09:10,518 - flask.app - INFO - Connected to index server
2025-09-16 16:20:21,067 - flask.app - ERROR - Error running evaluation test: Object of type ExtractRun is not JSON serializable
2025-09-16 16:21:44,177 - flask.app - ERROR - Error running evaluation test: Object of type ExtractRun is not JSON serializable
2025-09-16 16:26:52,009 - flask.app - INFO - Connected to index server
2025-09-16 16:30:00,670 - flask.app - INFO - Connected to index server
2025-09-16 16:32:10,733 - flask.app - INFO - Connected to index server
2025-09-16 16:50:14,692 - flask.app - INFO - Connected to index server
2025-09-16 17:00:48,334 - flask.app - INFO - Connected to index server
2025-09-16 18:57:29,343 - flask.app - INFO - Connected to index server
2025-09-16 19:09:33,014 - flask.app - INFO - Connected to index server
2025-09-16 19:23:31,646 - flask.app - INFO - Connected to index server
2025-09-16 20:04:34,772 - flask.app - ERROR - Error running evaluation test: Object of type ExtractRun is not JSON serializable
2025-09-16 20:07:40,479 - flask.app - INFO - Connected to index server
2025-09-16 20:57:53,127 - flask.app - ERROR - Error running evaluation test: Object of type ExtractRun is not JSON serializable
2025-09-16 21:04:59,959 - flask.app - ERROR - Error running evaluation test: Object of type ExtractRun is not JSON serializable
2025-09-16 21:19:11,675 - flask.app - ERROR - Error running evaluation test: Object of type ExtractRun is not JSON serializable
2025-09-16 21:26:01,879 - flask.app - INFO - Connected to index server
2025-09-16 21:48:07,770 - flask.app - INFO - Connected to index server
2025-09-16 21:48:22,730 - flask.app - INFO - Received key terms extraction request
2025-09-16 21:49:01,392 - flask.app - INFO - Received key terms extraction request
2025-09-16 21:49:19,782 - flask.app - INFO - Received streaming key terms extraction request
2025-09-16 21:49:19,787 - flask.app - ERROR - Error in stream generator
Traceback (most recent call last):
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/flask_server.py", line 542, in generate
    if request.method == "POST":
       ^^^^^^^^^^^^^^
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/werkzeug/local.py", line 318, in __get__
    obj = instance._get_current_object()
  File "/Users/betojuareziii/Applications/atlas-lease-extractor/.venv/lib/python3.13/site-packages/werkzeug/local.py", line 519, in _get_current_object
    raise RuntimeError(unbound_message) from None
RuntimeError: Working outside of request context.

This typically means that you attempted to use functionality that needed
an active HTTP request. Consult the documentation on testing for
information about how to avoid this problem.
2025-09-16 21:54:03,258 - flask.app - INFO - Connected to index server
2025-09-16 21:57:59,069 - flask.app - ERROR - Error running evaluation test: Object of type ExtractRun is not JSON serializable
2025-09-16 22:04:09,469 - flask.app - INFO - Connected to index server
2025-09-16 22:10:04,517 - flask.app - INFO - Connected to index server
2025-09-16 22:11:11,371 - flask.app - INFO - Connected to index server
2025-09-16 22:21:30,557 - flask.app - INFO - Connected to index server
2025-09-16 22:24:18,129 - flask.app - INFO - Connected to index server
